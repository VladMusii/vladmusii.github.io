if(typeof jQuery!=="undefined"){var osjQuerryUse=jQuery;$osUse=$;};
        (function(api_session_token, api_modules, osApiId){

/*********************/
/****** 	jquery.min.js	 ***********/
/*********************/
/*! jQuery v1.9.0 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license */(function(e,t){"use strict";function n(e){var t=e.length,n=st.type(e);return st.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){var t=Tt[e]={};return st.each(e.match(lt)||[],function(e,n){t[n]=!0}),t}function i(e,n,r,i){if(st.acceptData(e)){var o,a,s=st.expando,u="string"==typeof n,l=e.nodeType,c=l?st.cache:e,f=l?e[s]:e[s]&&s;if(f&&c[f]&&(i||c[f].data)||!u||r!==t)return f||(l?e[s]=f=K.pop()||st.guid++:f=s),c[f]||(c[f]={},l||(c[f].toJSON=st.noop)),("object"==typeof n||"function"==typeof n)&&(i?c[f]=st.extend(c[f],n):c[f].data=st.extend(c[f].data,n)),o=c[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[st.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[st.camelCase(n)])):a=o,a}}function o(e,t,n){if(st.acceptData(e)){var r,i,o,a=e.nodeType,u=a?st.cache:e,l=a?e[st.expando]:st.expando;if(u[l]){if(t&&(r=n?u[l]:u[l].data)){st.isArray(t)?t=t.concat(st.map(t,st.camelCase)):t in r?t=[t]:(t=st.camelCase(t),t=t in r?[t]:t.split(" "));for(i=0,o=t.length;o>i;i++)delete r[t[i]];if(!(n?s:st.isEmptyObject)(r))return}(n||(delete u[l].data,s(u[l])))&&(a?st.cleanData([e],!0):st.support.deleteExpando||u!=u.window?delete u[l]:u[l]=null)}}}function a(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(Nt,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:wt.test(r)?st.parseJSON(r):r}catch(o){}st.data(e,n,r)}else r=t}return r}function s(e){var t;for(t in e)if(("data"!==t||!st.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(){return!0}function l(){return!1}function c(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function f(e,t,n){if(t=t||0,st.isFunction(t))return st.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return st.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=st.grep(e,function(e){return 1===e.nodeType});if(Wt.test(t))return st.filter(t,r,!n);t=st.filter(t,r)}return st.grep(e,function(e){return st.inArray(e,t)>=0===n})}function p(e){var t=zt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function d(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function g(e){var t=nn.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n,r=0;null!=(n=e[r]);r++)st._data(n,"globalEval",!t||st._data(t[r],"globalEval"))}function y(e,t){if(1===t.nodeType&&st.hasData(e)){var n,r,i,o=st._data(e),a=st._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)st.event.add(t,n,s[n][r])}a.data&&(a.data=st.extend({},a.data))}}function v(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!st.support.noCloneEvent&&t[st.expando]){r=st._data(t);for(i in r.events)st.removeEvent(t,i,r.handle);t.removeAttribute(st.expando)}"script"===n&&t.text!==e.text?(h(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),st.support.html5Clone&&e.innerHTML&&!st.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Zt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function b(e,n){var r,i,o=0,a=e.getElementsByTagName!==t?e.getElementsByTagName(n||"*"):e.querySelectorAll!==t?e.querySelectorAll(n||"*"):t;if(!a)for(a=[],r=e.childNodes||e;null!=(i=r[o]);o++)!n||st.nodeName(i,n)?a.push(i):st.merge(a,b(i,n));return n===t||n&&st.nodeName(e,n)?st.merge([e],a):a}function x(e){Zt.test(e.type)&&(e.defaultChecked=e.checked)}function T(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Nn.length;i--;)if(t=Nn[i]+n,t in e)return t;return r}function w(e,t){return e=t||e,"none"===st.css(e,"display")||!st.contains(e.ownerDocument,e)}function N(e,t){for(var n,r=[],i=0,o=e.length;o>i;i++)n=e[i],n.style&&(r[i]=st._data(n,"olddisplay"),t?(r[i]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&w(n)&&(r[i]=st._data(n,"olddisplay",S(n.nodeName)))):r[i]||w(n)||st._data(n,"olddisplay",st.css(n,"display")));for(i=0;o>i;i++)n=e[i],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[i]||"":"none"));return e}function C(e,t,n){var r=mn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=st.css(e,n+wn[o],!0,i)),r?("content"===n&&(a-=st.css(e,"padding"+wn[o],!0,i)),"margin"!==n&&(a-=st.css(e,"border"+wn[o]+"Width",!0,i))):(a+=st.css(e,"padding"+wn[o],!0,i),"padding"!==n&&(a+=st.css(e,"border"+wn[o]+"Width",!0,i)));return a}function E(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=ln(e),a=st.support.boxSizing&&"border-box"===st.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=un(e,t,o),(0>i||null==i)&&(i=e.style[t]),yn.test(i))return i;r=a&&(st.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+k(e,t,n||(a?"border":"content"),r,o)+"px"}function S(e){var t=V,n=bn[e];return n||(n=A(e,t),"none"!==n&&n||(cn=(cn||st("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(cn[0].contentWindow||cn[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=A(e,t),cn.detach()),bn[e]=n),n}function A(e,t){var n=st(t.createElement(e)).appendTo(t.body),r=st.css(n[0],"display");return n.remove(),r}function j(e,t,n,r){var i;if(st.isArray(t))st.each(t,function(t,i){n||kn.test(e)?r(e,i):j(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==st.type(t))r(e,t);else for(i in t)j(e+"["+i+"]",t[i],n,r)}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(lt)||[];if(st.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function L(e,n,r,i){function o(u){var l;return a[u]=!0,st.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||s||a[c]?s?!(l=c):t:(n.dataTypes.unshift(c),o(c),!1)}),l}var a={},s=e===$n;return o(n.dataTypes[0])||!a["*"]&&o("*")}function H(e,n){var r,i,o=st.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);return i&&st.extend(!0,e,i),e}function M(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(o in c)o in r&&(n[c[o]]=r[o]);for(;"*"===l[0];)l.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){l.unshift(o);break}if(l[0]in r)a=l[0];else{for(o in r){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}s||(s=o)}a=a||s}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function q(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=u[++s];)if("*"!==i){if("*"!==l&&l!==i){if(n=a[l+" "+i]||a["* "+i],!n)for(r in a)if(o=r.split(" "),o[1]===i&&(n=a[l+" "+o[0]]||a["* "+o[0]])){n===!0?n=a[r]:a[r]!==!0&&(i=o[0],u.splice(s--,0,i));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(c){return{state:"parsererror",error:n?c:"No conversion from "+l+" to "+i}}}l=i}return{state:"success",data:t}}function _(){try{return new e.XMLHttpRequest}catch(t){}}function F(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function O(){return setTimeout(function(){Qn=t}),Qn=st.now()}function B(e,t){st.each(t,function(t,n){for(var r=(rr[t]||[]).concat(rr["*"]),i=0,o=r.length;o>i;i++)if(r[i].call(e,t,n))return})}function P(e,t,n){var r,i,o=0,a=nr.length,s=st.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Qn||O(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:st.extend({},t),opts:st.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qn||O(),duration:n.duration,tweens:[],createTween:function(t,n){var r=st.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(R(c,l.opts.specialEasing);a>o;o++)if(r=nr[o].call(l,e,c,l.opts))return r;return B(l,c),st.isFunction(l.opts.start)&&l.opts.start.call(e,l),st.fx.timer(st.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function R(e,t){var n,r,i,o,a;for(n in e)if(r=st.camelCase(n),i=t[r],o=e[n],st.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=st.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function W(e,t,n){var r,i,o,a,s,u,l,c,f,p=this,d=e.style,h={},g=[],m=e.nodeType&&w(e);n.queue||(c=st._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,f=c.empty.fire,c.empty.fire=function(){c.unqueued||f()}),c.unqueued++,p.always(function(){p.always(function(){c.unqueued--,st.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===st.css(e,"display")&&"none"===st.css(e,"float")&&(st.support.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",st.support.shrinkWrapBlocks||p.done(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(o=t[r],Zn.exec(o)){if(delete t[r],u=u||"toggle"===o,o===(m?"hide":"show"))continue;g.push(r)}if(a=g.length){s=st._data(e,"fxshow")||st._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?st(e).show():p.done(function(){st(e).hide()}),p.done(function(){var t;st._removeData(e,"fxshow");for(t in h)st.style(e,t,h[t])});for(r=0;a>r;r++)i=g[r],l=p.createTween(i,m?s[i]:0),h[i]=s[i]||st.style(e,i),i in s||(s[i]=l.start,m&&(l.end=l.start,l.start="width"===i||"height"===i?1:0))}}function $(e,t,n,r,i){return new $.prototype.init(e,t,n,r,i)}function I(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=wn[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function z(e){return st.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var X,U,V=e.document,Y=e.location,J=e.jQuery,G=e.$,Q={},K=[],Z="1.9.0",et=K.concat,tt=K.push,nt=K.slice,rt=K.indexOf,it=Q.toString,ot=Q.hasOwnProperty,at=Z.trim,st=function(e,t){return new st.fn.init(e,t,X)},ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,lt=/\S+/g,ct=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ft=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,pt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^[\],:{}\s]*$/,ht=/(?:^|:|,)(?:\s*\[)+/g,gt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,mt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,yt=/^-ms-/,vt=/-([\da-z])/gi,bt=function(e,t){return t.toUpperCase()},xt=function(){V.addEventListener?(V.removeEventListener("DOMContentLoaded",xt,!1),st.ready()):"complete"===V.readyState&&(V.detachEvent("onreadystatechange",xt),st.ready())};st.fn=st.prototype={jquery:Z,constructor:st,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ft.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof st?n[0]:n,st.merge(this,st.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:V,!0)),pt.test(i[1])&&st.isPlainObject(n))for(i in n)st.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=V.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=V,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):st.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),st.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return nt.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=st.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return st.each(this,e,t)},ready:function(e){return st.ready.promise().done(e),this},slice:function(){return this.pushStack(nt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(st.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:tt,sort:[].sort,splice:[].splice},st.fn.init.prototype=st.fn,st.extend=st.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||st.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(e=arguments[u]))for(n in e)r=s[n],i=e[n],s!==i&&(c&&i&&(st.isPlainObject(i)||(o=st.isArray(i)))?(o?(o=!1,a=r&&st.isArray(r)?r:[]):a=r&&st.isPlainObject(r)?r:{},s[n]=st.extend(c,a,i)):i!==t&&(s[n]=i));return s},st.extend({noConflict:function(t){return e.$===st&&(e.$=G),t&&e.jQuery===st&&(e.jQuery=J),st},isReady:!1,readyWait:1,holdReady:function(e){e?st.readyWait++:st.ready(!0)},ready:function(e){if(e===!0?!--st.readyWait:!st.isReady){if(!V.body)return setTimeout(st.ready);st.isReady=!0,e!==!0&&--st.readyWait>0||(U.resolveWith(V,[st]),st.fn.trigger&&st(V).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===st.type(e)},isArray:Array.isArray||function(e){return"array"===st.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Q[it.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==st.type(e)||e.nodeType||st.isWindow(e))return!1;try{if(e.constructor&&!ot.call(e,"constructor")&&!ot.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||ot.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||V;var r=pt.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=st.buildFragment([e],t,i),i&&st(i).remove(),st.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=st.trim(n),n&&dt.test(n.replace(gt,"@").replace(mt,"]").replace(ht,"")))?Function("return "+n)():(st.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||st.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&st.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(yt,"ms-").replace(vt,bt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:at&&!at.call("\ufeff\u00a0")?function(e){return null==e?"":at.call(e)}:function(e){return null==e?"":(e+"").replace(ct,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?st.merge(r,"string"==typeof e?[e]:e):tt.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(rt)return rt.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),u=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&(u[u.length]=i);else for(o in e)i=t(e[o],o,r),null!=i&&(u[u.length]=i);return et.apply([],u)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(r=e[n],n=e,e=r),st.isFunction(e)?(i=nt.call(arguments,2),o=function(){return e.apply(n||this,i.concat(nt.call(arguments)))},o.guid=e.guid=e.guid||st.guid++,o):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===st.type(r)){o=!0;for(u in r)st.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,st.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(st(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),st.ready.promise=function(t){if(!U)if(U=st.Deferred(),"complete"===V.readyState)setTimeout(st.ready);else if(V.addEventListener)V.addEventListener("DOMContentLoaded",xt,!1),e.addEventListener("load",st.ready,!1);else{V.attachEvent("onreadystatechange",xt),e.attachEvent("onload",st.ready);var n=!1;try{n=null==e.frameElement&&V.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!st.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}st.ready()}}()}return U.promise(t)},st.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Q["[object "+t+"]"]=t.toLowerCase()}),X=st(V);var Tt={};st.Callbacks=function(e){e="string"==typeof e?Tt[e]||r(e):st.extend({},e);var n,i,o,a,s,u,l=[],c=!e.once&&[],f=function(t){for(n=e.memory&&t,i=!0,u=a||0,a=0,s=l.length,o=!0;l&&s>u;u++)if(l[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}o=!1,l&&(c?c.length&&f(c.shift()):n?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;(function r(t){st.each(t,function(t,n){var i=st.type(n);"function"===i?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})})(arguments),o?s=l.length:n&&(a=t,f(n))}return this},remove:function(){return l&&st.each(arguments,function(e,t){for(var n;(n=st.inArray(t,l,n))>-1;)l.splice(n,1),o&&(s>=n&&s--,u>=n&&u--)}),this},has:function(e){return st.inArray(e,l)>-1},empty:function(){return l=[],this},disable:function(){return l=c=n=t,this},disabled:function(){return!l},lock:function(){return c=t,n||p.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||i&&!c||(o?c.push(t):f(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},st.extend({Deferred:function(e){var t=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return st.Deferred(function(n){st.each(t,function(t,o){var a=o[0],s=st.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&st.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?st.extend(e,r):r}},i={};return r.pipe=r.then,st.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=nt.call(arguments),a=o.length,s=1!==a||e&&st.isFunction(e.promise)?a:0,u=1===s?e:st.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?nt.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=Array(a),n=Array(a),r=Array(a);a>i;i++)o[i]&&st.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--s;return s||u.resolveWith(r,o),u.promise()}}),st.support=function(){var n,r,i,o,a,s,u,l,c,f,p=V.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=p.getElementsByTagName("*"),i=p.getElementsByTagName("a")[0],!r||!i||!r.length)return{};o=V.createElement("select"),a=o.appendChild(V.createElement("option")),s=p.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",n={getSetAttribute:"t"!==p.className,leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!s.value,optSelected:a.selected,enctype:!!V.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==V.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===V.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},s.checked=!0,n.noCloneChecked=s.cloneNode(!0).checked,o.disabled=!0,n.optDisabled=!a.disabled;try{delete p.test}catch(d){n.deleteExpando=!1}s=V.createElement("input"),s.setAttribute("value",""),n.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),n.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),u=V.createDocumentFragment(),u.appendChild(s),n.appendChecked=s.checked,n.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){n.noCloneEvent=!1}),p.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+f,"t"),n[f+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",n.clearCloneStyle="content-box"===p.style.backgroundClip,st(function(){var r,i,o,a="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=V.getElementsByTagName("body")[0];s&&(r=V.createElement("div"),r.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(r).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",n.reliableHiddenOffsets=c&&0===o[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",n.boxSizing=4===p.offsetWidth,n.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,e.getComputedStyle&&(n.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,n.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,i=p.appendChild(V.createElement("div")),i.style.cssText=p.style.cssText=a,i.style.marginRight=i.style.width="0",p.style.width="1px",n.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),p.style.zoom!==t&&(p.innerHTML="",p.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",n.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",n.shrinkWrapBlocks=3!==p.offsetWidth,s.style.zoom=1),s.removeChild(r),r=p=o=i=null)}),r=o=u=a=i=s=null,n}();var wt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Nt=/([A-Z])/g;st.extend({cache:{},expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?st.cache[e[st.expando]]:e[st.expando],!!e&&!s(e)},data:function(e,t,n){return i(e,t,n,!1)},removeData:function(e,t){return o(e,t,!1)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){var t=e.nodeName&&st.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),st.fn.extend({data:function(e,n){var r,i,o=this[0],s=0,u=null;if(e===t){if(this.length&&(u=st.data(o),1===o.nodeType&&!st._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>s;s++)i=r[s].name,i.indexOf("data-")||(i=st.camelCase(i.substring(5)),a(o,i,u[i]));st._data(o,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){st.data(this,e)}):st.access(this,function(n){return n===t?o?a(o,e,st.data(o,e)):null:(this.each(function(){st.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){st.removeData(this,e)})}}),st.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=st._data(e,n),r&&(!i||st.isArray(r)?i=st._data(e,n,st.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=st.queue(e,t),r=n.length,i=n.shift(),o=st._queueHooks(e,t),a=function(){st.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return st._data(e,n)||st._data(e,n,{empty:st.Callbacks("once memory").add(function(){st._removeData(e,t+"queue"),st._removeData(e,n)})})}}),st.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?st.queue(this[0],e):n===t?this:this.each(function(){var t=st.queue(this,e,n);st._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&st.dequeue(this,e)})},dequeue:function(e){return this.each(function(){st.dequeue(this,e)})},delay:function(e,t){return e=st.fx?st.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=st.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=st._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var Ct,kt,Et=/[\t\r\n]/g,St=/\r/g,At=/^(?:input|select|textarea|button|object)$/i,jt=/^(?:a|area)$/i,Dt=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Lt=/^(?:checked|selected)$/i,Ht=st.support.getSetAttribute,Mt=st.support.input;st.fn.extend({attr:function(e,t){return st.access(this,st.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){st.removeAttr(this,e)})},prop:function(e,t){return st.access(this,st.prop,e,t,arguments.length>1)},removeProp:function(e){return e=st.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(st.isFunction(e))return this.each(function(t){st(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(lt)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Et," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=st.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(st.isFunction(e))return this.each(function(t){st(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(lt)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Et," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?st.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return st.isFunction(e)?this.each(function(n){st(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var i,o=0,a=st(this),s=t,u=e.match(lt)||[];i=u[o++];)s=r?s:!a.hasClass(i),a[s?"addClass":"removeClass"](i);else("undefined"===n||"boolean"===n)&&(this.className&&st._data(this,"__className__",this.className),this.className=this.className||e===!1?"":st._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Et," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=st.isFunction(e),this.each(function(r){var o,a=st(this);1===this.nodeType&&(o=i?e.call(this,r,a.val()):e,null==o?o="":"number"==typeof o?o+="":st.isArray(o)&&(o=st.map(o,function(e){return null==e?"":e+""})),n=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))});if(o)return n=st.valHooks[o.type]||st.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,"string"==typeof r?r.replace(St,""):null==r?"":r)}}}),st.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(st.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&st.nodeName(n.parentNode,"optgroup"))){if(t=st(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=st.makeArray(t);return st(e).find("option").each(function(){this.selected=st.inArray(st(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return e.getAttribute===t?st.prop(e,n,r):(a=1!==s||!st.isXMLDoc(e),a&&(n=n.toLowerCase(),o=st.attrHooks[n]||(Dt.test(n)?kt:Ct)),r===t?o&&a&&"get"in o&&null!==(i=o.get(e,n))?i:(e.getAttribute!==t&&(i=e.getAttribute(n)),null==i?t:i):null!==r?o&&a&&"set"in o&&(i=o.set(e,r,n))!==t?i:(e.setAttribute(n,r+""),r):(st.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(lt);if(o&&1===e.nodeType)for(;n=o[i++];)r=st.propFix[n]||n,Dt.test(n)?!Ht&&Lt.test(n)?e[st.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:st.attr(e,n,""),e.removeAttribute(Ht?n:r)},attrHooks:{type:{set:function(e,t){if(!st.support.radioValue&&"radio"===t&&st.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!st.isXMLDoc(e),a&&(n=st.propFix[n]||n,o=st.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):At.test(e.nodeName)||jt.test(e.nodeName)&&e.href?0:t}}}}),kt={get:function(e,n){var r=st.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?Mt&&Ht?null!=i:Lt.test(n)?e[st.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?st.removeAttr(e,n):Mt&&Ht||!Lt.test(n)?e.setAttribute(!Ht&&st.propFix[n]||n,n):e[st.camelCase("default-"+n)]=e[n]=!0,n}},Mt&&Ht||(st.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return st.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t
},set:function(e,n,r){return st.nodeName(e,"input")?(e.defaultValue=n,t):Ct&&Ct.set(e,n,r)}}),Ht||(Ct=st.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},st.attrHooks.contenteditable={get:Ct.get,set:function(e,t,n){Ct.set(e,""===t?!1:t,n)}},st.each(["width","height"],function(e,n){st.attrHooks[n]=st.extend(st.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),st.support.hrefNormalized||(st.each(["href","src","width","height"],function(e,n){st.attrHooks[n]=st.extend(st.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),st.each(["href","src"],function(e,t){st.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),st.support.style||(st.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),st.support.optSelected||(st.propHooks.selected=st.extend(st.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),st.support.enctype||(st.propFix.enctype="encoding"),st.support.checkOn||st.each(["radio","checkbox"],function(){st.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),st.each(["radio","checkbox"],function(){st.valHooks[this]=st.extend(st.valHooks[this],{set:function(e,n){return st.isArray(n)?e.checked=st.inArray(st(e).val(),n)>=0:t}})});var qt=/^(?:input|select|textarea)$/i,_t=/^key/,Ft=/^(?:mouse|contextmenu)|click/,Ot=/^(?:focusinfocus|focusoutblur)$/,Bt=/^([^.]*)(?:\.(.+)|)$/;st.event={global:{},add:function(e,n,r,i,o){var a,s,u,l,c,f,p,d,h,g,m,y=3!==e.nodeType&&8!==e.nodeType&&st._data(e);if(y){for(r.handler&&(a=r,r=a.handler,o=a.selector),r.guid||(r.guid=st.guid++),(l=y.events)||(l=y.events={}),(s=y.handle)||(s=y.handle=function(e){return st===t||e&&st.event.triggered===e.type?t:st.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=(n||"").match(lt)||[""],c=n.length;c--;)u=Bt.exec(n[c])||[],h=m=u[1],g=(u[2]||"").split(".").sort(),p=st.event.special[h]||{},h=(o?p.delegateType:p.bindType)||h,p=st.event.special[h]||{},f=st.extend({type:h,origType:m,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&st.expr.match.needsContext.test(o),namespace:g.join(".")},a),(d=l[h])||(d=l[h]=[],d.delegateCount=0,p.setup&&p.setup.call(e,i,g,s)!==!1||(e.addEventListener?e.addEventListener(h,s,!1):e.attachEvent&&e.attachEvent("on"+h,s))),p.add&&(p.add.call(e,f),f.handler.guid||(f.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,f):d.push(f),st.event.global[h]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,m=st.hasData(e)&&st._data(e);if(m&&(u=m.events)){for(t=(t||"").match(lt)||[""],l=t.length;l--;)if(s=Bt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(f=st.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||st.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)st.event.remove(e,d+t[l],n,r,!0);st.isEmptyObject(u)&&(delete m.handle,st._removeData(e,"events"))}},trigger:function(n,r,i,o){var a,s,u,l,c,f,p,d=[i||V],h=n.type||n,g=n.namespace?n.namespace.split("."):[];if(s=u=i=i||V,3!==i.nodeType&&8!==i.nodeType&&!Ot.test(h+st.event.triggered)&&(h.indexOf(".")>=0&&(g=h.split("."),h=g.shift(),g.sort()),c=0>h.indexOf(":")&&"on"+h,n=n[st.expando]?n:new st.Event(h,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:st.makeArray(r,[n]),p=st.event.special[h]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!st.isWindow(i)){for(l=p.delegateType||h,Ot.test(l+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),u=s;u===(i.ownerDocument||V)&&d.push(u.defaultView||u.parentWindow||e)}for(a=0;(s=d[a++])&&!n.isPropagationStopped();)n.type=a>1?l:p.bindType||h,f=(st._data(s,"events")||{})[n.type]&&st._data(s,"handle"),f&&f.apply(s,r),f=c&&s[c],f&&st.acceptData(s)&&f.apply&&f.apply(s,r)===!1&&n.preventDefault();if(n.type=h,!(o||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===h&&st.nodeName(i,"a")||!st.acceptData(i)||!c||!i[h]||st.isWindow(i))){u=i[c],u&&(i[c]=null),st.event.triggered=h;try{i[h]()}catch(m){}st.event.triggered=t,u&&(i[c]=u)}return n.result}},dispatch:function(e){e=st.event.fix(e);var n,r,i,o,a,s=[],u=nt.call(arguments),l=(st._data(this,"events")||{})[e.type]||[],c=st.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=st.event.handlers.call(this,e,l),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(a=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,i=((st.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],r=0;u>r;r++)a=n[r],o=a.selector+" ",i[o]===t&&(i[o]=a.needsContext?st(o,this).index(l)>=0:st.find(o,this,null,[l]).length),i[o]&&i.push(a);i.length&&s.push({elem:l,handlers:i})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[st.expando])return e;var t,n,r=e,i=st.event.fixHooks[e.type]||{},o=i.props?this.props.concat(i.props):this.props;for(e=new st.Event(r),t=o.length;t--;)n=o[t],e[n]=r[n];return e.target||(e.target=r.srcElement||V),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||V,i=r.documentElement,o=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return st.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==V.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===V.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=st.extend(new st.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?st.event.trigger(i,null,t):st.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},st.removeEvent=V.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,n,r){var i="on"+n;e.detachEvent&&(e[i]===t&&(e[i]=null),e.detachEvent(i,r))},st.Event=function(e,n){return this instanceof st.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?u:l):this.type=e,n&&st.extend(this,n),this.timeStamp=e&&e.timeStamp||st.now(),this[st.expando]=!0,t):new st.Event(e,n)},st.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u,this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){st.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!st.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),st.support.submitBubbles||(st.event.special.submit={setup:function(){return st.nodeName(this,"form")?!1:(st.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=st.nodeName(n,"input")||st.nodeName(n,"button")?n.form:t;r&&!st._data(r,"submitBubbles")&&(st.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),st._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&st.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return st.nodeName(this,"form")?!1:(st.event.remove(this,"._submit"),t)}}),st.support.changeBubbles||(st.event.special.change={setup:function(){return qt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(st.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),st.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),st.event.simulate("change",this,e,!0)})),!1):(st.event.add(this,"beforeactivate._change",function(e){var t=e.target;qt.test(t.nodeName)&&!st._data(t,"changeBubbles")&&(st.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||st.event.simulate("change",this.parentNode,e,!0)}),st._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return st.event.remove(this,"._change"),!qt.test(this.nodeName)}}),st.support.focusinBubbles||st.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){st.event.simulate(t,e.target,st.event.fix(e),!0)};st.event.special[t]={setup:function(){0===n++&&V.addEventListener(e,r,!0)},teardown:function(){0===--n&&V.removeEventListener(e,r,!0)}}}),st.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(s in e)this.on(s,n,r,e[s],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=l;else if(!i)return this;return 1===o&&(a=i,i=function(e){return st().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=st.guid++)),this.each(function(){st.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,st(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=l),this.each(function(){st.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){st.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?st.event.trigger(e,n,r,!0):t},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){st.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)},_t.test(t)&&(st.event.fixHooks[t]=st.event.keyHooks),Ft.test(t)&&(st.event.fixHooks[t]=st.event.mouseHooks)}),function(e,t){function n(e){return ht.test(e+"")}function r(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>C.cacheLength&&delete e[t.shift()],e[n]=r}}function i(e){return e[P]=!0,e}function o(e){var t=L.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function a(e,t,n,r){var i,o,a,s,u,l,c,d,h,g;if((t?t.ownerDocument||t:R)!==L&&D(t),t=t||L,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!M&&!r){if(i=gt.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&O(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Q.apply(n,K.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&W.getByClassName&&t.getElementsByClassName)return Q.apply(n,K.call(t.getElementsByClassName(a),0)),n}if(W.qsa&&!q.test(e)){if(c=!0,d=P,h=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=f(e),(c=t.getAttribute("id"))?d=c.replace(vt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+p(l[u]);h=dt.test(e)&&t.parentNode||t,g=l.join(",")}if(g)try{return Q.apply(n,K.call(h.querySelectorAll(g),0)),n}catch(m){}finally{c||t.removeAttribute("id")}}}return x(e.replace(at,"$1"),t,n,r)}function s(e,t){for(var n=e&&t&&e.nextSibling;n;n=n.nextSibling)if(n===t)return-1;return e?1:-1}function u(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function f(e,t){var n,r,i,o,s,u,l,c=X[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=C.preFilter;s;){(!n||(r=ut.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(i=[])),n=!1,(r=lt.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(at," ")}),s=s.slice(n.length));for(o in C.filter)!(r=pt[o].exec(s))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?a.error(e):X(e,u).slice(0)}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===t.dir,o=I++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l,c=$+" "+o;if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(l=t[P]||(t[P]={}),(u=l[r])&&u[0]===c){if((s=u[1])===!0||s===N)return s===!0}else if(u=l[r]=[c],u[1]=e(t,n,a)||N,u[1]===!0)return!0}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function m(e,t,n,r,o,a){return r&&!r[P]&&(r=m(r)),o&&!o[P]&&(o=m(o,a)),i(function(i,a,s,u){var l,c,f,p=[],d=[],h=a.length,m=i||b(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?m:g(m,p,e,s,u),v=n?o||(i?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r)for(l=g(v,d),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f));if(i){if(o||e){if(o){for(l=[],c=v.length;c--;)(f=v[c])&&l.push(y[c]=f);o(null,v=[],l,u)}for(c=v.length;c--;)(f=v[c])&&(l=o?Z.call(i,f):p[c])>-1&&(i[l]=!(a[l]=f))}}else v=g(v===a?v.splice(h,v.length):v),o?o(null,a,v,u):Q.apply(a,v)})}function y(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,u=d(function(e){return e===t},a,!0),l=d(function(e){return Z.call(t,e)>-1},a,!0),c=[function(e,n,r){return!o&&(r||n!==j)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];i>s;s++)if(n=C.relative[e[s].type])c=[d(h(c),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[P]){for(r=++s;i>r&&!C.relative[e[r].type];r++);return m(s>1&&h(c),s>1&&p(e.slice(0,s-1)).replace(at,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}return h(c)}function v(e,t){var n=0,r=t.length>0,o=e.length>0,s=function(i,s,u,l,c){var f,p,d,h=[],m=0,y="0",v=i&&[],b=null!=c,x=j,T=i||o&&C.find.TAG("*",c&&s.parentNode||s),w=$+=null==x?1:Math.E;for(b&&(j=s!==L&&s,N=n);null!=(f=T[y]);y++){if(o&&f){for(p=0;d=e[p];p++)if(d(f,s,u)){l.push(f);break}b&&($=w,N=++n)}r&&((f=!d&&f)&&m--,i&&v.push(f))}if(m+=y,r&&y!==m){for(p=0;d=t[p];p++)d(v,h,s,u);if(i){if(m>0)for(;y--;)v[y]||h[y]||(h[y]=G.call(l));h=g(h)}Q.apply(l,h),b&&!i&&h.length>0&&m+t.length>1&&a.uniqueSort(l)}return b&&($=w,j=x),v};return r?i(s):s}function b(e,t,n){for(var r=0,i=t.length;i>r;r++)a(e,t[r],n);return n}function x(e,t,n,r){var i,o,a,s,u,l=f(e);if(!r&&1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&!M&&C.relative[o[1].type]){if(t=C.find.ID(a.matches[0].replace(xt,Tt),t)[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=pt.needsContext.test(e)?-1:o.length-1;i>=0&&(a=o[i],!C.relative[s=a.type]);i--)if((u=C.find[s])&&(r=u(a.matches[0].replace(xt,Tt),dt.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return Q.apply(n,K.call(r,0)),n;break}}return S(e,l)(r,t,M,n,dt.test(e)),n}function T(){}var w,N,C,k,E,S,A,j,D,L,H,M,q,_,F,O,B,P="sizzle"+-new Date,R=e.document,W={},$=0,I=0,z=r(),X=r(),U=r(),V=typeof t,Y=1<<31,J=[],G=J.pop,Q=J.push,K=J.slice,Z=J.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},et="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=tt.replace("w","w#"),rt="([*^$|!~]?=)",it="\\["+et+"*("+tt+")"+et+"*(?:"+rt+et+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+nt+")|)|)"+et+"*\\]",ot=":("+tt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+it.replace(3,8)+")*)|.*)\\)|)",at=RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),ut=RegExp("^"+et+"*,"+et+"*"),lt=RegExp("^"+et+"*([\\x20\\t\\r\\n\\f>+~])"+et+"*"),ct=RegExp(ot),ft=RegExp("^"+nt+"$"),pt={ID:RegExp("^#("+tt+")"),CLASS:RegExp("^\\.("+tt+")"),NAME:RegExp("^\\[name=['\"]?("+tt+")['\"]?\\]"),TAG:RegExp("^("+tt.replace("w","w*")+")"),ATTR:RegExp("^"+it),PSEUDO:RegExp("^"+ot),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),needsContext:RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},dt=/[\x20\t\r\n\f]*[+~]/,ht=/\{\s*\[native code\]\s*\}/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,vt=/'|\\/g,bt=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,xt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{K.call(H.childNodes,0)[0].nodeType}catch(wt){K=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}E=a.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=a.setDocument=function(e){var r=e?e.ownerDocument||e:R;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,H=r.documentElement,M=E(r),W.tagNameNoComments=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),W.attributes=o(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),W.getByClassName=o(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),W.getByName=o(function(e){e.id=P+0,e.innerHTML="<a name='"+P+"'></a><div name='"+P+"'></div>",H.insertBefore(e,H.firstChild);var t=r.getElementsByName&&r.getElementsByName(P).length===2+r.getElementsByName(P+0).length;return W.getIdNotName=!r.getElementById(P),H.removeChild(e),t}),C.attrHandle=o(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==V&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},W.getIdNotName?(C.find.ID=function(e,t){if(typeof t.getElementById!==V&&!M){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(xt,Tt);return function(e){return e.getAttribute("id")===t}}):(C.find.ID=function(e,n){if(typeof n.getElementById!==V&&!M){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==V&&r.getAttributeNode("id").value===e?[r]:t:[]}},C.filter.ID=function(e){var t=e.replace(xt,Tt);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=W.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==V?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i];i++)1===n.nodeType&&r.push(n);return r}return o},C.find.NAME=W.getByName&&function(e,n){return typeof n.getElementsByName!==V?n.getElementsByName(name):t},C.find.CLASS=W.getByClassName&&function(e,n){return typeof n.getElementsByClassName===V||M?t:n.getElementsByClassName(e)},_=[],q=[":focus"],(W.qsa=n(r.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||q.push("\\["+et+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||q.push(":checked")}),o(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&q.push("[*^$]="+et+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),q.push(",.*:")})),(W.matchesSelector=n(F=H.matchesSelector||H.mozMatchesSelector||H.webkitMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&o(function(e){W.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),_.push("!=",ot)}),q=RegExp(q.join("|")),_=RegExp(_.join("|")),O=n(H.contains)||H.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},B=H.compareDocumentPosition?function(e,t){var n;return e===t?(A=!0,0):(n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&n||e.parentNode&&11===e.parentNode.nodeType?e===r||O(R,e)?-1:t===r||O(R,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(e===t)return A=!0,0;if(e.sourceIndex&&t.sourceIndex)return(~t.sourceIndex||Y)-(O(R,e)&&~e.sourceIndex||Y);if(!o||!a)return e===r?-1:t===r?1:o?-1:a?1:0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===R?-1:l[i]===R?1:0},A=!1,[0,0].sort(B),W.detectDuplicates=A,L):L},a.matches=function(e,t){return a(e,null,null,t)},a.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&D(e),t=t.replace(bt,"='$1']"),!(!W.matchesSelector||M||_&&_.test(t)||q.test(t)))try{var n=F.call(e,t);if(n||W.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return a(t,L,null,[e]).length>0},a.contains=function(e,t){return(e.ownerDocument||e)!==L&&D(e),O(e,t)},a.attr=function(e,t){var n;return(e.ownerDocument||e)!==L&&D(e),M||(t=t.toLowerCase()),(n=C.attrHandle[t])?n(e):M||W.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},a.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},a.uniqueSort=function(e){var t,n=[],r=1,i=0;if(A=!W.detectDuplicates,e.sort(B),A){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},k=a.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=k(t);return n},C=a.selectors={cacheLength:50,createPseudo:i,match:pt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,Tt),e[3]=(e[4]||e[5]||"").replace(xt,Tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||a.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&a.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return pt.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ct.test(n)&&(t=f(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(xt,Tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=z[e+" "];return t||(t=RegExp("(^|"+et+")"+e+"("+et+"|$)"))&&z(e,function(e){return t.test(e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=a.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.substr(i.length-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(c=m[P]||(m[P]={}),l=c[e]||[],d=l[0]===$&&l[1],p=l[0]===$&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(p=d=0)||h.pop();)if(1===f.nodeType&&++p&&f===t){c[e]=[$,d,p];break}}else if(v&&(l=(t[P]||(t[P]={}))[e])&&l[0]===$)p=l[1];else for(;(f=++d&&f&&f[g]||(p=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++p||(v&&((f[P]||(f[P]={}))[e]=[$,p]),f!==t)););return p-=i,p===r||0===p%r&&p/r>=0}}},PSEUDO:function(e,t){var n,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||a.error("unsupported pseudo: "+e);return r[P]?r(t):r.length>1?(n=[e,e,"",t],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=Z.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:i(function(e){var t=[],n=[],r=S(e.replace(at,"$1"));return r[P]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(t){return a(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return ft.test(e||"")||a.error("unsupported lang: "+e),e=e.replace(xt,Tt).toLowerCase(),function(t){var n;do if(n=M?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return yt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=u(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);S=a.compile=function(e,t){var n,r=[],i=[],o=U[e+" "];if(!o){for(t||(t=f(e)),n=t.length;n--;)o=y(t[n]),o[P]?r.push(o):i.push(o);o=U(e,v(i,r))}return o},C.pseudos.nth=C.pseudos.eq,C.filters=T.prototype=C.pseudos,C.setFilters=new T,D(),a.attr=st.attr,st.find=a,st.expr=a.selectors,st.expr[":"]=st.expr.pseudos,st.unique=a.uniqueSort,st.text=a.getText,st.isXMLDoc=a.isXML,st.contains=a.contains}(e);var Pt=/Until$/,Rt=/^(?:parents|prev(?:Until|All))/,Wt=/^.[^:#\[\.,]*$/,$t=st.expr.match.needsContext,It={children:!0,contents:!0,next:!0,prev:!0};st.fn.extend({find:function(e){var t,n,r;if("string"!=typeof e)return r=this,this.pushStack(st(e).filter(function(){for(t=0;r.length>t;t++)if(st.contains(r[t],this))return!0}));for(n=[],t=0;this.length>t;t++)st.find(e,this[t],n);return n=this.pushStack(st.unique(n)),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=st(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(st.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e,!1))},filter:function(e){return this.pushStack(f(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?$t.test(e)?st(e,this.context).index(this[0])>=0:st.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=$t.test(e)||"string"!=typeof e?st(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?a.index(n)>-1:st.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return this.pushStack(o.length>1?st.unique(o):o)},index:function(e){return e?"string"==typeof e?st.inArray(this[0],st(e)):st.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?st(e,t):st.makeArray(e&&e.nodeType?[e]:e),r=st.merge(this.get(),n);return this.pushStack(st.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),st.fn.andSelf=st.fn.addBack,st.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return st.dir(e,"parentNode")},parentsUntil:function(e,t,n){return st.dir(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")
},nextAll:function(e){return st.dir(e,"nextSibling")},prevAll:function(e){return st.dir(e,"previousSibling")},nextUntil:function(e,t,n){return st.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return st.dir(e,"previousSibling",n)},siblings:function(e){return st.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return st.sibling(e.firstChild)},contents:function(e){return st.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:st.merge([],e.childNodes)}},function(e,t){st.fn[e]=function(n,r){var i=st.map(this,t,n);return Pt.test(e)||(r=n),r&&"string"==typeof r&&(i=st.filter(r,i)),i=this.length>1&&!It[e]?st.unique(i):i,this.length>1&&Rt.test(e)&&(i=i.reverse()),this.pushStack(i)}}),st.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?st.find.matchesSelector(t[0],e)?[t[0]]:[]:st.find.matches(e,t)},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!st(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var zt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Xt=/ jQuery\d+="(?:null|\d+)"/g,Ut=RegExp("<(?:"+zt+")[\\s/>]","i"),Vt=/^\s+/,Yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Jt=/<([\w:]+)/,Gt=/<tbody/i,Qt=/<|&#?\w+;/,Kt=/<(?:script|style|link)/i,Zt=/^(?:checkbox|radio)$/i,en=/checked\s*(?:[^=]|=\s*.checked.)/i,tn=/^$|\/(?:java|ecma)script/i,nn=/^true\/(.*)/,rn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,on={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:st.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},an=p(V),sn=an.appendChild(V.createElement("div"));on.optgroup=on.option,on.tbody=on.tfoot=on.colgroup=on.caption=on.thead,on.th=on.td,st.fn.extend({text:function(e){return st.access(this,function(e){return e===t?st.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(st.isFunction(e))return this.each(function(t){st(this).wrapAll(e.call(this,t))});if(this[0]){var t=st(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return st.isFunction(e)?this.each(function(t){st(this).wrapInner(e.call(this,t))}):this.each(function(){var t=st(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=st.isFunction(e);return this.each(function(n){st(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)(!e||st.filter(e,[n]).length>0)&&(t||1!==n.nodeType||st.cleanData(b(n)),n.parentNode&&(t&&st.contains(n.ownerDocument,n)&&m(b(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&st.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&st.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return st.clone(this,e,t)})},html:function(e){return st.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Xt,""):t;if(!("string"!=typeof e||Kt.test(e)||!st.support.htmlSerialize&&Ut.test(e)||!st.support.leadingWhitespace&&Vt.test(e)||on[(Jt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(st.cleanData(b(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=st.isFunction(e);return t||"string"==typeof e||(e=st(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;(n&&1===this.nodeType||11===this.nodeType)&&(st(this).remove(),t?t.parentNode.insertBefore(e,t):n.appendChild(e))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=et.apply([],e);var i,o,a,s,u,l,c=0,f=this.length,p=this,m=f-1,y=e[0],v=st.isFunction(y);if(v||!(1>=f||"string"!=typeof y||st.support.checkClone)&&en.test(y))return this.each(function(i){var o=p.eq(i);v&&(e[0]=y.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(f&&(i=st.buildFragment(e,this[0].ownerDocument,!1,this),o=i.firstChild,1===i.childNodes.length&&(i=o),o)){for(n=n&&st.nodeName(o,"tr"),a=st.map(b(i,"script"),h),s=a.length;f>c;c++)u=i,c!==m&&(u=st.clone(u,!0,!0),s&&st.merge(a,b(u,"script"))),r.call(n&&st.nodeName(this[c],"table")?d(this[c],"tbody"):this[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,st.map(a,g),c=0;s>c;c++)u=a[c],tn.test(u.type||"")&&!st._data(u,"globalEval")&&st.contains(l,u)&&(u.src?st.ajax({url:u.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):st.globalEval((u.text||u.textContent||u.innerHTML||"").replace(rn,"")));i=o=null}return this}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){st.fn[e]=function(e){for(var n,r=0,i=[],o=st(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),st(o[r])[t](n),tt.apply(i,n.get());return this.pushStack(i)}}),st.extend({clone:function(e,t,n){var r,i,o,a,s,u=st.contains(e.ownerDocument,e);if(st.support.html5Clone||st.isXMLDoc(e)||!Ut.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(sn.innerHTML=e.outerHTML,sn.removeChild(s=sn.firstChild)),!(st.support.noCloneEvent&&st.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||st.isXMLDoc(e)))for(r=b(s),i=b(e),a=0;null!=(o=i[a]);++a)r[a]&&v(o,r[a]);if(t)if(n)for(i=i||b(e),r=r||b(s),a=0;null!=(o=i[a]);a++)y(o,r[a]);else y(e,s);return r=b(s,"script"),r.length>0&&m(r,!u&&b(e,"script")),r=i=o=null,s},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c,f=e.length,d=p(t),h=[],g=0;f>g;g++)if(o=e[g],o||0===o)if("object"===st.type(o))st.merge(h,o.nodeType?[o]:o);else if(Qt.test(o)){for(s=s||d.appendChild(t.createElement("div")),a=(Jt.exec(o)||["",""])[1].toLowerCase(),u=on[a]||on._default,s.innerHTML=u[1]+o.replace(Yt,"<$1></$2>")+u[2],c=u[0];c--;)s=s.lastChild;if(!st.support.leadingWhitespace&&Vt.test(o)&&h.push(t.createTextNode(Vt.exec(o)[0])),!st.support.tbody)for(o="table"!==a||Gt.test(o)?"<table>"!==u[1]||Gt.test(o)?0:s:s.firstChild,c=o&&o.childNodes.length;c--;)st.nodeName(l=o.childNodes[c],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(st.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else h.push(t.createTextNode(o));for(s&&d.removeChild(s),st.support.appendChecked||st.grep(b(h,"input"),x),g=0;o=h[g++];)if((!r||-1===st.inArray(o,r))&&(i=st.contains(o.ownerDocument,o),s=b(d.appendChild(o),"script"),i&&m(s),n))for(c=0;o=s[c++];)tn.test(o.type||"")&&n.push(o);return s=null,d},cleanData:function(e,n){for(var r,i,o,a,s=0,u=st.expando,l=st.cache,c=st.support.deleteExpando,f=st.event.special;null!=(o=e[s]);s++)if((n||st.acceptData(o))&&(i=o[u],r=i&&l[i])){if(r.events)for(a in r.events)f[a]?st.event.remove(o,a):st.removeEvent(o,a,r.handle);l[i]&&(delete l[i],c?delete o[u]:o.removeAttribute!==t?o.removeAttribute(u):o[u]=null,K.push(i))}}});var un,ln,cn,fn=/alpha\([^)]*\)/i,pn=/opacity\s*=\s*([^)]*)/,dn=/^(top|right|bottom|left)$/,hn=/^(none|table(?!-c[ea]).+)/,gn=/^margin/,mn=RegExp("^("+ut+")(.*)$","i"),yn=RegExp("^("+ut+")(?!px)[a-z%]+$","i"),vn=RegExp("^([+-])=("+ut+")","i"),bn={BODY:"block"},xn={position:"absolute",visibility:"hidden",display:"block"},Tn={letterSpacing:0,fontWeight:400},wn=["Top","Right","Bottom","Left"],Nn=["Webkit","O","Moz","ms"];st.fn.extend({css:function(e,n){return st.access(this,function(e,n,r){var i,o,a={},s=0;if(st.isArray(n)){for(i=ln(e),o=n.length;o>s;s++)a[n[s]]=st.css(e,n[s],!1,i);return a}return r!==t?st.style(e,n,r):st.css(e,n)},e,n,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:w(this))?st(this).show():st(this).hide()})}}),st.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=un(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":st.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=st.camelCase(n),l=e.style;if(n=st.cssProps[u]||(st.cssProps[u]=T(l,u)),s=st.cssHooks[n]||st.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=vn.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(st.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||st.cssNumber[u]||(r+="px"),st.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=st.camelCase(n);return n=st.cssProps[u]||(st.cssProps[u]=T(e.style,u)),s=st.cssHooks[n]||st.cssHooks[u],s&&"get"in s&&(o=s.get(e,!0,r)),o===t&&(o=un(e,n,i)),"normal"===o&&n in Tn&&(o=Tn[n]),r?(a=parseFloat(o),r===!0||st.isNumeric(a)?a||0:o):o},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(ln=function(t){return e.getComputedStyle(t,null)},un=function(e,n,r){var i,o,a,s=r||ln(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||st.contains(e.ownerDocument,e)||(u=st.style(e,n)),yn.test(u)&&gn.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):V.documentElement.currentStyle&&(ln=function(e){return e.currentStyle},un=function(e,n,r){var i,o,a,s=r||ln(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),yn.test(u)&&!dn.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u}),st.each(["height","width"],function(e,n){st.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&hn.test(st.css(e,"display"))?st.swap(e,xn,function(){return E(e,n,i)}):E(e,n,i):t},set:function(e,t,r){var i=r&&ln(e);return C(e,t,r?k(e,n,r,st.support.boxSizing&&"border-box"===st.css(e,"boxSizing",!1,i),i):0)}}}),st.support.opacity||(st.cssHooks.opacity={get:function(e,t){return pn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=st.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===st.trim(o.replace(fn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=fn.test(o)?o.replace(fn,i):o+" "+i)}}),st(function(){st.support.reliableMarginRight||(st.cssHooks.marginRight={get:function(e,n){return n?st.swap(e,{display:"inline-block"},un,[e,"marginRight"]):t}}),!st.support.pixelPosition&&st.fn.position&&st.each(["top","left"],function(e,n){st.cssHooks[n]={get:function(e,r){return r?(r=un(e,n),yn.test(r)?st(e).position()[n]+"px":r):t}}})}),st.expr&&st.expr.filters&&(st.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!st.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||st.css(e,"display"))},st.expr.filters.visible=function(e){return!st.expr.filters.hidden(e)}),st.each({margin:"",padding:"",border:"Width"},function(e,t){st.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+wn[r]+t]=o[r]||o[r-2]||o[0];return i}},gn.test(e)||(st.cssHooks[e+t].set=C)});var Cn=/%20/g,kn=/\[\]$/,En=/\r?\n/g,Sn=/^(?:submit|button|image|reset)$/i,An=/^(?:input|select|textarea|keygen)/i;st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=st.prop(this,"elements");return e?st.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!st(this).is(":disabled")&&An.test(this.nodeName)&&!Sn.test(e)&&(this.checked||!Zt.test(e))}).map(function(e,t){var n=st(this).val();return null==n?null:st.isArray(n)?st.map(n,function(e){return{name:t.name,value:e.replace(En,"\r\n")}}):{name:t.name,value:n.replace(En,"\r\n")}}).get()}}),st.param=function(e,n){var r,i=[],o=function(e,t){t=st.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(e)||e.jquery&&!st.isPlainObject(e))st.each(e,function(){o(this.name,this.value)});else for(r in e)j(r,e[r],n,o);return i.join("&").replace(Cn,"+")};var jn,Dn,Ln=st.now(),Hn=/\?/,Mn=/#.*$/,qn=/([?&])_=[^&]*/,_n=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,On=/^(?:GET|HEAD)$/,Bn=/^\/\//,Pn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Rn=st.fn.load,Wn={},$n={},In="*/".concat("*");try{Dn=Y.href}catch(zn){Dn=V.createElement("a"),Dn.href="",Dn=Dn.href}jn=Pn.exec(Dn.toLowerCase())||[],st.fn.load=function(e,n,r){if("string"!=typeof e&&Rn)return Rn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),st.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),s.length>0&&st.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){a=arguments,s.html(i?st("<div>").append(st.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,a||[e.responseText,t,e])}),this},st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){st.fn[t]=function(e){return this.on(t,e)}}),st.each(["get","post"],function(e,n){st[n]=function(e,r,i,o){return st.isFunction(r)&&(o=o||i,i=r,r=t),st.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dn,type:"GET",isLocal:Fn.test(jn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":In,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,st.ajaxSettings),t):H(st.ajaxSettings,e)},ajaxPrefilter:D(Wn),ajaxTransport:D($n),ajax:function(e,n){function r(e,n,r,s){var l,f,v,b,T,N=n;2!==x&&(x=2,u&&clearTimeout(u),i=t,a=s||"",w.readyState=e>0?4:0,r&&(b=M(p,w,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=w.getResponseHeader("Last-Modified"),T&&(st.lastModified[o]=T),T=w.getResponseHeader("etag"),T&&(st.etag[o]=T)),304===e?(l=!0,N="notmodified"):(l=q(p,b),N=l.state,f=l.data,v=l.error,l=!v)):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),w.status=e,w.statusText=(n||N)+"",l?g.resolveWith(d,[f,N,w]):g.rejectWith(d,[w,N,v]),w.statusCode(y),y=t,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[w,p,l?f:v]),m.fireWith(d,[w,N]),c&&(h.trigger("ajaxComplete",[w,p]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,o,a,s,u,l,c,f,p=st.ajaxSetup({},n),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?st(d):st.event,g=st.Deferred(),m=st.Callbacks("once memory"),y=p.statusCode||{},v={},b={},x=0,T="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=_n.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)y[t]=[y[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||T;return i&&i.abort(t),r(0,t),this}};if(g.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,p.url=((e||p.url||Dn)+"").replace(Mn,"").replace(Bn,jn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=st.trim(p.dataType||"*").toLowerCase().match(lt)||[""],null==p.crossDomain&&(l=Pn.exec(p.url.toLowerCase()),p.crossDomain=!(!l||l[1]===jn[1]&&l[2]===jn[2]&&(l[3]||("http:"===l[1]?80:443))==(jn[3]||("http:"===jn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=st.param(p.data,p.traditional)),L(Wn,p,n,w),2===x)return w;c=p.global,c&&0===st.active++&&st.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!On.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(Hn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=qn.test(o)?o.replace(qn,"$1_="+Ln++):o+(Hn.test(o)?"&":"?")+"_="+Ln++)),p.ifModified&&(st.lastModified[o]&&w.setRequestHeader("If-Modified-Since",st.lastModified[o]),st.etag[o]&&w.setRequestHeader("If-None-Match",st.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+In+"; q=0.01":""):p.accepts["*"]);for(f in p.headers)w.setRequestHeader(f,p.headers[f]);if(p.beforeSend&&(p.beforeSend.call(d,w,p)===!1||2===x))return w.abort();T="abort";for(f in{success:1,error:1,complete:1})w[f](p[f]);if(i=L($n,p,n,w)){w.readyState=1,c&&h.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(u=setTimeout(function(){w.abort("timeout")},p.timeout));try{x=1,i.send(v,r)}catch(N){if(!(2>x))throw N;r(-1,N)}}else r(-1,"No Transport");return w},getScript:function(e,n){return st.get(e,t,n,"script")},getJSON:function(e,t,n){return st.get(e,t,n,"json")}}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return st.globalEval(e),e}}}),st.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),st.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=V.head||st("head")[0]||V.documentElement;return{send:function(t,i){n=V.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Xn=[],Un=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xn.pop()||st.expando+"_"+Ln++;return this[e]=!0,e}}),st.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Un.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Un.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=st.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Un,"$1"+o):n.jsonp!==!1&&(n.url+=(Hn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||st.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Xn.push(o)),s&&st.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Vn,Yn,Jn=0,Gn=e.ActiveXObject&&function(){var e;for(e in Vn)Vn[e](t,!0)};st.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&_()||F()}:_,Yn=st.ajaxSettings.xhr(),st.support.cors=!!Yn&&"withCredentials"in Yn,Yn=st.support.ajax=!!Yn,Yn&&st.ajaxTransport(function(n){if(!n.crossDomain||st.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,f,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=st.noop,Gn&&delete Vn[a]),i)4!==u.readyState&&u.abort();else{f={},s=u.status,p=u.responseXML,c=u.getAllResponseHeaders(),p&&p.documentElement&&(f.xml=p),"string"==typeof u.responseText&&(f.text=u.responseText);try{l=u.statusText}catch(d){l=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=f.text?200:404}}catch(h){i||o(-1,h)}f&&o(s,l,f,c)},n.async?4===u.readyState?setTimeout(r):(a=++Jn,Gn&&(Vn||(Vn={},st(e).unload(Gn)),Vn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Qn,Kn,Zn=/^(?:toggle|show|hide)$/,er=RegExp("^(?:([+-])=|)("+ut+")([a-z%]*)$","i"),tr=/queueHooks$/,nr=[W],rr={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=er.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(st.cssNumber[e]?"":"px"),"px"!==r&&s){s=st.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,st.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};st.Animation=st.extend(P,{tweener:function(e,t){st.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],rr[n]=rr[n]||[],rr[n].unshift(t)},prefilter:function(e,t){t?nr.unshift(e):nr.push(e)}}),st.Tween=$,$.prototype={constructor:$,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(st.cssNumber[n]?"":"px")},cur:function(){var e=$.propHooks[this.prop];return e&&e.get?e.get(this):$.propHooks._default.get(this)},run:function(e){var t,n=$.propHooks[this.prop];return this.pos=t=this.options.duration?st.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):$.propHooks._default.set(this),this}},$.prototype.init.prototype=$.prototype,$.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=st.css(e.elem,e.prop,"auto"),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){st.fx.step[e.prop]?st.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[st.cssProps[e.prop]]||st.cssHooks[e.prop])?st.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},$.propHooks.scrollTop=$.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},st.each(["toggle","show","hide"],function(e,t){var n=st.fn[t];st.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(I(t,!0),e,r,i)}}),st.fn.extend({fadeTo:function(e,t,n,r){return this.filter(w).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=st.isEmptyObject(e),o=st.speed(t,n,r),a=function(){var t=P(this,st.extend({},e),o);a.finish=function(){t.stop(!0)},(i||st._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=st.timers,a=st._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&tr.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&st.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=st._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=st.timers,a=r?r.length:0;for(n.finish=!0,st.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),st.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){st.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),st.speed=function(e,t,n){var r=e&&"object"==typeof e?st.extend({},e):{complete:n||!n&&t||st.isFunction(e)&&e,duration:e,easing:n&&t||t&&!st.isFunction(t)&&t};return r.duration=st.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in st.fx.speeds?st.fx.speeds[r.duration]:st.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){st.isFunction(r.old)&&r.old.call(this),r.queue&&st.dequeue(this,r.queue)},r},st.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},st.timers=[],st.fx=$.prototype.init,st.fx.tick=function(){var e,n=st.timers,r=0;for(Qn=st.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||st.fx.stop(),Qn=t},st.fx.timer=function(e){e()&&st.timers.push(e)&&st.fx.start()},st.fx.interval=13,st.fx.start=function(){Kn||(Kn=setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){clearInterval(Kn),Kn=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fx.step={},st.expr&&st.expr.filters&&(st.expr.filters.animated=function(e){return st.grep(st.timers,function(t){return e===t.elem}).length}),st.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){st.offset.setOffset(this,e,t)});var n,r,i={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return n=a.documentElement,st.contains(n,o)?(o.getBoundingClientRect!==t&&(i=o.getBoundingClientRect()),r=z(a),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},st.offset={setOffset:function(e,t,n){var r=st.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,a=st(e),s=a.offset(),u=st.css(e,"top"),l=st.css(e,"left"),c=("absolute"===r||"fixed"===r)&&st.inArray("auto",[u,l])>-1,f={},p={};c?(p=a.position(),i=p.top,o=p.left):(i=parseFloat(u)||0,o=parseFloat(l)||0),st.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+i),null!=t.left&&(f.left=t.left-s.left+o),"using"in t?t.using.call(e,f):a.css(f)}},st.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===st.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),st.nodeName(e[0],"html")||(n=e.offset()),n.top+=st.css(e[0],"borderTopWidth",!0),n.left+=st.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-st.css(r,"marginTop",!0),left:t.left-n.left-st.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||V.documentElement;e&&!st.nodeName(e,"html")&&"static"===st.css(e,"position");)e=e.offsetParent;return e||V.documentElement})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);st.fn[e]=function(i){return st.access(this,function(e,i,o){var a=z(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?st(a).scrollLeft():o,r?o:st(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}}),st.each({Height:"height",Width:"width"},function(e,n){st.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){st.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return st.access(this,function(n,r,i){var o;return st.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?st.css(n,r,s):st.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=st,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return st})})(window);


/*********************/
/****** 	jquery-ui-1.9.1.custom.min.js	 ***********/
/*********************/
/*! jQuery UI - v1.9.1 - 2012-11-19
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.datepicker.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */

(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.1",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var r=e(t.target).closest(".ui-menu-item");!n&&r.not(".ui-state-disabled").length&&(n=!0,this.select(t),r.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),r.each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slidez",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&i.values.length!==2&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(i.range==="min"||i.range==="max"?" ui-slider-range-"+i.range:""))),r=i.values&&i.values.length||1;for(t=s.length;t<r;t++)u.push(o);this.handles=s.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){i.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})})(jQuery);

/*********************/
/****** 	galleria-1.2.9.min.js	 ***********/
/*********************/
/**
 * Galleria v 1.2.9 2013-02-14
 * http://galleria.io
 *
 * Licensed under the MIT license
 * https://raw.github.com/aino/galleria/master/LICENSE
 *
 */(function(a){var b,c=this,d=c.document,e=a(d),f=a(c),g=Array.prototype,h=1.29,i=!0,j=3e4,k=!1,l=navigator.userAgent.toLowerCase(),m=c.location.hash.replace(/#\//,""),n=function(){},o=function(){return!1},p=function(){var a=3,c=d.createElement("div"),e=c.getElementsByTagName("i");do c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->";while(e[0]);return a>4?a:b}(),q=function(){return{html:d.documentElement,body:d.body,head:d.getElementsByTagName("head")[0],title:d.title}},r=c.parent!==c.self,s="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",t=function(){var b=[];return a.each(s.split(" "),function(a,c){b.push(c),/_/.test(c)&&b.push(c.replace(/_/g,""))}),b}(),u=function(b){var c;return typeof b!="object"?b:(a.each(b,function(d,e){/^[a-z]+_/.test(d)&&(c="",a.each(d.split("_"),function(a,b){c+=a>0?b.substr(0,1).toUpperCase()+b.substr(1):b}),b[c]=e,delete b[d])}),b)},v=function(b){return a.inArray(b,t)>-1?Galleria[b.toUpperCase()]:b},w={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(a){return"http://www.youtube.com/embed/"+a},getThumb:function(b,d,e){e=e||n,a.getJSON(c.location.protocol+"//gdata.youtube.com/feeds/api/videos/"+b+"?v=2&alt=json-in-script&callback=?",function(a){try{d(a.entry.media$group.media$thumbnail[0].url)}catch(b){e()}}).error(e)}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(a){return"http://player.vimeo.com/video/"+a},getThumb:function(b,c,d){d=d||n,a.getJSON("http://vimeo.com/api/v2/video/"+b+".json?callback=?",function(a){try{c(a[0].thumbnail_medium)}catch(b){d()}}).error(d)}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(a){return"http://www.dailymotion.com/embed/video/"+a},getThumb:function(b,c,d){d=d||n,a.getJSON("https://api.dailymotion.com/video/"+b+"?fields=thumbnail_medium_url&callback=?",function(a){try{c(a.thumbnail_medium_url)}catch(b){d()}}).error(d)}}},x=function(a){var b;for(var c in w){b=a&&a.match(w[c].reg);if(b&&b.length)return{id:b[2],provider:c}}return!1},y={support:function(){var a=q().html;return!r&&(a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullScreen)}(),callback:n,enter:function(a,b,c){this.instance=a,this.callback=b||n,c=c||q().html,c.requestFullscreen?c.requestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullScreen&&c.webkitRequestFullScreen()},exit:function(a){this.callback=a||n,d.exitFullscreen?d.exitFullscreen():d.mozCancelFullScreen?d.mozCancelFullScreen():d.webkitCancelFullScreen&&d.webkitCancelFullScreen()},instance:null,listen:function(){if(!this.support)return;var a=function(){if(!y.instance)return;var a=y.instance._fullscreen;d.fullscreen||d.mozFullScreen||d.webkitIsFullScreen?a._enter(y.callback):a._exit(y.callback)};d.addEventListener("fullscreenchange",a,!1),d.addEventListener("mozfullscreenchange",a,!1),d.addEventListener("webkitfullscreenchange",a,!1)}},z=[],A=[],B=!1,C=!1,D=[],E=function(b){Galleria.theme=b,a.each(D,function(a,b){b._initialized||b._init.call(b)}),D=[]},F=function(){return{clearTimer:function(b){a.each(Galleria.get(),function(){this.clearTimer(b)})},addTimer:function(b){a.each(Galleria.get(),function(){this.addTimer(b)})},array:function(a){return g.slice.call(a,0)},create:function(a,b){b=b||"div";var c=d.createElement(b);return c.className=a,c},removeFromArray:function(b,c){return a.each(b,function(a,d){if(d==c)return b.splice(a,1),!1}),b},getScriptPath:function(b){b=b||a("script:last").attr("src");var c=b.split("/");return c.length==1?"":(c.pop(),c.join("/")+"/")},animate:function(){var b=function(a){var b="transition WebkitTransition MozTransition OTransition".split(" "),d;if(c.opera)return!1;for(d=0;b[d];d++)if(typeof a[b[d]]!="undefined")return b[d];return!1}((d.body||d.documentElement).style),e={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[b],f={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},g=function(b,c,d){var e={};d=d||"transition",a.each("webkit moz ms o".split(" "),function(){e["-"+this+"-"+d]=c}),b.css(e)},h=function(a){g(a,"none","transition"),Galleria.WEBKIT&&Galleria.TOUCH&&(g(a,"translate3d(0,0,0)","transform"),a.data("revert")&&(a.css(a.data("revert")),a.data("revert",null)))},i,j,k,l,m,o,p;return function(d,q,r){r=a.extend({duration:400,complete:n,stop:!1},r),d=a(d);if(!r.duration){d.css(q),r.complete.call(d[0]);return}if(!b){d.animate(q,r);return}r.stop&&(d.unbind(e),h(d)),i=!1,a.each(q,function(a,b){p=d.css(a),F.parseValue(p)!=F.parseValue(b)&&(i=!0),d.css(a,p)});if(!i){c.setTimeout(function(){r.complete.call(d[0])},r.duration);return}j=[],k=r.easing in f?f[r.easing]:f._default,l=" "+r.duration+"ms"+" cubic-bezier("+k.join(",")+")",c.setTimeout(function(b,c,d,e){return function(){b.one(c,function(a){return function(){h(a),r.complete.call(a[0])}}(b));if(Galleria.WEBKIT&&Galleria.TOUCH){m={},o=[0,0,0],a.each(["left","top"],function(a,c){c in d&&(o[a]=F.parseValue(d[c])-F.parseValue(b.css(c))+"px",m[c]=d[c],delete d[c])});if(o[0]||o[1])b.data("revert",m),j.push("-webkit-transform"+e),g(b,"translate3d("+o.join(",")+")","transform")}a.each(d,function(a,b){j.push(a+e)}),g(b,j.join(",")),b.css(d)}}(d,e,q,l),2)}}(),removeAlpha:function(a){if(p<9&&a){var b=a.style,c=a.currentStyle,d=c&&c.filter||b.filter||"";/alpha/.test(d)&&(b.filter=d.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(b,c){b=a(b),b.attr("style")&&b.data("styles",b.attr("style")).removeAttr("style"),b.css(c)},revertStyles:function(){a.each(F.array(arguments),function(b,c){c=a(c),c.removeAttr("style"),c.attr("style",""),c.data("styles")&&c.attr("style",c.data("styles")).data("styles",null)})},moveOut:function(a){F.forceStyles(a,{position:"absolute",left:-1e4})},moveIn:function(){F.revertStyles.apply(F,F.array(arguments))},elem:function(b){return b instanceof a?{$:b,dom:b[0]}:{$:a(b),dom:b}},hide:function(a,b,c){c=c||n;var d=F.elem(a),e=d.$;a=d.dom,e.data("opacity")||e.data("opacity",e.css("opacity"));var f={opacity:0};if(b){var g=p<9&&a?function(){F.removeAlpha(a),a.style.visibility="hidden",c.call(a)}:c;F.animate(a,f,{duration:b,complete:g,stop:!0})}else p<9&&a?(F.removeAlpha(a),a.style.visibility="hidden"):e.css(f)},show:function(a,b,c){c=c||n;var d=F.elem(a),e=d.$;a=d.dom;var f=parseFloat(e.data("opacity"))||1,g={opacity:f};if(b){p<9&&(e.css("opacity",0),a.style.visibility="visible");var h=p<9&&a?function(){g.opacity==1&&F.removeAlpha(a),c.call(a)}:c;F.animate(a,g,{duration:b,complete:h,stop:!0})}else p<9&&g.opacity==1&&a?(F.removeAlpha(a),a.style.visibility="visible"):e.css(g)},optimizeTouch:function(){var b,c,d,e,f={},g=function(b){b.preventDefault(),f=a.extend({},b,!0)},h=function(){this.evt=f},i=function(){this.handler.call(b,this.evt)};return function(f){a(f).bind("touchend",function(f){b=f.target,e=!0;while(b.parentNode&&b!=f.currentTarget&&e)c=a(b).data("events"),d=a(b).data("fakes"),c&&"click"in c?(e=!1,f.preventDefault(),a(b).click(g).click(),c.click.pop(),a.each(c.click,h),a(b).data("fakes",c.click),delete c.click):d&&(e=!1,f.preventDefault(),a.each(d,i)),b=b.parentNode})}}(),wait:function(b){b=a.extend({until:o,success:n,error:function(){Galleria.raise("Could not complete wait function.")},timeout:3e3},b);var d=F.timestamp(),e,f,g=function(){f=F.timestamp(),e=f-d;if(b.until(e))return b.success(),!1;if(typeof b.timeout=="number"&&f>=d+b.timeout)return b.error(),!1;c.setTimeout(g,10)};c.setTimeout(g,10)},toggleQuality:function(a,b){if(p!==7&&p!==8||!a||a.nodeName.toUpperCase()!="IMG")return;typeof b=="undefined"&&(b=a.style.msInterpolationMode==="nearest-neighbor"),a.style.msInterpolationMode=b?"bicubic":"nearest-neighbor"},insertStyleTag:function(b,c){if(c&&a("#"+c).length)return;var e=d.createElement("style");c&&(e.id=c),q().head.appendChild(e);if(e.styleSheet)e.styleSheet.cssText=b;else{var f=d.createTextNode(b);e.appendChild(f)}},loadScript:function(b,c){var d=!1,e=a("<script>").attr({src:b,async:!0}).get(0);e.onload=e.onreadystatechange=function(){!d&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(d=!0,e.onload=e.onreadystatechange=null,typeof c=="function"&&c.call(this,this))},q().head.appendChild(e)},parseValue:function(a){if(typeof a=="number")return a;if(typeof a=="string"){var b=a.match(/\-?\d|\./g);return b&&b.constructor===Array?b.join("")*1:0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(c,e,f){var g,h;a("link[rel=stylesheet]").each(function(){if((new RegExp(c)).test(this.href))return g=this,!1}),typeof e=="function"&&(f=e,e=b),f=f||n;if(g)return f.call(g,g),g;h=d.styleSheets.length;if(a("#"+e).length)a("#"+e).attr("href",c),h--;else{g=a("<link>").attr({rel:"stylesheet",href:c,id:e}).get(0);var i=a('link[rel="stylesheet"], style');i.length?i.get(0).parentNode.insertBefore(g,i[0]):q().head.appendChild(g);if(p&&h>=31){Galleria.raise("You have reached the browser stylesheet limit (31)",!0);return}}if(typeof f=="function"){var j=a("<s>").attr("id","galleria-loader").hide().appendTo(q().body);F.wait({until:function(){return j.height()==1},success:function(){j.remove(),f.call(g,g)},error:function(){j.remove(),Galleria.raise("Theme CSS could not load after 20 sec. "+(Galleria.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})}return g}}}(),G=function(){var b=function(b,c,d,e){var f=this.getOptions("easing"),g=this.getStageWidth(),h={left:g*(b.rewind?-1:1)},i={left:0};d?(h.opacity=0,i.opacity=1):h.opacity=1,a(b.next).css(h),F.animate(b.next,i,{duration:b.speed,complete:function(a){return function(){c(),a.css({left:0})}}(a(b.next).add(b.prev)),queue:!1,easing:f}),e&&(b.rewind=!b.rewind),b.prev&&(h={left:0},i={left:g*(b.rewind?1:-1)},d&&(h.opacity=1,i.opacity=0),a(b.prev).css(h),F.animate(b.prev,i,{duration:b.speed,queue:!1,easing:f,complete:function(){a(this).css("opacity",0)}}))};return{active:!1,init:function(a,b,c){G.effects.hasOwnProperty(a)&&G.effects[a].call(this,b,c)},effects:{fade:function(b,c){a(b.next).css({opacity:0,left:0}),F.animate(b.next,{opacity:1},{duration:b.speed,complete:c}),b.prev&&(a(b.prev).css("opacity",1).show(),F.animate(b.prev,{opacity:0},{duration:b.speed}))},flash:function(b,c){a(b.next).css({opacity:0,left:0}),b.prev?F.animate(b.prev,{opacity:0},{duration:b.speed/2,complete:function(){F.animate(b.next,{opacity:1},{duration:b.speed,complete:c})}}):F.animate(b.next,{opacity:1},{duration:b.speed,complete:c})},pulse:function(b,c){b.prev&&a(b.prev).hide(),a(b.next).css({opacity:0,left:0}).show(),F.animate(b.next,{opacity:1},{duration:b.speed,complete:c})},slide:function(a,c){b.apply(this,F.array(arguments))},fadeslide:function(a,c){b.apply(this,F.array(arguments).concat([!0]))},doorslide:function(a,c){b.apply(this,F.array(arguments).concat([!1,!0]))}}}}();y.listen(),Galleria=function(){var g=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=b,this._binds=[],this._id=parseInt(Math.random()*1e4,10);var h="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",i="current total";a.each(h.split(" "),function(a,b){g._dom[b]=F.create("galleria-"+b)}),a.each(i.split(" "),function(a,b){g._dom[b]=F.create("galleria-"+b,"span")});var j=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(a){var b=a.keyCode||a.which;b in j.map&&typeof j.map[b]=="function"&&j.map[b].call(g,a)},attach:function(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=b.toUpperCase(),c in j.keys?j.map[j.keys[c]]=a[b]:j.map[c]=a[b]);j.bound||(j.bound=!0,e.bind("keydown",j.press))},detach:function(){j.bound=!1,j.map={},e.unbind("keydown",j.press)}},k=this._controls={0:b,1:b,active:0,swap:function(){k.active=k.active?0:1},getActive:function(){return k[k.active]},getNext:function(){return k[1-k.active]}},m=this._carousel={next:g.$("thumb-nav-right"),prev:g.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var b=0,c=0,d=[0];a.each(g._thumbnails,function(e,f){f.ready&&(b+=f.outerWidth||a(f.container).outerWidth(!0),d[e+1]=b,c=Math.max(c,f.outerHeight||a(f.container).outerHeight(!0)))}),g.$("thumbnails").css({width:b,height:c}),m.max=b,m.hooks=d,m.width=g.$("thumbnails-list").width(),m.setClasses(),g.$("thumbnails-container").toggleClass("galleria-carousel",b>m.width),m.width=g.$("thumbnails-list").width()},bindControls:function(){var a;m.next.bind("click",function(b){b.preventDefault();if(g._options.carouselSteps==="auto"){for(a=m.current;a<m.hooks.length;a++)if(m.hooks[a]-m.hooks[m.current]>m.width){m.set(a-2);break}}else m.set(m.current+g._options.carouselSteps)}),m.prev.bind("click",function(b){b.preventDefault();if(g._options.carouselSteps==="auto")for(a=m.current;a>=0;a--){if(m.hooks[m.current]-m.hooks[a]>m.width){m.set(a+2);break}if(a===0){m.set(0);break}}else m.set(m.current-g._options.carouselSteps)})},set:function(a){a=Math.max(a,0);while(m.hooks[a-1]+m.width>=m.max&&a>=0)a--;m.current=a,m.animate()},getLast:function(a){return(a||m.current)-1},follow:function(a){if(a===0||a===m.hooks.length-2){m.set(a);return}var b=m.current;while(m.hooks[b]-m.hooks[m.current]<m.width&&b<=m.hooks.length)b++;a-1<m.current?m.set(a-1):a+2>b&&m.set(a-b+m.current+2)},setClasses:function(){m.prev.toggleClass("disabled",!m.current),m.next.toggleClass("disabled",m.hooks[m.current]+m.width>=m.max)},animate:function(a){m.setClasses();var b=m.hooks[m.current]*-1;if(isNaN(b))return;F.animate(g.get("thumbnails"),{left:b},{duration:g._options.carouselSpeed,easing:g._options.easing,queue:!1})}},n=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+g._id,swapTimer:"swap"+g._id,init:function(){n.initialized=!0;var a=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";F.insertStyleTag(a,"galleria-tooltip"),g.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(a){var b=g.getMousePosition(a).x,c=g.getMousePosition(a).y,d=g.$("tooltip"),e=b,f=c,h=d.outerHeight(!0)+1,i=d.outerWidth(!0),j=h+15,k=g.$("container").width()-i-2,l=g.$("container").height()-h-2;!isNaN(e)&&!isNaN(f)&&(e+=10,f-=h+8,e=Math.max(0,Math.min(k,e)),f=Math.max(0,Math.min(l,f)),c<j&&(f=j),d.css({left:e,top:f}))},bind:function(b,c){if(Galleria.TOUCH)return;n.initialized||n.init();var d=function(){g.$("container").unbind("mousemove",n.move),g.clearTimer(n.timer),g.$("tooltip").stop().animate({opacity:0},200,function(){g.$("tooltip").hide(),g.addTimer(n.swapTimer,function(){n.open=!1},1e3)})},e=function(b,c){n.define(b,c),a(b).hover(function(){g.clearTimer(n.swapTimer),g.$("container").unbind("mousemove",n.move).bind("mousemove",n.move).trigger("mousemove"),n.show(b),g.addTimer(n.timer,function(){g.$("tooltip").stop().show().animate({opacity:1}),n.open=!0},n.open?0:500)},d).click(d)};typeof c=="string"?e(b in g._dom?g.get(b):b,c):a.each(b,function(a,b){e(g.get(a),b)})},show:function(b){b=a(b in g._dom?g.get(b):b);var d=b.data("tt"),e=function(a){c.setTimeout(function(a){return function(){n.move(a)}}(a),10),b.unbind("mouseup",e)};d=typeof d=="function"?d():d;if(!d)return;g.$("tooltip").html(d.replace(/\s/,"&#160;")),b.bind("mouseup",e)},define:function(b,c){if(typeof c!="function"){var d=c;c=function(){return d}}b=a(b in g._dom?g.get(b):b).data("tt",c),n.show(b)}},o=this._fullscreen={scrolled:0,crop:b,active:!1,keymap:g._keyboard.map,parseCallback:function(b,c){return G.active?function(){typeof b=="function"&&b.call(g);var d=g._controls.getActive(),e=g._controls.getNext();g._scaleImage(e),g._scaleImage(d),c&&g._options.trueFullscreen&&a(d.container).add(e.container).trigger("transitionend")}:b},enter:function(a){a=o.parseCallback(a,!0),g._options.trueFullscreen&&y.support?(o.active=!0,F.forceStyles(g.get("container"),{width:"100%",height:"100%"}),g.rescale(),Galleria.MAC?Galleria.WEBKIT&&(!Galleria.SAFARI||!/version\/[1-5]/.test(l))?(g.$("container").css("opacity",0).addClass("fullscreen"),c.setTimeout(function(){o.scale(),g.$("container").css("opacity",1)},50)):(g.$("stage").css("opacity",0),c.setTimeout(function(){o.scale(),g.$("stage").css("opacity",1)},4)):g.$("container").addClass("fullscreen"),f.resize(o.scale),y.enter(g,a,g.get("container"))):(o.scrolled=f.scrollTop(),c.scrollTo(0,0),o._enter(a))},_enter:function(e){o.active=!0,r&&(o.iframe=function(){var b,e=d.referrer,f=d.createElement("a"),g=c.location;return f.href=e,f.protocol!=g.protocol||f.hostname!=g.hostname||f.port!=g.port?(Galleria.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(o.pd=c.parent.document,a(o.pd).find("iframe").each(function(){var a=this.contentDocument||this.contentWindow.document;if(a===d)return b=this,!1}),b)}()),F.hide(g.getActiveImage()),r&&o.iframe&&(o.iframe.scrolled=a(c.parent).scrollTop(),c.parent.scrollTo(0,0));var h=g.getData(),i=g._options,j=!g._options.trueFullscreen||!y.support,k={height:"100%",overflow:"hidden",margin:0,padding:0};j&&(g.$("container").addClass("fullscreen"),F.forceStyles(g.get("container"),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),F.forceStyles(q().html,k),F.forceStyles(q().body,k)),r&&o.iframe&&(F.forceStyles(o.pd.documentElement,k),F.forceStyles(o.pd.body,k),F.forceStyles(o.iframe,a.extend(k,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),o.keymap=a.extend({},g._keyboard.map),g.attachKeyboard({escape:g.exitFullscreen,right:g.next,left:g.prev}),o.crop=i.imageCrop,i.fullscreenCrop!=b&&(i.imageCrop=i.fullscreenCrop);if(h&&h.big&&h.image!==h.big){var l=new Galleria.Picture,m=l.isCached(h.big),n=g.getIndex(),p=g._thumbnails[n];g.trigger({type:Galleria.LOADSTART,cached:m,rewind:!1,index:n,imageTarget:g.getActiveImage(),thumbTarget:p,galleriaData:h}),l.load(h.big,function(b){g._scaleImage(b,{complete:function(b){g.trigger({type:Galleria.LOADFINISH,cached:m,index:n,rewind:!1,imageTarget:b.image,thumbTarget:p});var c=g._controls.getActive().image;c&&a(c).width(b.image.width).height(b.image.height).attr("style",a(b.image).attr("style")).attr("src",b.image.src)}})})}g.rescale(function(){g.addTimer(!1,function(){j&&F.show(g.getActiveImage()),typeof e=="function"&&e.call(g)},100),g.trigger(Galleria.FULLSCREEN_ENTER)}),j?f.resize(o.scale):F.show(g.getActiveImage())},scale:function(){g.rescale()},exit:function(a){a=o.parseCallback(a),g._options.trueFullscreen&&y.support?y.exit(a):o._exit(a)},_exit:function(a){o.active=!1;var b=!g._options.trueFullscreen||!y.support;g.$("container").removeClass("fullscreen"),b&&(F.hide(g.getActiveImage()),F.revertStyles(g.get("container"),q().html,q().body),c.scrollTo(0,o.scrolled)),r&&o.iframe&&(F.revertStyles(o.pd.documentElement,o.pd.body,o.iframe),o.iframe.scrolled&&c.parent.scrollTo(0,o.iframe.scrolled)),g.detachKeyboard(),g.attachKeyboard(o.keymap),g._options.imageCrop=o.crop;var d=g.getData().big,e=g._controls.getActive().image;!g.getData().iframe&&e&&d&&d==e.src&&c.setTimeout(function(a){return function(){e.src=a}}(g.getData().image),1),g.rescale(function(){g.addTimer(!1,function(){b&&F.show(g.getActiveImage()),typeof a=="function"&&a.call(g),f.trigger("resize")},50),g.trigger(Galleria.FULLSCREEN_EXIT)}),f.unbind("resize",o.scale)}},s=this._idle={trunk:[],bound:!1,active:!1,add:function(b,c,d,e){if(!b)return;s.bound||s.addEvent(),b=a(b),typeof d=="boolean"&&(e=d,d={}),d=d||{};var f={},g;for(g in c)c.hasOwnProperty(g)&&(f[g]=b.css(g));b.data("idle",{from:a.extend(f,d),to:c,complete:!0,busy:!1}),e?b.css(c):s.addTimer(),s.trunk.push(b)},remove:function(b){b=a(b),a.each(s.trunk,function(a,c){c&&c.length&&!c.not(b).length&&(b.css(b.data("idle").from),s.trunk.splice(a,1))}),s.trunk.length||(s.removeEvent(),g.clearTimer(s.timer))},addEvent:function(){s.bound=!0,g.$("container").bind("mousemove click",s.showAll),g._options.idleMode=="hover"&&g.$("container").bind("mouseleave",s.hide)},removeEvent:function(){s.bound=!1,g.$("container").bind("mousemove click",s.showAll),g._options.idleMode=="hover"&&g.$("container").unbind("mouseleave",s.hide)},addTimer:function(){if(g._options.idleMode=="hover")return;g.addTimer("idle",function(){s.hide()},g._options.idleTime)},hide:function(){if(!g._options.idleMode||g.getIndex()===!1||g.getData().iframe)return;g.trigger(Galleria.IDLE_ENTER);var b=s.trunk.length;a.each(s.trunk,function(a,c){var d=c.data("idle");if(!d)return;c.data("idle").complete=!1,F.animate(c,d.to,{duration:g._options.idleSpeed,complete:function(){a==b-1&&(s.active=!1)}})})},showAll:function(){g.clearTimer("idle"),a.each(s.trunk,function(a,b){s.show(b)})},show:function(b){var c=b.data("idle");if(!s.active||!c.busy&&!c.complete)c.busy=!0,g.trigger(Galleria.IDLE_EXIT),g.clearTimer("idle"),F.animate(b,c.from,{duration:g._options.idleSpeed/2,complete:function(){s.active=!0,a(b).data("idle").busy=!1,a(b).data("idle").complete=!0}});s.addTimer()}},t=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){g.trigger(Galleria.LIGHTBOX_OPEN);if(t.initialized)return;t.initialized=!0;var b="overlay box content shadow title info close prevholder prev nextholder next counter image",c={},d=g._options,e="",f="position:absolute;",h="lightbox-",i={overlay:"position:fixed;display:none;opacity:"+d.overlayOpacity+";filter:alpha(opacity="+d.overlayOpacity*100+");top:0;left:0;width:100%;height:100%;background:"+d.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:f+"background:#000;width:100%;height:100%;",content:f+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:f+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:f+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:f+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:f+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:f+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:f+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:f+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},j=function(b){return b.hover(function(){a(this).css("color","#bbb")},function(){a(this).css("color","#444")})},k={};p&&p>7&&(i.nextholder+="background:#000;filter:alpha(opacity=0);",i.prevholder+="background:#000;filter:alpha(opacity=0);"),a.each(i,function(a,b){e+=".galleria-"+h+a+"{"+b+"}"}),e+=".galleria-"+h+"box.iframe .galleria-"+h+"prevholder,"+".galleria-"+h+"box.iframe .galleria-"+h+"nextholder{"+"width:100px;height:100px;top:50%;margin-top:-70px}",F.insertStyleTag(e,"galleria-lightbox"),a.each(b.split(" "),function(a,b){g.addElement("lightbox-"+b),c[b]=t.elems[b]=g.get("lightbox-"+b)}),t.image=new Galleria.Picture,a.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(b,c){var d=[];a.each(c.split(" "),function(a,b){d.push(h+b)}),k[h+b]=d}),g.append(k),a(c.image).append(t.image.container),a(q().body).append(c.overlay,c.box),F.optimizeTouch(c.box),j(a(c.close).bind("click",t.hide).html("&#215;")),a.each(["Prev","Next"],function(b,d){var e=a(c[d.toLowerCase()]).html(/v/.test(d)?"&#8249;&#160;":"&#160;&#8250;"),f=a(c[d.toLowerCase()+"holder"]);f.bind("click",function(){t["show"+d]()});if(p<8||Galleria.TOUCH){e.show();return}f.hover(function(){e.show()},function(a){e.stop().fadeOut(200)})}),a(c.overlay).bind("click",t.hide),Galleria.IPAD&&(g._options.lightboxTransitionSpeed=0)},rescale:function(b){var c=Math.min(f.width()-40,t.width),d=Math.min(f.height()-60,t.height),e=Math.min(c/t.width,d/t.height),h=Math.round(t.width*e)+40,i=Math.round(t.height*e)+60,j={width:h,height:i,"margin-top":Math.ceil(i/2)*-1,"margin-left":Math.ceil(h/2)*-1};b?a(t.elems.box).css(j):a(t.elems.box).animate(j,{duration:g._options.lightboxTransitionSpeed,easing:g._options.easing,complete:function(){var b=t.image,c=g._options.lightboxFadeSpeed;g.trigger({type:Galleria.LIGHTBOX_IMAGE,imageTarget:b.image}),a(b.container).show(),a(b.image).animate({opacity:1},c),F.show(t.elems.info,c)}})},hide:function(){t.image.image=null,f.unbind("resize",t.rescale),a(t.elems.box).hide(),F.hide(t.elems.info),g.detachKeyboard(),g.attachKeyboard(t.keymap),t.keymap=!1,F.hide(t.elems.overlay,200,function(){a(this).hide().css("opacity",g._options.overlayOpacity),g.trigger(Galleria.LIGHTBOX_CLOSE)})},showNext:function(){t.show(g.getNext(t.active))},showPrev:function(){t.show(g.getPrev(t.active))},show:function(b){t.active=b=typeof b=="number"?b:g.getIndex()||0,t.initialized||t.init(),t.keymap||(t.keymap=a.extend({},g._keyboard.map),g.attachKeyboard({escape:t.hide,right:t.showNext,left:t.showPrev})),f.unbind("resize",t.rescale);var d=g.getData(b),e=g.getDataLength(),h=g.getNext(b),i,j,k;F.hide(t.elems.info);try{for(k=g._options.preload;k>0;k--)j=new Galleria.Picture,i=g.getData(h),j.preload("big"in i?i.big:i.image),h=g.getNext(h)}catch(l){}t.image.isIframe=!!d.iframe,a(t.elems.box).toggleClass("iframe",!!d.iframe),t.image.load(d.iframe||d.big||d.image,function(h){if(h.isIframe){var i=a(c).width(),j=a(c).height();if(g._options.maxVideoSize){var k=Math.min(g._options.maxVideoSize/i,g._options.maxVideoSize/j);k<1&&(i*=k,j*=k)}t.width=i,t.height=j}else t.width=h.original.width,t.height=h.original.height;a(h.image).css({width:h.isIframe?"100%":"100.1%",height:h.isIframe?"100%":"100.1%",top:0,zIndex:99998,opacity:0,visibility:"visible"}),t.elems.title.innerHTML=d.title||"",t.elems.counter.innerHTML=b+1+" / "+e,f.resize(t.rescale),t.rescale()}),a(t.elems.overlay).show().css("visibility","visible"),a(t.elems.box).show()}},u=this._timer={trunk:{},add:function(a,b,d,e){a=a||(new Date).getTime(),e=e||!1,this.clear(a);if(e){var f=b;b=function(){f(),u.add(a,b,d)}}this.trunk[a]=c.setTimeout(b,d)},clear:function(a){var b=function(a){c.clearTimeout(this.trunk[a]),delete this.trunk[a]},d;if(!!a&&a in this.trunk)b.call(this,a);else if(typeof a=="undefined")for(d in this.trunk)this.trunk.hasOwnProperty(d)&&b.call(this,d)}};return this},Galleria.prototype={constructor:Galleria,init:function(c,d){var e=this;d=u(d),this._original={target:c,options:d,data:null},this._target=this._dom.target=c.nodeName?c:a(c).get(0),this._original.html=this._target.innerHTML,A.push(this);if(!this._target){Galleria.raise("Target not found",!0);return}return this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(a){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:b,dummy:b,easing:"galleria",extend:function(a){},fullscreenCrop:b,fullscreenDoubleTap:!0,fullscreenTransition:b,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:b,initialTransition:b,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:b,maxVideoSize:b,minScaleRatio:b,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:!0,thumbCrop:!0,thumbEventType:"click",thumbFit:!0,thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbnails:!0,touchTransition:b,transition:"fade",transitionInitial:b,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,d&&d.debug===!1&&(i=!1),d&&typeof d.imageTimeout=="number"&&(j=d.imageTimeout),d&&typeof d.dummy=="string"&&(k=d.dummy),a(this._target).children().hide(),Galleria.QUIRK&&Galleria.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),typeof Galleria.theme=="object"?this._init():D.push(this),this},_init:function(){var b=this,e=this._options;if(this._initialized)return Galleria.raise("Init failed: Gallery instance already initialized."),this;this._initialized=!0;if(!Galleria.theme)return Galleria.raise("Init failed: No theme found.",!0),this;a.extend(!0,e,Galleria.theme.defaults,this._original.options,Galleria.configure.options),function(a){if(!("getContext"in a)){a=null;return}C=C||{elem:a,context:a.getContext("2d"),cache:{},length:0}}(d.createElement("canvas")),this.bind(Galleria.DATA,function(){this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var a=this.$("container");b._options.height<2&&(b._userRatio=b._ratio=b._options.height);var d={width:0,height:0},e=function(){return b.$("stage").height()};F.wait({until:function(){return d=b._getWH(),a.width(d.width).height(d.height),e()&&d.width&&d.height>50},success:function(){b._width=d.width,b._height=d.height,b._ratio=b._ratio||d.height/d.width,Galleria.WEBKIT?c.setTimeout(function(){b._run()},1):b._run()},error:function(){e()?Galleria.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+d.width+"px, height: "+d.height+"px.",!0):Galleria.raise("Could not extract a stage height from the CSS. Traced height: "+e()+"px.",!0)},timeout:typeof this._options.wait=="number"?this._options.wait:!1})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),F.hide(this.$("counter").append(this.get("current"),d.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),F.hide(b.get("tooltip")),this.$("container").addClass(Galleria.TOUCH?"touch":"notouch"),a.each(new Array(2),function(c){var d=new Galleria.Picture;a(d.container).css({position:"absolute",top:0,left:0}).prepend(b._layers[c]=a(F.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),b.$("images").append(d.container),b._controls[c]=d}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").bind("click",function(a){e.clicknext&&a.stopPropagation(),e.pauseOnInteraction&&b.pause();var c=/right/.test(this.className)?"next":"prev";b[c]()}),a.each(["info","counter","image-nav"],function(a,c){e["show"+c.substr(0,1).toUpperCase()+c.substr(1).replace(/-/,"")]===!1&&F.moveOut(b.get(c.toLowerCase()))}),this.load(),!e.keepSource&&!p&&(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container");if(e.carousel){var g=0,h=e.show;this.bind(Galleria.THUMBNAIL,function(){this.updateCarousel(),++g==this.getDataLength()&&typeof h=="number"&&h>0&&this._carousel.follow(h)})}return e.responsive&&f.bind("resize",function(){b.isFullscreen()||b.resize()}),e.swipe&&(function(a){var c=[0,0],d=[0,0],e=30,f=100,g=!1,h=0,i,j={start:"touchstart"
,move:"touchmove",stop:"touchend"},k=function(a){return a.originalEvent.touches?a.originalEvent.touches[0]:a},l=function(a){if(a.originalEvent.touches&&a.originalEvent.touches.length>1)return;i=k(a),d=[i.pageX,i.pageY],c[0]||(c=d),Math.abs(c[0]-d[0])>10&&a.preventDefault()},m=function(i){a.unbind(j.move,l);if(i.originalEvent.touches&&i.originalEvent.touches.length||g){g=!g;return}F.timestamp()-h<1e3&&Math.abs(c[0]-d[0])>e&&Math.abs(c[1]-d[1])<f&&(i.preventDefault(),b[c[0]>d[0]?"next":"prev"]()),c=d=[0,0]};a.bind(j.start,function(b){if(b.originalEvent.touches&&b.originalEvent.touches.length>1)return;i=k(b),h=F.timestamp(),c=d=[i.pageX,i.pageY],a.bind(j.move,l).one(j.stop,m)})}(b.$("images")),e.fullscreenDoubleTap&&this.$("stage").bind("touchstart",function(){var a,c,d,e,f,g,h=function(a){return a.originalEvent.touches?a.originalEvent.touches[0]:a};return function(i){g=Galleria.utils.timestamp(),c=h(i).pageX,d=h(i).pageY;if(g-a<500&&c-e<20&&d-f<20){b.toggleFullscreen(),i.preventDefault(),b.$("stage").unbind("touchend",arguments.callee);return}a=g,e=c,f=d}}())),F.optimizeTouch(this.get("container")),a.each(Galleria.on.binds,function(c,d){a.inArray(d.hash,b._binds)==-1&&b.bind(d.type,d.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,F.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,F.array(arguments)),this},_getWH:function(){var b=this.$("container"),c=this.$("target"),d=this,e={},f;return a.each(["width","height"],function(a,g){d._options[g]&&typeof d._options[g]=="number"?e[g]=d._options[g]:(f=[F.parseValue(b.css(g)),F.parseValue(c.css(g)),b[g](),c[g]()],d["_"+g]||f.splice(f.length,F.parseValue(b.css("min-"+g)),F.parseValue(c.css("min-"+g))),e[g]=Math.max.apply(Math,f))}),d._userRatio&&(e.height=e.width*d._userRatio),e},_createThumbnails:function(b){this.get("total").innerHTML=this.getDataLength();var e,f,g,h,i,j=this,k=this._options,l=b?this._data.length-b.length:0,m=l,n=[],o=0,q=p<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",r=function(){var a=j.$("thumbnails").find(".active");return a.length?a.find("img").attr("src"):!1}(),s=typeof k.thumbnails=="string"?k.thumbnails.toLowerCase():null,t=function(a){return d.defaultView&&d.defaultView.getComputedStyle?d.defaultView.getComputedStyle(f.container,null)[a]:i.css(a)},u=function(b,c,d){return function(){a(d).append(b),j.trigger({type:Galleria.THUMBNAIL,thumbTarget:b,index:c,galleriaData:j.getData(c)})}},v=function(b){k.pauseOnInteraction&&j.pause();var c=a(b.currentTarget).data("index");j.getIndex()!==c&&j.show(c),b.preventDefault()},x=function(b,c){a(b.container).css("visibility","visible"),j.trigger({type:Galleria.THUMBNAIL,thumbTarget:b.image,index:b.data.order,galleriaData:j.getData(b.data.order)}),typeof c=="function"&&c.call(j,b)},y=function(b,c){b.scale({width:b.data.width,height:b.data.height,crop:k.thumbCrop,margin:k.thumbMargin,canvas:k.useCanvas,complete:function(b){var d=["left","top"],e=["Width","Height"],f,g,h=j.getData(b.index),i=h.thumb.split(":");a.each(e,function(c,e){f=e.toLowerCase(),(k.thumbCrop!==!0||k.thumbCrop===f)&&k.thumbFit&&(g={},g[f]=b[f],a(b.container).css(g),g={},g[d[c]]=0,a(b.image).css(g)),b["outer"+e]=a(b.container)["outer"+e](!0)}),F.toggleQuality(b.image,k.thumbQuality===!0||k.thumbQuality==="auto"&&b.original.width<b.width*3),h.iframe&&i.length==2&&i[0]in w?w[i[0]].getThumb(i[1],function(a){return function(d){a.src=d,x(b,c)}}(b.image)):k.thumbDisplayOrder&&!b.lazy?a.each(n,function(a,b){if(a===o&&b.ready&&!b.displayed){o++,b.displayed=!0,x(b,c);return}}):x(b,c)}})};b||(this._thumbnails=[],this.$("thumbnails").empty());for(;this._data[l];l++)g=this._data[l],e=g.thumb||g.image,k.thumbnails!==!0&&s!="lazy"||!g.thumb&&!g.image?g.iframe||s==="empty"||s==="numbers"?(f={container:F.create("galleria-image"),image:F.create("img","span"),ready:!0},s==="numbers"&&a(f.image).text(l+1),g.iframe&&a(f.image).addClass("iframe"),this.$("thumbnails").append(f.container),c.setTimeout(u(f.image,l,f.container),50+l*20)):f={container:null,image:null}:(f=new Galleria.Picture(l),f.index=l,f.displayed=!1,f.lazy=!1,f.video=!1,this.$("thumbnails").append(f.container),i=a(f.container),i.css("visibility","hidden"),f.data={width:F.parseValue(t("width")),height:F.parseValue(t("height")),order:l,src:e},k.thumbFit&&k.thumbCrop!==!0?i.css({width:"auto",height:"auto"}):i.css({width:f.data.width,height:f.data.height}),h=e.split(":"),h.length==2&&h[0]in w?(f.video=!0,f.ready=!0,f.load(q,{height:f.data.height,width:f.data.height*1.25},y)):s=="lazy"?(i.addClass("lazy"),f.lazy=!0,f.load(q,{height:f.data.height,width:f.data.width})):f.load(e,y),k.preload==="all"&&f.preload(g.image)),a(f.container).add(k.keepSource&&k.linkSourceImages?g.original:null).data("index",l).bind(k.thumbEventType,v).data("thumbload",y),r===e&&a(f.container).addClass("active"),this._thumbnails.push(f);return n=this._thumbnails.slice(m),this},lazyLoad:function(b,c){var d=b.constructor==Array?b:[b],e=this,f=this.$("thumbnails").children().filter(function(){return a(this).data("lazy-src")}),g=0;return a.each(d,function(b,f){if(f>e._thumbnails.length-1)return;var h=e._thumbnails[f],i=h.data,j=i.src.split(":"),k=function(){++g==d.length&&typeof c=="function"&&c.call(e)},l=a(h.container).data("thumbload");h.video?l.call(e,h,k):h.load(i.src,function(a){l.call(e,a,k)})}),this},lazyLoadChunks:function(a,b){var d=this.getDataLength(),e=0,f=0,g=[],h=[],i=this;b=b||0;for(;e<d;e++){h.push(e);if(++f==a||e==d-1)g.push(h),f=0,h=[]}var j=function(a){var d=g.shift();d&&c.setTimeout(function(){i.lazyLoad(d,function(){j(!0)})},b&&a?b:0)};return j(!1),this},_run:function(){var d=this;d._createThumbnails(),F.wait({timeout:1e4,until:function(){return Galleria.OPERA&&d.$("stage").css("display","inline-block"),d._stageWidth=d.$("stage").width(),d._stageHeight=d.$("stage").height(),d._stageWidth&&d._stageHeight>50},success:function(){z.push(d),F.show(d.get("counter")),d._options.carousel&&d._carousel.bindControls(),d._options.autoplay&&(d.pause(),typeof d._options.autoplay=="number"&&(d._playtime=d._options.autoplay),d._playing=!0);if(d._firstrun){d._options.autoplay&&d.trigger(Galleria.PLAY),typeof d._options.show=="number"&&d.show(d._options.show);return}d._firstrun=!0,Galleria.History&&Galleria.History.change(function(a){isNaN(a)?c.history.go(-1):d.show(a,b,!0)}),d.trigger(Galleria.READY),Galleria.theme.init.call(d,d._options),a.each(Galleria.ready.callbacks,function(a,b){typeof b=="function"&&b.call(d,d._options)}),d._options.extend.call(d,d._options),/^[0-9]{1,4}$/.test(m)&&Galleria.History?d.show(m,b,!0):d._data[d._options.show]&&d.show(d._options.show),d._options.autoplay&&d.trigger(Galleria.PLAY)},error:function(){Galleria.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+d._stageWidth+"px, height: "+d._stageHeight+"px.",!0)}})},load:function(b,c,d){var e=this,f=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),typeof c=="function"&&(d=c,c=null),b=b||f.dataSource,c=c||f.dataSelector,d=d||f.dataConfig,/^function Object/.test(b.constructor)&&(b=[b]),b.constructor===Array?this.validate(b)?this._data=b:Galleria.raise("Load failed: JSON Array not valid."):(c+=",.video,.iframe",a(b).find(c).each(function(b,c){c=a(c);var f={},g=c.parent(),h=g.attr("href"),i=g.attr("rel");h&&(c[0].nodeName=="IMG"||c.hasClass("video"))&&x(h)?f.video=h:h&&c.hasClass("iframe")?f.iframe=h:f.image=f.big=h,i&&(f.big=i),a.each("big title description link layer".split(" "),function(a,b){c.data(b)&&(f[b]=c.data(b))}),e._data.push(a.extend({title:c.attr("title")||"",thumb:c.attr("src"),image:c.attr("src"),big:c.attr("src"),description:c.attr("alt")||"",link:c.attr("longdesc"),original:c.get(0)},f,d(c)))})),typeof f.dataSort=="function"?g.sort.call(this._data,f.dataSort):f.dataSort=="random"&&this._data.sort(function(){return Math.round(Math.random())-.5}),this.getDataLength()&&this._parseData().trigger(Galleria.DATA),this},_parseData:function(){var b=this,c;return a.each(this._data,function(d,e){c=b._data[d],"thumb"in e==0&&(c.thumb=e.image),!1 in e&&(c.big=e.image);if("video"in e){var f=x(e.video);if(f){c.iframe=w[f.provider].embed(f.id)+function(){if(typeof b._options[f.provider]=="object"){var c="?",d=[];return a.each(b._options[f.provider],function(a,b){d.push(a+"="+b)}),f.provider=="youtube"&&(d=["wmode=opaque"].concat(d)),c+d.join("&")}return""}(),delete c.video;if(!("thumb"in c)||!c.thumb)c.thumb=f.provider+":"+f.id}}}),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").unbind("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),F.removeFromArray(A,this),F.removeFromArray(z,this),this},splice:function(){var a=this,b=F.array(arguments);return c.setTimeout(function(){g.splice.apply(a._data,b),a._parseData()._createThumbnails()},2),a},push:function(){var a=this,b=F.array(arguments);return b.length==1&&b[0].constructor==Array&&(b=b[0]),c.setTimeout(function(){g.push.apply(a._data,b),a._parseData()._createThumbnails(b)},2),a},_getActive:function(){return this._controls.getActive()},validate:function(a){return!0},bind:function(a,b){return a=v(a),this.$("container").bind(a,this.proxy(b)),this},unbind:function(a){return a=v(a),this.$("container").unbind(a),this},trigger:function(b){return b=typeof b=="object"?a.extend(b,{scope:this}):{type:v(b),scope:this},this.$("container").trigger(b),this},addIdleState:function(a,b,c,d){return this._idle.add.apply(this._idle,F.array(arguments)),this},removeIdleState:function(a){return this._idle.remove.apply(this._idle,F.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(a){return this._fullscreen.enter.apply(this,F.array(arguments)),this},exitFullscreen:function(a){return this._fullscreen.exit.apply(this,F.array(arguments)),this},toggleFullscreen:function(a){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,F.array(arguments)),this},bindTooltip:function(a,b){return this._tooltip.bind.apply(this._tooltip,F.array(arguments)),this},defineTooltip:function(a,b){return this._tooltip.define.apply(this._tooltip,F.array(arguments)),this},refreshTooltip:function(a){return this._tooltip.show.apply(this._tooltip,F.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,F.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,F.array(arguments)),this},getActiveImage:function(){return this._getActive().image||b},getActiveThumb:function(){return this._thumbnails[this._active].image||b},getMousePosition:function(a){return{x:a.pageX-this.$("container").offset().left,y:a.pageY-this.$("container").offset().top}},addPan:function(b){if(this._options.imageCrop===!1)return;b=a(b||this.getActiveImage());var c=this,d=b.width()/2,e=b.height()/2,f=parseInt(b.css("left"),10),g=parseInt(b.css("top"),10),h=f||0,i=g||0,j=0,k=0,l=!1,m=F.timestamp(),n=0,o=0,q=function(a,c,d){if(a>0){o=Math.round(Math.max(a*-1,Math.min(0,c)));if(n!==o){n=o;if(p===8)b.parent()["scroll"+d](o*-1);else{var e={};e[d.toLowerCase()]=o,b.css(e)}}}},r=function(a){if(F.timestamp()-m<50)return;l=!0,d=c.getMousePosition(a).x,e=c.getMousePosition(a).y},s=function(a){if(!l)return;j=b.width()-c._stageWidth,k=b.height()-c._stageHeight,f=d/c._stageWidth*j*-1,g=e/c._stageHeight*k*-1,h+=(f-h)/c._options.imagePanSmoothness,i+=(g-i)/c._options.imagePanSmoothness,q(k,i,"Top"),q(j,h,"Left")};return p===8&&(b.parent().scrollTop(i*-1).scrollLeft(h*-1),b.css({top:0,left:0})),this.$("stage").unbind("mousemove",r).bind("mousemove",r),this.addTimer("pan"+c._id,s,50,!0),this},proxy:function(a,b){return typeof a!="function"?n:(b=b||this,function(){return a.apply(b,F.array(arguments))})},removePan:function(){return this.$("stage").unbind("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(b){var c=this._dom;return a.each(F.array(arguments),function(a,b){c[b]=F.create("galleria-"+b)}),this},attachKeyboard:function(a){return this._keyboard.attach.apply(this._keyboard,F.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,F.array(arguments)),this},appendChild:function(a,b){return this.$(a).append(this.get(b)||b),this},prependChild:function(a,b){return this.$(a).prepend(this.get(b)||b),this},remove:function(a){return this.$(F.array(arguments).join(",")).remove(),this},append:function(a){var b,c;for(b in a)if(a.hasOwnProperty(b))if(a[b].constructor===Array)for(c=0;a[b][c];c++)this.appendChild(b,a[b][c]);else this.appendChild(b,a[b]);return this},_scaleImage:function(b,c){b=b||this._controls.getActive();if(!b)return;var d=this,e,f=function(b){a(b.container).children(":first").css({top:Math.max(0,F.parseValue(b.image.style.top)),left:Math.max(0,F.parseValue(b.image.style.left)),width:F.parseValue(b.image.width),height:F.parseValue(b.image.height)})};return c=a.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},c),this._options.layerFollow&&this._options.imageCrop!==!0?typeof c.complete=="function"?(e=c.complete,c.complete=function(){e.call(b,b),f(b)}):c.complete=f:a(b.container).children(":first").css({top:0,left:0}),b.scale(c),this},updateCarousel:function(){return this._carousel.update(),this},resize:function(c,d){typeof c=="function"&&(d=c,c=b),c=a.extend({width:0,height:0},c);var e=this,f=this.$("container");return a.each(c,function(a,b){b||(f[a]("auto"),c[a]=e._getWH()[a])}),a.each(c,function(a,b){f[a](b)}),this.rescale(d)},rescale:function(a,c,d){var e=this;typeof a=="function"&&(d=a,a=b);var f=function(){e._stageWidth=a||e.$("stage").width(),e._stageHeight=c||e.$("stage").height(),e._scaleImage(),e._options.carousel&&e.updateCarousel(),e.trigger(Galleria.RESCALE),typeof d=="function"&&d.call(e)};return f.call(e),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},show:function(a,b,c){if(this._queue.length>3||a===!1||!this._options.queue&&this._queue.stalled)return;a=Math.max(0,Math.min(parseInt(a,10),this.getDataLength()-1)),b=typeof b!="undefined"?!!b:a<this.getIndex(),c=c||!1;if(!c&&Galleria.History){Galleria.History.set(a.toString());return}return this._active=a,g.push.call(this._queue,{index:a,rewind:b}),this._queue.stalled||this._show(),this},_show:function(){var d=this,e=this._queue[0],f=this.getData(e.index);if(!f)return;var h=f.iframe||(this.isFullscreen()&&"big"in f?f.big:f.image),i=this._controls.getActive(),j=this._controls.getNext(),k=j.isCached(h),l=this._thumbnails[e.index],m=function(){a(j.image).trigger("mouseup")},n=function(b,e,f,h,i){return function(){var j;G.active=!1,F.toggleQuality(e.image,d._options.imageQuality),d._layers[d._controls.active].innerHTML="",a(f.container).css({zIndex:0,opacity:0}).show(),f.isIframe&&a(f.container).find("iframe").remove(),d.$("container").toggleClass("iframe",!!b.iframe),a(e.container).css({zIndex:1,left:0,top:0}).show(),d._controls.swap(),d._options.imagePan&&d.addPan(e.image),(b.link||d._options.lightbox||d._options.clicknext)&&a(e.image).css({cursor:"pointer"}).bind("mouseup",function(a){if(typeof a.which=="number"&&a.which>1)return;if(d._options.clicknext&&!Galleria.TOUCH){d._options.pauseOnInteraction&&d.pause(),d.next();return}if(b.link){d._options.popupLinks?j=c.open(b.link,"_blank"):c.location.href=b.link;return}d._options.lightbox&&d.openLightbox()}),d._playCheck(),d.trigger({type:Galleria.IMAGE,index:h.index,imageTarget:e.image,thumbTarget:i.image,galleriaData:b}),g.shift.call(d._queue),d._queue.stalled=!1,d._queue.length&&d._show()}}(f,j,i,e,l);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(e.index);if(this._options.preload){var o,p,q=this.getNext(),r;try{for(p=this._options.preload;p>0;p--)o=new Galleria.Picture,r=d.getData(q),o.preload(this.isFullscreen()&&"big"in r?r.big:r.image),q=d.getNext(q)}catch(s){}}F.show(j.container),j.isIframe=!!f.iframe,a(d._thumbnails[e.index].container).addClass("active").siblings(".active").removeClass("active"),d.trigger({type:Galleria.LOADSTART,cached:k,index:e.index,rewind:e.rewind,imageTarget:j.image,thumbTarget:l.image,galleriaData:f}),d._queue.stalled=!0,j.load(h,function(c){var g=a(d._layers[1-d._controls.active]).html(f.layer||"").hide();d._scaleImage(c,{complete:function(c){"image"in i&&F.toggleQuality(i.image,!1),F.toggleQuality(c.image,!1),d.removePan(),d.setInfo(e.index),d.setCounter(e.index),f.layer&&(g.show(),(f.link||d._options.lightbox||d._options.clicknext)&&g.css("cursor","pointer").unbind("mouseup").mouseup(m));var h=d._options.transition;a.each({initial:i.image===null,touch:Galleria.TOUCH,fullscreen:d.isFullscreen()},function(a,c){if(c&&d._options[a+"Transition"]!==b)return h=d._options[a+"Transition"],!1});if(h in G.effects==0)n();else{var j={prev:i.container,next:c.container,rewind:e.rewind,speed:d._options.transitionSpeed||400};G.active=!0,G.init.call(d,h,j,n)}d.trigger({type:Galleria.LOADFINISH,cached:k,index:e.index,rewind:e.rewind,imageTarget:c.image,thumbTarget:d._thumbnails[e.index].image,galleriaData:d.getData(e.index)})}})})},getNext:function(a){return a=typeof a=="number"?a:this.getIndex(),a===this.getDataLength()-1?0:a+1},getPrev:function(a){return a=typeof a=="number"?a:this.getIndex(),a===0?this.getDataLength()-1:a-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(a){return a in this._dom?this._dom[a]:null},getData:function(a){return a in this._data?this._data[a]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active=="number"?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(a){return typeof a=="undefined"?this._options:this._options[a]},setOptions:function(b,c){return typeof b=="object"?a.extend(this._options,b):this._options[b]=c,this},play:function(a){return this._playing=!0,this._playtime=a||this._playtime,this._playCheck(),this.trigger(Galleria.PLAY),this},pause:function(){return this._playing=!1,this.trigger(Galleria.PAUSE),this},playToggle:function(a){return this._playing?this.pause():this.play(a)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var a=this,b=0,c=20,d=F.timestamp(),e="play"+this._id;if(this._playing){this.clearTimer(e);var f=function(){b=F.timestamp()-d;if(b>=a._playtime&&a._playing){a.clearTimer(e),a.next();return}a._playing&&(a.trigger({type:Galleria.PROGRESS,percent:Math.ceil(b/a._playtime*100),seconds:Math.floor(b/1e3),milliseconds:b}),a.addTimer(e,f,c))};a.addTimer(e,f,c)}},setPlaytime:function(a){return this._playtime=a,this},setIndex:function(a){return this._active=a,this},setCounter:function(a){typeof a=="number"?a++:typeof a=="undefined"&&(a=this.getIndex()+1),this.get("current").innerHTML=a;if(p){var b=this.$("counter"),c=b.css("opacity");parseInt(c,10)===1?F.removeAlpha(b[0]):this.$("counter").css("opacity",c)}return this},setInfo:function(b){var c=this,d=this.getData(b);return a.each(["title","description"],function(a,b){var e=c.$("info-"+b);d[b]?e[d[b].length?"show":"hide"]().html(d[b]):e.empty().hide()}),this},hasInfo:function(a){var b="title description".split(" "),c;for(c=0;b[c];c++)if(!!this.getData(a)[b[c]])return!0;return!1},jQuery:function(b){var c=this,d=[];a.each(b.split(","),function(b,e){e=a.trim(e),c.get(e)&&d.push(e)});var e=a(c.get(d.shift()));return a.each(d,function(a,b){e=e.add(c.get(b))}),e},$:function(a){return this.jQuery.apply(this,F.array(arguments))}},a.each(t,function(a,b){var c=/_/.test(b)?b.replace(/_/g,""):b;Galleria[b.toUpperCase()]="galleria."+c}),a.extend(Galleria,{IE9:p===9,IE8:p===8,IE7:p===7,IE6:p===6,IE:p,WEBKIT:/webkit/.test(l),CHROME:/chrome/.test(l),SAFARI:/safari/.test(l)&&!/chrome/.test(l),QUIRK:p&&d.compatMode&&d.compatMode==="BackCompat",MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!c.opera,IPHONE:/iphone/.test(l),IPAD:/ipad/.test(l),ANDROID:/android/.test(l),TOUCH:"ontouchstart"in d}),Galleria.addTheme=function(b){b.name||Galleria.raise("No theme name specified"),typeof b.defaults!="object"?b.defaults={}:b.defaults=u(b.defaults);var d=!1,e;return typeof b.css=="string"?(a("link").each(function(a,c){e=new RegExp(b.css);if(e.test(c.href))return d=!0,E(b),!1}),d||a("script").each(function(a,f){e=new RegExp("galleria\\."+b.name.toLowerCase()+"\\."),e.test(f.src)&&(d=f.src.replace(/[^\/]*$/,"")+b.css,c.setTimeout(function(){F.loadCSS(d,"galleria-theme",function(){E(b)})},1))}),d||Galleria.raise("No theme CSS loaded")):E(b),b},Galleria.loadTheme=function(b,d){if(a("script").filter(function(){return a(this).attr("src")==b}).length)return;var e=!1,f;return a(c).load(function(){e||(f=c.setTimeout(function(){!e&&!Galleria.theme&&Galleria.raise("Galleria had problems loading theme at "+b+". Please check theme path or load manually.",!0)},2e4))}),Galleria.unloadTheme(),F.loadScript(b,function(){e=!0,c.clearTimeout(f)}),Galleria},Galleria.unloadTheme=function(){return typeof Galleria.theme=="object"&&(a("script").each(function(b,c){(new RegExp("galleria\\."+Galleria.theme.name+"\\.")).test(c.src)&&a(c).remove()}),Galleria.theme=b),Galleria},Galleria.get=function(a){if(!!A[a])return A[a];if(typeof a!="number")return A;Galleria.raise("Gallery index "+a+" not found")},Galleria.configure=function(b,c){var d={};return typeof b=="string"&&c?(d[b]=c,b=d):a.extend(d,b),Galleria.configure.options=d,a.each(Galleria.get(),function(a,b){b.setOptions(d)}),Galleria},Galleria.configure.options={},Galleria.on=function(b,c){if(!b)return;c=c||n;var d=b+c.toString().replace(/\s/g,"")+F.timestamp();return a.each(Galleria.get(),function(a,e){e._binds.push(d),e.bind(b,c)}),Galleria.on.binds.push({type:b,callback:c,hash:d}),Galleria},Galleria.on.binds=[],Galleria.run=function(b,c){return a.isFunction(c)&&(c={extend:c}),a(b||"#galleria").galleria(c),Galleria},Galleria.addTransition=function(a,b){return G.effects[a]=b,Galleria},Galleria.utils=F,Galleria.log=function(){var b=F.array(arguments);if(!("console"in c&&"log"in c.console))return c.alert(b.join("<br>"));try{return c.console.log.apply(c.console,b)}catch(d){a.each(b,function(){c.console.log(this)})}},Galleria.ready=function(b){return typeof b!="function"?Galleria:(a.each(z,function(a,c){b.call(c,c._options)}),Galleria.ready.callbacks.push(b),Galleria)},Galleria.ready.callbacks=[],Galleria.raise=function(b,c){var d=c?"Fatal error":"Error",e=this,f={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},g=function(b){var e='<div style="padding:4px;margin:0 0 2px;background:#'+(c?"811":"222")+';">'+(c?"<strong>"+d+": </strong>":"")+b+"</div>";a.each(A,function(){var a=this.$("errors"),b=this.$("target");a.length||(b.css("position","relative"),a=this.addElement("errors").appendChild("target","errors").$("errors").css(f)),a.append(e)}),A.length||a("<div>").css(a.extend(f,{position:"fixed"})).append(e).appendTo(q().body)};if(i){g(b);if(c)throw new Error(d+": "+b)}else if(c){if(B)return;B=!0,c=!1,g("Gallery could not load.")}},Galleria.version=h,Galleria.requires=function(a,b){return b=b||"You need to upgrade Galleria to version "+a+" to use one or more components.",Galleria.version<a&&Galleria.raise(b,!0),Galleria},Galleria.Picture=function(b){this.id=b||null,this.image=null,this.container=F.create("galleria-image"),a(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},Galleria.Picture.prototype={cache:{},show:function(){F.show(this.image)},hide:function(){F.moveOut(this.image)},clear:function(){this.image=null},isCached:function(a){return!!this.cache[a]},preload:function(b){a(new Image).load(function(a,b){return function(){b[a]=a}}(b,this.cache)).attr("src",b)},load:function(b,d,e){typeof d=="function"&&(e=d,d=null);if(this.isIframe){var f="if"+(new Date).getTime();return this.image=a("<iframe>",{src:b,frameborder:0,id:f,allowfullscreen:!0,css:{visibility:"hidden"}})[0],a(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),a("#"+f).load(function(b,d){return function(){c.setTimeout(function(){a(b.image).css("visibility","visible"),typeof d=="function"&&d.call(b,b)},10)}}(this,e)),this.container}this.image=new Image,Galleria.IE8&&a(this.image).css("filter","inherit");var g=0,h=!1,i=!1,j=a(this.container),l=a(this.image),m=function(){h?k?a(this).attr("src",k):Galleria.raise("Image not found: "+b):(h=!0,c.setTimeout(function(a,b){return function(){a.attr("src",b+"?"+F.timestamp())}}(a(this),b),50))},n=function(b,e,f){return function(){var g=function(){a(this).unbind("load"),b.original=d||{height:this.height,width:this.width},b.container.appendChild(this),b.cache[f]=f,typeof e=="function"&&c.setTimeout(function(){e.call(b,b)},1)};!this.width||!this.height?c.setTimeout(function(b){return function(){b.width&&b.height?g.call(b):i?Galleria.raise("Could not extract width/height from image: "+b.src+". Traced measures: width:"+b.width+"px, height: "+b.height+"px."):(a(new Image).load(n).attr("src",b.src),i=!0)}}(this),2):g.call(this)}}(this,e,b);return j.find("iframe,img").remove(),l.css("display","block"),F.hide(this.image),a.each("minWidth minHeight maxWidth maxHeight".split(" "),function(a,b){l.css(b,/min/.test(b)?"0":"none")}),l.load(n).error(m).attr("src",b),this.container},scale:function(c){var d=this;c=a.extend({width:0,height:0,min:b,max:b,margin:0,complete:n,position:"center",crop:!1,canvas:!1,iframelimit:b},c);if(this.isIframe){var e=c.width,f=c.height,g,h;if(c.iframelimit){var i=Math.min(c.iframelimit/e,c.iframelimit/f);i<1?(g=e*i,h=f*i,a(this.image).css({top:f/2-h/2,left:e/2-g/2,position:"absolute"})):a(this.image).css({top:0,left:0})}a(this.image).width(g||e).height(h||f).removeAttr("width").removeAttr("height"),a(this.container).width(e).height(f),c.complete.call(d,d);try{this.image.contentWindow&&a(this.image.contentWindow).trigger("resize")}catch(j){}return this.container}if(!this.image)return this.container;var k,l,m=a(d.container),o;return F.wait({until:function(){return k=c.width||m.width()||F.parseValue(m.css("width")),l=c.height||m.height()||F.parseValue(m.css("height")),k&&l},success:function(){var b=(k-c.margin*2)/d.original.width,e=(l-c.margin*2)/d.original.height,f=Math.min(b,e),g=Math.max(b,e),h={"true":g,width:b,height:e,"false":f,landscape:d.original.width>d.original.height?g:f,portrait:d.original.width<d.original.height?g:f},i=h[c.crop.toString()],j="";c.max&&(i=Math.min(c.max,i)),c.min&&(i=Math.max(c.min,i)),a.each(["width","height"],function(b,c){a(d.image)[c](d[c]=d.image[c]=Math.round(d.original[c]*i))}),a(d.container).width(k).height(l),c.canvas&&C&&(C.elem.width=d.width,C.elem.height=d.height,j=d.image.src+":"+d.width+"x"+d.height,d.image.src=C.cache[j]||function(a){C.context.drawImage(d.image,0,0,d.original.width*i,d.original.height*i);try{return o=C.elem.toDataURL(),C.length+=o.length,C.cache[a]=o,o}catch(b){return d.image.src}}(j));var m={},n={},p=function(b,c,e){var f=0;if(/\%/.test(b)){var g=parseInt(b,10)/100,h=d.image[c]||a(d.image)[c]();f=Math.ceil(h*-1*g+e*g)}else f=F.parseValue(b);return f},q={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};a.each(c.position.toLowerCase().split(" "),function(a,b){b==="center"&&(b="50%"),m[a?"top":"left"]=b}),a.each(m,function(b,c){q.hasOwnProperty(c)&&a.extend(n,q[c])}),m=m.top?a.extend(m,n):n,m=a.extend({top:"50%",left:"50%"},m),a(d.image).css({position:"absolute",top:p(m.top,"height",l),left:p(m.left,"width",k)}),d.show(),d.ready=!0,c.complete.call(d,d)},error:function(){Galleria.raise("Could not scale image: "+d.image.src)},timeout:1e3}),this}},a.extend(a.easing,{galleria:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},galleriaIn:function(a,b,c,d,e){return d*(b/=e)*b+c},galleriaOut:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),a.fn.galleria=function(b){var c=this.selector;return a(this).length?this.each(function(){a.data(this,"galleria")&&(a.data(this,"galleria").destroy(),a(this).find("*").hide()),a.data(this,"galleria",(new Galleria).init(this,b))}):(a(function(){a(c).length?a(c).galleria(b):Galleria.utils.wait({until:function(){return a(c).length},success:function(){a(c).galleria(b)},error:function(){Galleria.raise('Init failed: Galleria could not find the element "'+c+'".')},timeout:5e3})}),this)}})(jQuery);

/*********************/
/****** 	galleria.classic.js	 ***********/
/*********************/
/**
 * Galleria Classic Theme 2012-08-08
 * http://galleria.io
 *
 * Licensed under the MIT license
 * https://raw.github.com/aino/galleria/master/LICENSE
 *
 */

(function($) {

/*global jQuery, Galleria */

Galleria.addTheme({
    name: 'classic',
    author: 'Galleria',
   /* css: '../css/excursion/galleria.classic.css',*/
    defaults: {
        transition: 'slide',
        thumbCrop:  'height',

        // set this to false if you want to show the caption all the time:
        _toggleInfo: true
    },
    init: function(options) {

        Galleria.requires(1.28, 'This version of Classic theme requires Galleria 1.2.8 or later');

        // add some elements
        this.addElement('info-link','info-close');
        this.append({
            'info' : ['info-link','info-close']
        });

        // cache some stuff
        var info = this.$('info-link,info-close,info-text'),
            touch = Galleria.TOUCH,
            click = touch ? 'touchstart' : 'click';

        // show loader & counter with opacity
        this.$('loader,counter').show().css('opacity', 0.4);

        // some stuff for non-touch browsers
        if (! touch ) {
            this.addIdleState( this.get('image-nav-left'), { left:-50 });
            this.addIdleState( this.get('image-nav-right'), { right:-50 });
            this.addIdleState( this.get('counter'), { opacity:0 });
        }

        // toggle info
        if ( options._toggleInfo === true ) {
            info.bind( click, function() {
                info.toggle();
            });
        } else {
            info.show();
            this.$('info-link, info-close').hide();
        }

        // bind some stuff
        this.bind('thumbnail', function(e) {

            if (! touch ) {
                // fade thumbnails
                $(e.thumbTarget).css('opacity', 0.6).parent().hover(function() {
                    $(this).not('.active').children().stop().fadeTo(100, 1);
                }, function() {
                    $(this).not('.active').children().stop().fadeTo(400, 0.6);
                });

                if ( e.index === this.getIndex() ) {
                    $(e.thumbTarget).css('opacity',1);
                }
            } else {
                $(e.thumbTarget).css('opacity', this.getIndex() ? 1 : 0.6);
            }
        });

        this.bind('loadstart', function(e) {
            if (!e.cached) {
                this.$('loader').show().fadeTo(200, 0.4);
            }

            this.$('info').toggle( this.hasInfo() );

            $(e.thumbTarget).css('opacity',1).parent().siblings().children().css('opacity', 0.6);
        });

        this.bind('loadfinish', function(e) {
            this.$('loader').fadeOut(200);
        });
    }
});

}(jQuery));


/*********************/
/****** 	highslide-with-gallery.packed.js	 ***********/
/*********************/
/** 
 * Name:    Highslide JS
 * Version: 5.0.0 (2016-05-24)
 * Config:  default +slideshow +positioning +transitions +viewport +thumbstrip +packed
 * Author:  Torstein Hønsi
 * Support: www.highslide.com/support
 * License: MIT
 */
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('q(!m){u m={18:{9D:\'9t\',9f:\'b6...\',9g:\'8o 1L b7\',9X:\'8o 1L bg 1L bx\',7p:\'bw 1L bl B (f)\',aR:\'bs by <i>8H 8I</i>\',aY:\'bm 1L bj 8H 8I bv\',8T:\'8C\',8U:\'8D\',8v:\'8E\',8z:\'8J\',8r:\'8J (br)\',bh:\'ba\',8P:\'8G\',8A:\'8G 1g (8B)\',8N:\'8F\',8M:\'8F 1g (8B)\',8S:\'8C (8l 11)\',8O:\'8D (8l 2W)\',8w:\'8E\',8u:\'1:1\',3n:\'b9 %1 b3 %2\',84:\'8o 1L 26 2I, c4 8L c5 1L 3g. c7 8l c0 K 1p 8L 31.\'},4u:\'L/c9/\',5P:\'bX.4J\',5h:\'bH.4J\',7h:54,8n:54,4s:15,9H:15,4n:15,9L:15,4H:bJ,91:0.75,9j:J,7A:5,3G:2,bL:3,59:1f,at:\'42 2W\',aq:1,a3:J,aF:\'bP://L.bQ/\',aE:\'c2\',8V:J,8e:[\'a\'],2X:[],aG:54,3P:0,7G:50,3K:\'2k\',76:\'2k\',8y:H,8x:H,7v:J,4S:8R,5l:8R,5y:J,1B:\'bN-bR\',a7:{2A:\'<Z 2s="L-2A"><7V>\'+\'<1R 2s="L-31">\'+\'<a 1Y="#" 1X="{m.18.8S}">\'+\'<23>{m.18.8T}</23></a>\'+\'</1R>\'+\'<1R 2s="L-3i">\'+\'<a 1Y="#" 1X="{m.18.8A}">\'+\'<23>{m.18.8P}</23></a>\'+\'</1R>\'+\'<1R 2s="L-2N">\'+\'<a 1Y="#" 1X="{m.18.8M}">\'+\'<23>{m.18.8N}</23></a>\'+\'</1R>\'+\'<1R 2s="L-1p">\'+\'<a 1Y="#" 1X="{m.18.8O}">\'+\'<23>{m.18.8U}</23></a>\'+\'</1R>\'+\'<1R 2s="L-3g">\'+\'<a 1Y="#" 1X="{m.18.8w}">\'+\'<23>{m.18.8v}</23></a>\'+\'</1R>\'+\'<1R 2s="L-19-2D">\'+\'<a 1Y="#" 1X="{m.18.7p}">\'+\'<23>{m.18.8u}</23></a>\'+\'</1R>\'+\'<1R 2s="L-26">\'+\'<a 1Y="#" 1X="{m.18.8r}" >\'+\'<23>{m.18.8z}</23></a>\'+\'</1R>\'+\'</7V></Z>\'},4O:[],7e:J,V:[],6Q:[\'5y\',\'36\',\'3K\',\'76\',\'8y\',\'8x\',\'1B\',\'3G\',\'bB\',\'bF\',\'bG\',\'8s\',\'bI\',\'bW\',\'ce\',\'8t\',\'aZ\',\'7v\',\'3D\',\'5b\',\'2X\',\'3P\',\'M\',\'1a\',\'7B\',\'4S\',\'5l\',\'6a\',\'73\',\'9i\',\'2t\',\'2r\',\'aS\',\'aD\',\'1G\'],1x:[],4R:0,7q:{x:[\'9G\',\'11\',\'3W\',\'2W\',\'9M\'],y:[\'51\',\'14\',\'8h\',\'42\',\'6H\']},6m:{},8t:{},8s:{},3v:[],5m:[],45:{},7I:{},5D:[],21:R.cd||8p((5w.6C.5H().2K(/.+(?:8Q|cc|ca|2m)[\\/: ]([\\d.]+)/)||[0,\'0\'])[1]),2m:(R.5r&&!1A.3r),4t:/cf/.1b(5w.6C),5O:/cg.+8Q:1\\.[0-8].+ci/.1b(5w.6C),$:z(1M){q(1M)D R.ch(1M)},2q:z(2o,3k){2o[2o.T]=3k},1c:z(9y,4m,3J,8b,9m){u C=R.1c(9y);q(4m)m.3a(C,4m);q(9m)m.W(C,{bZ:0,aL:\'1F\',74:0});q(3J)m.W(C,3J);q(8b)8b.2E(C);D C},3a:z(C,4m){K(u x 2Q 4m)C[x]=4m[x];D C},W:z(C,3J){K(u x 2Q 3J){q(m.44&&x==\'1n\'){q(3J[x]>0.99)C.G.c3(\'5A\');I C.G.5A=\'9o(1n=\'+(3J[x]*28)+\')\'}I C.G[x]=3J[x]}},2b:z(C,X,30){u 43,4A,49;q(1q 30!=\'61\'||30===H){u 2Z=9Q;30={3I:2Z[2],2r:2Z[3],6f:2Z[4]}}q(1q 30.3I!=\'3n\')30.3I=54;30.2r=1d[30.2r]||1d.93;30.5J=m.3a({},X);K(u 35 2Q X){u e=24 m.1E(C,30,35);43=8p(m.7U(C,35))||0;4A=8p(X[35]);49=35!=\'1n\'?\'F\':\'\';e.3F(43,4A,49)}},7U:z(C,X){q(C.G[X]){D C.G[X]}I q(R.6O){D R.6O.9P(C,H).9V(X)}I{q(X==\'1n\')X=\'5A\';u 3k=C.ck[X.2j(/\\-(\\w)/g,z(a,b){D b.92()})];q(X==\'5A\')3k=3k.2j(/9o\\(1n=([0-9]+)\\)/,z(a,b){D b/28});D 3k===\'\'?1:3k}},6D:z(){u d=R,w=1A,4T=d.6z&&d.6z!=\'7P\'?d.4k:d.3y,44=m.2m&&(m.21<9||1q 9l==\'1C\');u M=44?4T.8m:(d.4k.8m||5Z.bc),1a=44?4T.aK:5Z.bd;m.41={M:M,1a:1a,5d:44?4T.5d:9l,5u:44?4T.5u:b5};D m.41},6E:z(C){u p={x:C.4d,y:C.9h};4o(C.9k){C=C.9k;p.x+=C.4d;p.y+=C.9h;q(C!=R.3y&&C!=R.4k){p.x-=C.5d;p.y-=C.5u}}D p},2D:z(a,2S,3F,S){q(!a)a=m.1c(\'a\',H,{1u:\'1F\'},m.22);q(1q a.52==\'z\')D 2S;2d{24 m.56(a,2S,3F);D 1f}1W(e){D J}},a6:z(C,4G,U){u 1i=C.2J(4G);K(u i=0;i<1i.T;i++){q((24 5I(U)).1b(1i[i].U)){D 1i[i]}}D H},a9:z(s){s=s.2j(/\\s/g,\' \');u 1T=/{m\\.18\\.([^}]+)\\}/g,58=s.2K(1T),18;q(58)K(u i=0;i<58.T;i++){18=58[i].2j(1T,"$1");q(1q m.18[18]!=\'1C\')s=s.2j(58[i],m.18[18])}D s},9w:z(){u 7J=0,6y=-1,V=m.V,A,1r;K(u i=0;i<V.T;i++){A=V[i];q(A){1r=A.Q.G.1r;q(1r&&1r>7J){7J=1r;6y=i}}}q(6y==-1)m.3w=-1;I V[6y].4b()},4Z:z(a,55){a.52=a.2F;u p=a.52?a.52():H;a.52=H;D(p&&1q p[55]!=\'1C\')?p[55]:(1q m[55]!=\'1C\'?m[55]:H)},78:z(a){u 1G=m.4Z(a,\'1G\');q(1G)D 1G;D a.1Y},4N:z(1M){u 3x=m.$(1M),47=m.7I[1M],a={};q(!3x&&!47)D H;q(!47){47=3x.77(J);47.1M=\'\';m.7I[1M]=47;D 3x}I{D 47.77(J)}},3H:z(d){q(d)m.8j.2E(d);m.8j.2T=\'\'},1m:z(A){q(!m.2a){7E=J;m.2a=m.1c(\'Z\',{U:\'L-bp L-1Z-B\',4E:\'\',2F:z(){m.26()}},{1e:\'1D\',1n:0},m.22,J);q(/(bk|bi|bo|bn)/.1b(5w.6C)){u 3y=R.3y;z 7H(){m.W(m.2a,{M:3y.bq+\'F\',1a:3y.bu+\'F\'})}7H();m.1Q(1A,\'3O\',7H)}}m.2a.G.1u=\'\';u 7E=m.2a.4E==\'\';m.2a.4E+=\'|\'+A.P;q(7E){q(m.5O&&m.9q)m.W(m.2a,{9e:\'5W(\'+m.4u+\'b4.97)\',1n:1});I m.2b(m.2a,{1n:A.3P},m.7G)}},7Q:z(P){q(!m.2a)D;q(1q P!=\'1C\')m.2a.4E=m.2a.4E.2j(\'|\'+P,\'\');q((1q P!=\'1C\'&&m.2a.4E!=\'\')||(m.1U&&m.4Z(m.1U,\'3P\')))D;q(m.5O&&m.9q)m.2a.G.1u=\'1F\';I m.2b(m.2a,{1n:0},m.7G,H,z(){m.2a.G.1u=\'1F\'})},83:z(6i,A){u Y=A||m.2h();A=Y;q(m.1U)D 1f;I m.Y=Y;m.3U(R,1A.3r?\'5X\':\'5Y\',m.5t);2d{m.1U=6i;6i.2F()}1W(e){m.Y=m.1U=H}2d{q(!6i||A.2X[1]!=\'4i\')A.26()}1W(e){}D 1f},6g:z(C,1P){u A=m.2h(C);q(A)D m.83(A.6Y(1P),A);I D 1f},31:z(C){D m.6g(C,-1)},1p:z(C){D m.6g(C,1)},5t:z(e){q(!e)e=1A.29;q(!e.2i)e.2i=e.7l;q(1q e.2i.9x!=\'1C\')D J;u A=m.2h();u 1P=H;8Y(e.bK){1I 70:q(A)A.6q();D J;1I 32:1P=2;4P;1I 34:1I 39:1I 40:1P=1;4P;1I 8:1I 33:1I 37:1I 38:1P=-1;4P;1I 27:1I 13:1P=0}q(1P!==H){q(1P!=2)m.3U(R,1A.3r?\'5X\':\'5Y\',m.5t);q(!m.8V)D J;q(e.4F)e.4F();I e.9W=1f;q(A){q(1P==0){A.26()}I q(1P==2){q(A.1g)A.1g.ac()}I{q(A.1g)A.1g.2N();m.6g(A.P,1P)}D 1f}}D J},d1:z(O){m.2q(m.1x,m.3a(O,{1H:\'1H\'+m.4R++}))},cW:z(1h){u 2C=1h.2t;q(1q 2C==\'61\'){K(u i=0;i<2C.T;i++){u o={};K(u x 2Q 1h)o[x]=1h[x];o.2t=2C[i];m.2q(m.5m,o)}}I{m.2q(m.5m,1h)}},86:z(7N,6e){u C,1T=/^L-Q-([0-9]+)$/;C=7N;4o(C.1O){q(C.5B!==1C)D C.5B;q(C.1M&&1T.1b(C.1M))D C.1M.2j(1T,"$1");C=C.1O}q(!6e){C=7N;4o(C.1O){q(C.4G&&m.5U(C)){K(u P=0;P<m.V.T;P++){u A=m.V[P];q(A&&A.a==C)D P}}C=C.1O}}D H},2h:z(C,6e){q(1q C==\'1C\')D m.V[m.3w]||H;q(1q C==\'3n\')D m.V[C]||H;q(1q C==\'8q\')C=m.$(C);D m.V[m.86(C,6e)]||H},5U:z(a){D(a.2F&&a.2F.aI().2j(/\\s/g,\' \').2K(/m.(cV|e)cU/))},ai:z(){K(u i=0;i<m.V.T;i++)q(m.V[i]&&m.V[i].5e)m.9w()},87:z(e){q(!e)e=1A.29;q(e.cX>1)D J;q(!e.2i)e.2i=e.7l;u C=e.2i;4o(C.1O&&!(/L-(2I|3g|5S|3O)/.1b(C.U))){C=C.1O}u A=m.2h(C);q(A&&(A.8c||!A.5e))D J;q(A&&e.S==\'aB\'){q(e.2i.9x)D J;u 2K=C.U.2K(/L-(2I|3g|3O)/);q(2K){m.2R={A:A,S:2K[1],11:A.x.E,M:A.x.B,14:A.y.E,1a:A.y.B,9v:e.6d,9u:e.66};m.1Q(R,\'6o\',m.5T);q(e.4F)e.4F();q(/L-(2I|5S)-89/.1b(A.17.U)){A.4b();m.7R=J}D 1f}}I q(e.S==\'aA\'){m.3U(R,\'6o\',m.5T);q(m.2R){q(m.4C&&m.2R.S==\'2I\')m.2R.A.17.G.4c=m.4C;u 3z=m.2R.3z;q(!3z&&!m.7R&&!/(3g|3O)/.1b(m.2R.S)){A.26()}I q(3z||(!3z&&m.cY)){m.2R.A.5f(\'1s\')}m.7R=1f;m.2R=H}I q(/L-2I-89/.1b(C.U)){C.G.4c=m.4C}}D 1f},5T:z(e){q(!m.2R)D J;q(!e)e=1A.29;u a=m.2R,A=a.A;a.5K=e.6d-a.9v;a.7o=e.66-a.9u;u 7s=1d.cl(1d.9r(a.5K,2)+1d.9r(a.7o,2));q(!a.3z)a.3z=(a.S!=\'2I\'&&7s>0)||(7s>(m.da||5));q(a.3z&&e.6d>5&&e.66>5){q(a.S==\'3O\')A.3O(a);I{A.7C(a.11+a.5K,a.14+a.7o);q(a.S==\'2I\')A.17.G.4c=\'3g\'}}D 1f},9n:z(e){2d{q(!e)e=1A.29;u 6p=/di/i.1b(e.S);q(!e.2i)e.2i=e.7l;q(!e.69)e.69=6p?e.do:e.dm;u A=m.2h(e.2i);q(!A.5e)D;q(!A||!e.69||m.2h(e.69,J)==A||m.2R)D;K(u i=0;i<A.1x.T;i++)(z(){u o=m.$(\'1H\'+A.1x[i]);q(o&&o.67){q(6p)m.W(o,{1e:\'1D\',1u:\'\'});m.2b(o,{1n:6p?o.1n:0},o.3t)}})()}1W(e){}},1Q:z(C,29,3m){q(C==R&&29==\'3u\'){m.2q(m.5D,3m)}2d{C.1Q(29,3m,1f)}1W(e){2d{C.9s(\'57\'+29,3m);C.db(\'57\'+29,3m)}1W(e){C[\'57\'+29]=3m}}},3U:z(C,29,3m){2d{C.3U(29,3m,1f)}1W(e){2d{C.9s(\'57\'+29,3m)}1W(e){C[\'57\'+29]=H}}},6w:z(i){q(m.7e&&m.4O[i]&&m.4O[i]!=\'1C\'){u 1y=R.1c(\'1y\');1y.6A=z(){1y=H;m.6w(i+1)};1y.1G=m.4O[i]}},9R:z(3n){q(3n&&1q 3n!=\'61\')m.7A=3n;u 2o=m.60();K(u i=0;i<2o.4p.T&&i<m.7A;i++){m.2q(m.4O,m.78(2o.4p[i]))}q(m.1B)24 m.5q(m.1B,z(){m.6w(0)});I m.6w(0);q(m.5h)u 4J=m.1c(\'1y\',{1G:m.4u+m.5h})},7c:z(){q(!m.22){m.3E=m.2m&&m.21<7;m.44=m.2m&&m.21<9;m.6D();K(u x 2Q m.5L){q(1q m[x]!=\'1C\')m.18[x]=m[x];I q(1q m.18[x]==\'1C\'&&1q m.5L[x]!=\'1C\')m.18[x]=m.5L[x]}m.22=m.1c(\'Z\',{U:\'L-22\'},{1j:\'2v\',11:0,14:0,M:\'28%\',1r:m.4H,9E:\'9t\'},R.3y,J);m.1S=m.1c(\'a\',{U:\'L-1S\',1X:m.18.9g,2T:m.18.9f,1Y:\'av:;\'},{1j:\'2v\',14:\'-4W\',1n:m.91,1r:1},m.22);m.8j=m.1c(\'Z\',H,{1u:\'1F\'},m.22);m.1Z=m.1c(\'Z\',{U:\'L-1Z L-1Z-B\'},{1e:(m.4t&&m.21<6B)?\'1D\':\'1s\'},m.22,1);1d.cT=z(t,b,c,d){D c*t/d+b};1d.93=z(t,b,c,d){D c*(t/=d)*t+b};1d.7n=z(t,b,c,d){D-c*(t/=d)*(t-2)+b};m.9U=m.3E;m.9z=((1A.3r&&m.21<9)||5w.cx==\'cy\'||(m.3E&&m.21<5.5))}},3u:z(){q(m.7i)D;m.7i=J;K(u i=0;i<m.5D.T;i++)m.5D[i]()},7O:z(){u C,1i,5r=[],4p=[],2M={},1T;K(u i=0;i<m.8e.T;i++){1i=R.2J(m.8e[i]);K(u j=0;j<1i.T;j++){C=1i[j];1T=m.5U(C);q(1T){m.2q(5r,C);q(1T[0]==\'m.2D\')m.2q(4p,C);u g=m.4Z(C,\'2t\')||\'1F\';q(!2M[g])2M[g]=[];m.2q(2M[g],C)}}}m.3T={5r:5r,2M:2M,4p:4p};D m.3T},60:z(){D m.3T||m.7O()},26:z(C){u A=m.2h(C);q(A)A.26();D 1f}};m.1E=z(2G,1h,X){k.1h=1h;k.2G=2G;k.X=X;q(!1h.8Z)1h.8Z={}};m.1E.5s={85:z(){(m.1E.3l[k.X]||m.1E.3l.96)(k);q(k.1h.3l)k.1h.3l.95(k.2G,k.4a,k)},3F:z(7b,1L,49){k.80=(24 8X()).94();k.43=7b;k.4A=1L;k.49=49;k.4a=k.43;k.E=k.7X=0;u 5Z=k;z t(5V){D 5Z.3l(5V)}t.2G=k.2G;q(t()&&m.3v.2q(t)==1){m.8W=cz(z(){u 3v=m.3v;K(u i=0;i<3v.T;i++)q(!3v[i]())3v.cu(i--,1);q(!3v.T){ct(m.8W)}},13)}},3l:z(5V){u t=(24 8X()).94();q(5V||t>=k.1h.3I+k.80){k.4a=k.4A;k.E=k.7X=1;k.85();k.1h.5J[k.X]=J;u 8d=J;K(u i 2Q k.1h.5J)q(k.1h.5J[i]!==J)8d=1f;q(8d){q(k.1h.6f)k.1h.6f.95(k.2G)}D 1f}I{u n=t-k.80;k.7X=n/k.1h.3I;k.E=k.1h.2r(n,0,1,k.1h.3I);k.4a=k.43+((k.4A-k.43)*k.E);k.85()}D J}};m.3a(m.1E,{3l:{1n:z(1E){m.W(1E.2G,{1n:1E.4a})},96:z(1E){2d{q(1E.2G.G&&1E.2G.G[1E.X]!=H)1E.2G.G[1E.X]=1E.4a+1E.49;I 1E.2G[1E.X]=1E.4a}1W(e){}}}});m.5q=z(1B,3Y){k.3Y=3Y;k.1B=1B;u v=m.21,3M;k.7j=m.2m&&m.21<7;q(!1B){q(3Y)3Y();D}m.7c();k.1V=m.1c(\'1V\',{cP:0},{1e:\'1s\',1j:\'2v\',cR:\'cL\',M:0},m.22,J);u 3S=m.1c(\'3S\',H,H,k.1V,1);k.2e=[];K(u i=0;i<=8;i++){q(i%3==0)3M=m.1c(\'3M\',H,{1a:\'2k\'},3S,J);k.2e[i]=m.1c(\'2e\',H,H,3M,J);u G=i!=4?{cK:0,cF:0}:{1j:\'8i\'};m.W(k.2e[i],G)}k.2e[4].U=1B+\' L-16\';k.98()};m.5q.5s={98:z(){u 1G=m.4u+(m.cE||"cD/")+k.1B+".97";u 9a=m.4t&&m.21<6B?m.22:H;k.3f=m.1c(\'1y\',H,{1j:\'2v\',14:\'-4W\'},9a,J);u 7T=k;k.3f.6A=z(){7T.9b()};k.3f.1G=1G},9b:z(){u o=k.1k=k.3f.M/4,E=[[0,0],[0,-4],[-2,0],[0,-8],0,[-2,-8],[0,-2],[0,-6],[-2,-2]],1m={1a:(2*o)+\'F\',M:(2*o)+\'F\'};K(u i=0;i<=8;i++){q(E[i]){q(k.7j){u w=(i==1||i==7)?\'28%\':k.3f.M+\'F\';u Z=m.1c(\'Z\',H,{M:\'28%\',1a:\'28%\',1j:\'8i\',3c:\'1s\'},k.2e[i],J);m.1c(\'Z\',H,{5A:"cJ:cn.cv.cw(cS=dk, 1G=\'"+k.3f.1G+"\')",1j:\'2v\',M:w,1a:k.3f.1a+\'F\',11:(E[i][0]*o)+\'F\',14:(E[i][1]*o)+\'F\'},Z,J)}I{m.W(k.2e[i],{9e:\'5W(\'+k.3f.1G+\') \'+(E[i][0]*o)+\'F \'+(E[i][1]*o)+\'F\'})}q(1A.3r&&(i==3||i==5))m.1c(\'Z\',H,1m,k.2e[i],J);m.W(k.2e[i],1m)}}k.3f=H;q(m.45[k.1B])m.45[k.1B].5j();m.45[k.1B]=k;q(k.3Y)k.3Y()},4g:z(E,1k,9d,3t,2r){u A=k.A,dp=A.Q.G,1k=1k||0,E=E||{x:A.x.E+1k,y:A.y.E+1k,w:A.x.N(\'1N\')-2*1k,h:A.y.N(\'1N\')-2*1k};q(9d)k.1V.G.1e=(E.h>=4*k.1k)?\'1D\':\'1s\';m.W(k.1V,{11:(E.x-k.1k)+\'F\',14:(E.y-k.1k)+\'F\',M:(E.w+2*k.1k)+\'F\'});E.w-=2*k.1k;E.h-=2*k.1k;m.W(k.2e[4],{M:E.w>=0?E.w+\'F\':0,1a:E.h>=0?E.h+\'F\':0});q(k.7j)k.2e[3].G.1a=k.2e[5].G.1a=k.2e[4].G.1a},5j:z(9c){q(9c)k.1V.G.1e=\'1s\';I m.3H(k.1V)}};m.68=z(A,1m){k.A=A;k.1m=1m;k.3o=1m==\'x\'?\'au\':\'ao\';k.3A=k.3o.5H();k.5i=1m==\'x\'?\'ag\':\'ab\';k.6s=k.5i.5H();k.71=1m==\'x\'?\'a4\':\'ah\';k.90=k.71.5H();k.1o=k.2z=0};m.68.5s={N:z(P){8Y(P){1I\'6U\':D k.1K+k.3p+(k.t-m.1S[\'1k\'+k.3o])/2;1I\'6J\':D k.E+k.cb+k.1o+(k.B-m.1S[\'1k\'+k.3o])/2;1I\'1N\':D k.B+2*k.cb+k.1o+k.2z;1I\'4r\':D k.3X-k.2O-k.3V;1I\'6V\':D k.N(\'4r\')-2*k.cb-k.1o-k.2z;1I\'53\':D k.E-(k.A.16?k.A.16.1k:0);1I\'7M\':D k.N(\'1N\')+(k.A.16?2*k.A.16.1k:0);1I\'2f\':D k.1z?1d.2y((k.B-k.1z)/2):0}},7f:z(){k.cb=(k.A.17[\'1k\'+k.3o]-k.t)/2;k.3V=m[\'74\'+k.71]},72:z(){k.t=k.A.C[k.3A]?7L(k.A.C[k.3A]):k.A.C[\'1k\'+k.3o];k.1K=k.A.1K[k.1m];k.3p=(k.A.C[\'1k\'+k.3o]-k.t)/2;q(k.1K==0||k.1K==-1){k.1K=(m.41[k.3A]/2)+m.41[\'1J\'+k.5i]}},6S:z(){u A=k.A;k.2p=\'2k\';q(A.76==\'3W\')k.2p=\'3W\';I q(24 5I(k.6s).1b(A.3K))k.2p=H;I q(24 5I(k.90).1b(A.3K))k.2p=\'5n\';k.E=k.1K-k.cb+k.3p;q(k.73&&k.1m==\'x\')A.6a=1d.2Y(A.6a||k.19,A.73*k.19/A.y.19);k.B=1d.2Y(k.19,A[\'5n\'+k.3o]||k.19);k.2n=A.5y?1d.2Y(A[\'2Y\'+k.3o],k.19):k.19;q(A.3B&&A.36){k.B=A[k.3A];k.1z=k.19}q(k.1m==\'x\'&&m.59)k.2n=A.4S;k.2i=A[\'2i\'+k.1m.92()];k.2O=m[\'74\'+k.5i];k.1J=m.41[\'1J\'+k.5i];k.3X=m.41[k.3A]},82:z(i){u A=k.A;q(A.3B&&(A.36||m.59)){k.1z=i;k.B=1d.5n(k.B,k.1z);A.17.G[k.6s]=k.N(\'2f\')+\'F\'}I k.B=i;A.17.G[k.3A]=i+\'F\';A.Q.G[k.3A]=k.N(\'1N\')+\'F\';q(A.16)A.16.4g();q(k.1m==\'x\'&&A.1l)A.4j(J);q(k.1m==\'x\'&&A.1g&&A.3B){q(i==k.19)A.1g.4B(\'19-2D\');I A.1g.3Z(\'19-2D\')}},7Z:z(i){k.E=i;k.A.Q.G[k.6s]=i+\'F\';q(k.A.16)k.A.16.4g()}};m.56=z(a,2S,3F,2P){q(R.cG&&m.2m&&!m.7i){m.1Q(R,\'3u\',z(){24 m.56(a,2S,3F,2P)});D}k.a=a;k.3F=3F;k.2P=2P||\'2I\';k.3B=!k.cQ;m.7e=1f;k.1x=[];k.Y=m.Y;m.Y=H;m.7c();u P=k.P=m.V.T;K(u i=0;i<m.6Q.T;i++){u 35=m.6Q[i];k[35]=2S&&1q 2S[35]!=\'1C\'?2S[35]:m[35]}q(!k.1G)k.1G=a.1Y;u C=(2S&&2S.7y)?m.$(2S.7y):a;C=k.9p=C.2J(\'1y\')[0]||C;k.6t=C.1M||a.1M;K(u i=0;i<m.V.T;i++){q(m.V[i]&&m.V[i].a==a&&!(k.Y&&k.2X[1]==\'4i\')){m.V[i].4b();D 1f}}q(!m.cM)K(u i=0;i<m.V.T;i++){q(m.V[i]&&m.V[i].9p!=C&&!m.V[i].5G){m.V[i].5Q()}}m.V[P]=k;q(!m.9j&&!m.1U){q(m.V[P-1])m.V[P-1].26();q(1q m.3w!=\'1C\'&&m.V[m.3w])m.V[m.3w].26()}k.C=C;k.1K=k.9i||m.6E(C);m.6D();u x=k.x=24 m.68(k,\'x\');x.72();u y=k.y=24 m.68(k,\'y\');y.72();k.Q=m.1c(\'Z\',{1M:\'L-Q-\'+k.P,U:\'L-Q \'+k.7B},{1e:\'1s\',1j:\'2v\',1r:m.4H+=2},H,J);k.Q.cr=k.Q.cs=m.9n;q(k.2P==\'2I\'&&k.3G==2)k.3G=0;q(!k.1B||(k.Y&&k.3B&&k.2X[1]==\'4i\')){k[k.2P+\'6M\']()}I q(m.45[k.1B]){k.6N();k[k.2P+\'6M\']()}I{k.6Z();u A=k;24 m.5q(k.1B,z(){A.6N();A[A.2P+\'6M\']()})}D J};m.56.5s={7D:z(e){q(m.dg)df(\'de \'+e.dc+\': \'+e.dj);I 1A.dn.1Y=k.1G},6N:z(){u 16=k.16=m.45[k.1B];16.A=k;16.1V.G.1r=k.Q.G.1r-1;m.45[k.1B]=H},6Z:z(){q(k.5G||k.1S)D;k.1S=m.1S;u A=k;k.1S.2F=z(){A.5Q()};u A=k,l=k.x.N(\'6U\')+\'F\',t=k.y.N(\'6U\')+\'F\';q(!2l&&k.Y&&k.2X[1]==\'4i\')u 2l=k.Y;q(2l){l=2l.x.N(\'6J\')+\'F\';t=2l.y.N(\'6J\')+\'F\';k.1S.G.1r=m.4H++}4q(z(){q(A.1S)m.W(A.1S,{11:l,14:t,1r:m.4H++})},28)},dl:z(){u A=k;u 1y=R.1c(\'1y\');k.17=1y;1y.6A=z(){q(m.V[A.P])A.8K()};q(m.d2)1y.d8=z(){D 1f};1y.U=\'L-2I\';m.W(1y,{1e:\'1s\',1u:\'4D\',1j:\'2v\',6a:\'4W\',1r:3});1y.1X=m.18.84;q(m.4t&&m.21<6B)m.22.2E(1y);q(m.2m&&m.d6)1y.1G=H;1y.1G=k.1G;k.6Z()},8K:z(){2d{q(!k.17)D;k.17.6A=H;q(k.5G)D;I k.5G=J;u x=k.x,y=k.y;q(k.1S){m.W(k.1S,{14:\'-4W\'});k.1S=H}x.19=k.17.M;y.19=k.17.1a;m.W(k.17,{M:x.t+\'F\',1a:y.t+\'F\'});k.Q.2E(k.17);m.22.2E(k.Q);x.7f();y.7f();m.W(k.Q,{11:(x.1K+x.3p-x.cb)+\'F\',14:(y.1K+x.3p-y.cb)+\'F\'});k.aH();k.9I();u 2x=x.19/y.19;x.6S();k.2p(x);y.6S();k.2p(y);q(k.1l)k.4j(0,1);q(k.5y){k.aW(2x);u 1v=k.1g;q(1v&&k.Y&&1v.2A&&1v.ar){u E=1v.aC.1j||\'\',p;K(u 1m 2Q m.7q)K(u i=0;i<5;i++){p=k[1m];q(E.2K(m.7q[1m][i])){p.E=k.Y[1m].E+(k.Y[1m].1o-p.1o)+(k.Y[1m].B-p.B)*[0,0,.5,1,1][i];q(1v.ar==\'d4\'){q(p.E+p.B+p.1o+p.2z>p.1J+p.3X-p.3V)p.E=p.1J+p.3X-p.B-p.2O-p.3V-p.1o-p.2z;q(p.E<p.1J+p.2O)p.E=p.1J+p.2O}}}}q(k.3B&&k.x.19>(k.x.1z||k.x.B)){k.ap();q(k.1x.T==1)k.4j()}}k.b1()}1W(e){k.7D(e)}},2p:z(p,4w){u 46,2l=p.2i,1m=p==k.x?\'x\':\'y\';q(2l&&2l.2K(/ /)){46=2l.d3(\' \');2l=46[0]}q(2l&&m.$(2l)){p.E=m.6E(m.$(2l))[1m];q(46&&46[1]&&46[1].2K(/^[-]?[0-9]+F$/))p.E+=7L(46[1]);q(p.B<p.2n)p.B=p.2n}I q(p.2p==\'2k\'||p.2p==\'3W\'){u 7a=1f;u 4K=p.A.5y;q(p.2p==\'3W\')p.E=1d.2y(p.1J+(p.3X+p.2O-p.3V-p.N(\'1N\'))/2);I p.E=1d.2y(p.E-((p.N(\'1N\')-p.t)/2));q(p.E<p.1J+p.2O){p.E=p.1J+p.2O;7a=J}q(!4w&&p.B<p.2n){p.B=p.2n;4K=1f}q(p.E+p.N(\'1N\')>p.1J+p.3X-p.3V){q(!4w&&7a&&4K){p.B=1d.2Y(p.B,p.N(1m==\'y\'?\'4r\':\'6V\'))}I q(p.N(\'1N\')<p.N(\'4r\')){p.E=p.1J+p.3X-p.3V-p.N(\'1N\')}I{p.E=p.1J+p.2O;q(!4w&&4K)p.B=p.N(1m==\'y\'?\'4r\':\'6V\')}}q(!4w&&p.B<p.2n){p.B=p.2n;4K=1f}}I q(p.2p==\'5n\'){p.E=1d.d5(p.E-p.B+p.t)}q(p.E<p.2O){u aT=p.E;p.E=p.2O;q(4K&&!4w)p.B=p.B-(p.E-aT)}},aW:z(2x){u x=k.x,y=k.y,3e=1f,2B=1d.2Y(x.19,x.B),3b=1d.2Y(y.19,y.B),36=(k.36||m.59);q(2B/3b>2x){ 2B=3b*2x;q(2B<x.2n){2B=x.2n;3b=2B/2x}3e=J}I q(2B/3b<2x){ 3b=2B/2x;3e=J}q(m.59&&x.19<x.2n){x.1z=x.19;y.B=y.1z=y.19}I q(k.36){x.1z=2B;y.1z=3b}I{x.B=2B;y.B=3b}3e=k.aV(k.36?H:2x,3e);q(36&&y.B<y.1z){y.1z=y.B;x.1z=y.B*2x}q(3e||36){x.E=x.1K-x.cb+x.3p;x.2n=x.B;k.2p(x,J);y.E=y.1K-y.cb+y.3p;y.2n=y.B;k.2p(y,J);q(k.1l)k.4j()}},aV:z(2x,3e){u x=k.x,y=k.y;q(k.1l){4o(y.B>k.5l&&x.B>k.4S&&y.N(\'1N\')>y.N(\'4r\')){y.B-=10;q(2x)x.B=y.B*2x;k.4j(0,1);3e=J}}D 3e},b1:z(){u x=k.x,y=k.y;k.5f(\'1s\');q(k.1g&&k.1g.2g)k.1g.2g.4z();k.8f(1,{Q:{M:x.N(\'1N\'),1a:y.N(\'1N\'),11:x.E,14:y.E},17:{11:x.1o+x.N(\'2f\'),14:y.1o+y.N(\'2f\'),M:x.1z||x.B,1a:y.1z||y.B}},m.7h)},8f:z(1t,1L,3t){u 5p=k.2X,6I=1t?(k.Y?k.Y.a:H):m.1U,t=(5p[1]&&6I&&m.4Z(6I,\'2X\')[1]==5p[1])?5p[1]:5p[0];q(k[t]&&t!=\'2D\'){k[t](1t,1L);D}q(k.16&&!k.3G){q(1t)k.16.4g();I k.16.5j()}q(!1t)k.6l();u A=k,x=A.x,y=A.y,2r=k.2r;q(!1t)2r=k.aS||2r;u ay=1t?z(){q(A.16)A.16.1V.G.1e="1D";4q(z(){A.6n()},50)}:z(){A.5g()};q(1t)m.W(k.Q,{M:x.t+\'F\',1a:y.t+\'F\'});q(k.aD){m.W(k.Q,{1n:1t?0:1});m.3a(1L.Q,{1n:1t})}m.2b(k.Q,1L.Q,{3I:3t,2r:2r,3l:z(3k,2Z){q(A.16&&A.3G&&2Z.X==\'14\'){u 5o=1t?2Z.E:1-2Z.E;u E={w:x.t+(x.N(\'1N\')-x.t)*5o,h:y.t+(y.N(\'1N\')-y.t)*5o,x:x.1K+(x.E-x.1K)*5o,y:y.1K+(y.E-y.1K)*5o};A.16.4g(E,0,1)}}});m.2b(k.17,1L.17,3t,2r,ay);q(1t){k.Q.G.1e=\'1D\';k.17.G.1e=\'1D\';k.a.U+=\' L-48-3K\'}},4U:z(1t,1L){k.3G=1f;u A=k,t=1t?m.7h:0;q(1t){m.2b(k.Q,1L.Q,0);m.W(k.Q,{1n:0,1e:\'1D\'});m.2b(k.17,1L.17,0);k.17.G.1e=\'1D\';m.2b(k.Q,{1n:1},t,H,z(){A.6n()})}q(k.16){k.16.1V.G.1r=k.Q.G.1r;u 5R=1t||-1,1k=k.16.1k,6R=1t?3:1k,6K=1t?1k:3;K(u i=6R;5R*i<=5R*6K;i+=5R,t+=25){(z(){u o=1t?6K-i:6R-i;4q(z(){A.16.4g(0,o,1)},t)})()}}q(1t){}I{4q(z(){q(A.16)A.16.5j(A.cm);A.6l();m.2b(A.Q,{1n:0},m.8n,H,z(){A.5g()})},t)}},4i:z(1t,1L,7b){q(!1t)D;u A=k,Y=k.Y,x=k.x,y=k.y,2V=Y.x,2U=Y.y,Q=k.Q,17=k.17,1l=k.1l;m.3U(R,\'6o\',m.5T);m.W(17,{M:(x.1z||x.B)+\'F\',1a:(y.1z||y.B)+\'F\'});q(1l)1l.G.3c=\'1D\';k.16=Y.16;q(k.16)k.16.A=A;Y.16=H;u 4x=m.1c(\'Z\',{U:\'L-\'+k.2P},{1j:\'2v\',1r:4,3c:\'1s\',1u:\'1F\'});u 64={aN:Y,aQ:k};K(u n 2Q 64){k[n]=64[n].17.77(!64[n].cq);m.W(k[n],{1j:\'2v\',aL:0,1e:\'1D\'});4x.2E(k[n])}Q.2E(4x);q(1l){1l.U=\'\';Q.2E(1l)}4x.G.1u=\'\';Y.17.G.1u=\'1F\';q(m.4t&&m.21<6B){k.Q.G.1e=\'1D\'}m.2b(Q,{M:x.B},{3I:m.aG,3l:z(3k,2Z){u E=2Z.E,4f=1-E;u X,B={},6P=[\'E\',\'B\',\'1o\',\'2z\'];K(u n 2Q 6P){X=6P[n];B[\'x\'+X]=1d.2y(4f*2V[X]+E*x[X]);B[\'y\'+X]=1d.2y(4f*2U[X]+E*y[X]);B.aJ=1d.2y(4f*(2V.1z||2V.B)+E*(x.1z||x.B));B.65=1d.2y(4f*2V.N(\'2f\')+E*x.N(\'2f\'));B.aM=1d.2y(4f*(2U.1z||2U.B)+E*(y.1z||y.B));B.6G=1d.2y(4f*2U.N(\'2f\')+E*y.N(\'2f\'))}q(A.16)A.16.4g({x:B.2H,y:B.2L,w:B.4V+B.3s+B.6L+2*x.cb,h:B.4X+B.3C+B.6T+2*y.cb});Y.Q.G.cB=\'cC(\'+(B.2L-2U.E)+\'F, \'+(B.4V+B.3s+B.6L+B.2H+2*2V.cb-2V.E)+\'F, \'+(B.4X+B.3C+B.6T+B.2L+2*2U.cb-2U.E)+\'F, \'+(B.2H-2V.E)+\'F)\';m.W(17,{14:(B.3C+y.N(\'2f\'))+\'F\',11:(B.3s+x.N(\'2f\'))+\'F\',4n:(y.E-B.2L)+\'F\',4s:(x.E-B.2H)+\'F\'});m.W(Q,{14:B.2L+\'F\',11:B.2H+\'F\',M:(B.3s+B.6L+B.4V+2*x.cb)+\'F\',1a:(B.3C+B.6T+B.4X+2*y.cb)+\'F\'});m.W(4x,{M:(B.aJ||B.4V)+\'F\',1a:(B.aM||B.4X)+\'F\',11:(B.3s+B.65)+\'F\',14:(B.3C+B.6G)+\'F\',1e:\'1D\'});m.W(A.aN,{14:(2U.E-B.2L+2U.1o-B.3C+2U.N(\'2f\')-B.6G)+\'F\',11:(2V.E-B.2H+2V.1o-B.3s+2V.N(\'2f\')-B.65)+\'F\'});m.W(A.aQ,{1n:E,14:(y.E-B.2L+y.1o-B.3C+y.N(\'2f\')-B.6G)+\'F\',11:(x.E-B.2H+x.1o-B.3s+x.N(\'2f\')-B.65)+\'F\'});q(1l)m.W(1l,{M:B.4V+\'F\',1a:B.4X+\'F\',11:(B.3s+x.cb)+\'F\',14:(B.3C+y.cb)+\'F\'})},6f:z(){Q.G.1e=17.G.1e=\'1D\';17.G.1u=\'4D\';m.3H(4x);A.6n();Y.5g();A.Y=H}})},9N:z(o,C){q(!k.Y)D 1f;K(u i=0;i<k.Y.1x.T;i++){u 6j=m.$(\'1H\'+k.Y.1x[i]);q(6j&&6j.1H==o.1H){k.7z();6j.cO=k.P;m.2q(k.1x,k.Y.1x[i]);D J}}D 1f},6n:z(){k.5e=J;k.4b();q(k.3P)m.1m(k);q(m.1U&&m.1U==k.a)m.1U=H;k.aP();u p=m.41,79=m.6m.x+p.5d,7d=m.6m.y+p.5u;k.7m=k.x.E<79&&79<k.x.E+k.x.N(\'1N\')&&k.y.E<7d&&7d<k.y.E+k.y.N(\'1N\');q(k.1l)k.aj()},aP:z(){u P=k.P;u 1B=k.1B;24 m.5q(1B,z(){2d{m.V[P].aO()}1W(e){}})},aO:z(){u 1p=k.6Y(1);q(1p&&1p.2F.aI().2K(/m\\.2D/))u 1y=m.1c(\'1y\',{1G:m.78(1p)})},6Y:z(1P){u 6W=k.6h(),as=m.3T.2M[k.2t||\'1F\'];q(as&&!as[6W+1P]&&k.1g&&k.1g.aa){q(1P==1)D as[0];I q(1P==-1)D as[as.T-1]}D(as&&as[6W+1P])||H},6h:z(){u 2o=m.60().2M[k.2t||\'1F\'];q(2o)K(u i=0;i<2o.T;i++){q(2o[i]==k.a)D i}D H},a2:z(){q(k[k.5b]){u 2o=m.3T.2M[k.2t||\'1F\'];q(2o){u s=m.18.3n.2j(\'%1\',k.6h()+1).2j(\'%2\',2o.T);k[k.5b].2T=\'<Z 2s="L-3n">\'+s+\'</Z>\'+k[k.5b].2T}}},aH:z(){q(!k.Y){K(u i=0;i<m.5m.T;i++){u 1v=m.5m[i],2C=1v.2t;q(1q 2C==\'1C\'||2C===H||2C===k.2t)k.1g=24 m.7S(k.P,1v)}}I{k.1g=k.Y.1g}u 1v=k.1g;q(!1v)D;u P=1v.3N=k.P;1v.a5();1v.4B(\'19-2D\');q(1v.2A){k.4h(m.3a(1v.aC||{},{4e:1v.2A,1H:\'2A\',1r:5}))}q(1v.2g)1v.2g.6c(k);q(!k.Y&&k.3D)1v.3i(J);q(1v.3D){1v.3D=4q(z(){m.1p(P)},(1v.d9||d7))}},5Q:z(){m.3H(k.Q);m.V[k.P]=H;q(m.1U==k.a)m.1U=H;m.7Q(k.P);q(k.1S)m.1S.G.11=\'-4W\'},an:z(){q(k.5a)D;k.5a=m.1c(\'a\',{1Y:m.aF,2i:m.aE,U:\'L-5a\',2T:m.18.aR,1X:m.18.aY});k.4h({4e:k.5a,1j:k.aZ||\'14 11\',1H:\'5a\'})},9J:z(6X,aw){K(u i=0;i<6X.T;i++){u S=6X[i],s=H;q(!k[S+\'4l\']&&k.6t)k[S+\'4l\']=S+\'-K-\'+k.6t;q(k[S+\'4l\'])k[S]=m.4N(k[S+\'4l\']);q(!k[S]&&!k[S+\'7g\']&&k[S+\'aU\'])2d{s=cA(k[S+\'aU\'])}1W(e){}q(!k[S]&&k[S+\'7g\']){s=k[S+\'7g\']}q(!k[S]&&!s){k[S]=m.4N(k.a[\'aX\'+S+\'4l\']);q(!k[S]){u 1p=k.a.b0;4o(1p&&!m.5U(1p)){q((24 5I(\'L-\'+S)).1b(1p.U||H)){q(!1p.1M)k.a[\'aX\'+S+\'4l\']=1p.1M=\'1H\'+m.4R++;k[S]=m.4N(1p.1M);4P}1p=1p.b0}}}q(!k[S]&&!s&&k.5b==S)s=\'\\n\';q(!k[S]&&s)k[S]=m.1c(\'Z\',{U:\'L-\'+S,2T:s});q(aw&&k[S]){u o={1j:(S==\'6x\')?\'51\':\'6H\'};K(u x 2Q k[S+\'9T\'])o[x]=k[S+\'9T\'][x];o.4e=k[S];k.4h(o)}}},5f:z(1e){q(m.9U)k.5N(\'cI\',1e);q(m.9z)k.5N(\'cH\',1e);q(m.5O)k.5N(\'*\',1e)},5N:z(4G,1e){u 1i=R.2J(4G);u X=4G==\'*\'?\'3c\':\'1e\';K(u i=0;i<1i.T;i++){q(X==\'1e\'||(R.6O.9P(1i[i],"").9V(\'3c\')==\'2k\'||1i[i].ax(\'1s-by\')!=H)){u 2u=1i[i].ax(\'1s-by\');q(1e==\'1D\'&&2u){2u=2u.2j(\'[\'+k.P+\']\',\'\');1i[i].4M(\'1s-by\',2u);q(!2u)1i[i].G[X]=1i[i].88}I q(1e==\'1s\'){u 3h=m.6E(1i[i]);3h.w=1i[i].2c;3h.h=1i[i].3j;q(!k.3P){u a1=(3h.x+3h.w<k.x.N(\'53\')||3h.x>k.x.N(\'53\')+k.x.N(\'7M\'));u a0=(3h.y+3h.h<k.y.N(\'53\')||3h.y>k.y.N(\'53\')+k.y.N(\'7M\'))}u 5M=m.86(1i[i]);q(!a1&&!a0&&5M!=k.P){q(!2u){1i[i].4M(\'1s-by\',\'[\'+k.P+\']\');1i[i].88=1i[i].G[X];1i[i].G[X]=\'1s\'}I q(2u.9Z(\'[\'+k.P+\']\')==-1){1i[i].4M(\'1s-by\',2u+\'[\'+k.P+\']\')}}I q((2u==\'[\'+k.P+\']\'||m.3w==5M)&&5M!=k.P){1i[i].4M(\'1s-by\',\'\');1i[i].G[X]=1i[i].88||\'\'}I q(2u&&2u.9Z(\'[\'+k.P+\']\')>-1){1i[i].4M(\'1s-by\',2u.2j(\'[\'+k.P+\']\',\'\'))}}}}},4b:z(){k.Q.G.1r=m.4H+=2;K(u i=0;i<m.V.T;i++){q(m.V[i]&&i==m.3w){u 5v=m.V[i];5v.17.U+=\' L-\'+5v.2P+\'-89\';5v.17.G.4c=m.3E?\'9Y\':\'5F\';5v.17.1X=m.18.9X}}q(k.16)k.16.1V.G.1r=k.Q.G.1r-1;k.17.U=\'L-\'+k.2P;k.17.1X=m.18.84;q(m.5h){m.4C=1A.3r?\'5F\':\'5W(\'+m.4u+m.5h+\'), 5F\';q(m.3E&&m.21<6)m.4C=\'9Y\';k.17.G.4c=m.4C}m.3w=k.P;m.1Q(R,1A.3r?\'5X\':\'5Y\',m.5t)},7C:z(x,y){k.x.7Z(x);k.y.7Z(y)},3O:z(e){u w,h,r=e.M/e.1a;w=1d.5n(e.M+e.5K,1d.2Y(k.4S,k.x.19));q(k.3B&&1d.cN(w-k.x.19)<12)w=k.x.19;h=w/r;q(h<1d.2Y(k.5l,k.y.19)){h=1d.2Y(k.5l,k.y.19);q(k.3B)w=h*r}k.7k(w,h)},7k:z(w,h){k.y.82(h);k.x.82(w);k.Q.G.1a=k.y.N(\'1N\')+\'F\'},26:z(){q(k.8c||!k.5e)D;q(k.2X[1]==\'4i\'&&m.1U){m.2h(m.1U).5Q();m.1U=H}k.8c=J;q(k.1g&&!m.1U)k.1g.2N();m.3U(R,1A.3r?\'5X\':\'5Y\',m.5t);2d{k.17.G.4c=\'cp\';k.8f(0,{Q:{M:k.x.t,1a:k.y.t,11:k.x.1K-k.x.cb+k.x.3p,14:k.y.1K-k.y.cb+k.y.3p},17:{11:0,14:0,M:k.x.t,1a:k.y.t}},m.8n)}1W(e){k.5g()}},4h:z(o){u C=o.4e,4y=(o.9C==\'1Z\'&&!/6F$/.1b(o.1j));q(1q C==\'8q\')C=m.4N(C);q(o.5S)C=m.1c(\'Z\',{2T:o.5S});q(!C||1q C==\'8q\')D;C.G.1u=\'4D\';o.1H=o.1H||o.4e;q(k.2X[1]==\'4i\'&&k.9N(o,C))D;k.7z();u M=o.M&&/^[0-9]+(F|%)$/.1b(o.M)?o.M:\'2k\';q(/^(11|2W)6F$/.1b(o.1j)&&!/^[0-9]+F$/.1b(o.M))M=\'co\';u O=m.1c(\'Z\',{1M:\'1H\'+m.4R++,1H:o.1H},{1j:\'2v\',1e:\'1s\',M:M,9E:m.18.9D||\'\',1n:0},4y?m.1Z:k.1l,J);q(4y)O.5B=k.P;O.2E(C);m.3a(O,{1n:1,9A:0,9B:0,3t:(o.4U===0||o.4U===1f||(o.4U==2&&m.2m))?0:54});m.3a(O,o);q(k.am){k.4Q(O);q(!O.67||k.7m)m.2b(O,{1n:O.1n},O.3t)}m.2q(k.1x,m.4R-1)},4Q:z(O){u p=O.1j||\'8h 3W\',4y=(O.9C==\'1Z\'),5E=O.9A,5C=O.9B;q(4y){m.1Z.G.1u=\'4D\';O.5B=k.P;q(O.2c>O.1O.2c)O.G.M=\'28%\'}I q(O.1O!=k.1l)k.1l.2E(O);q(/11$/.1b(p))O.G.11=5E+\'F\';q(/3W$/.1b(p))m.W(O,{11:\'50%\',4s:(5E-1d.2y(O.2c/2))+\'F\'});q(/2W$/.1b(p))O.G.2W=-5E+\'F\';q(/^9G$/.1b(p)){m.W(O,{2W:\'28%\',9H:k.x.cb+\'F\',14:-k.y.cb+\'F\',42:-k.y.cb+\'F\',3c:\'2k\'});k.x.1o=O.2c}I q(/^9M$/.1b(p)){m.W(O,{11:\'28%\',4s:k.x.cb+\'F\',14:-k.y.cb+\'F\',42:-k.y.cb+\'F\',3c:\'2k\'});k.x.2z=O.2c}u 8g=O.1O.3j;O.G.1a=\'2k\';q(4y&&O.3j>8g)O.G.1a=m.3E?8g+\'F\':\'28%\';q(/^14/.1b(p))O.G.14=5C+\'F\';q(/^8h/.1b(p))m.W(O,{14:\'50%\',4n:(5C-1d.2y(O.3j/2))+\'F\'});q(/^42/.1b(p))O.G.42=-5C+\'F\';q(/^51$/.1b(p)){m.W(O,{11:(-k.x.1o-k.x.cb)+\'F\',2W:(-k.x.2z-k.x.cb)+\'F\',42:\'28%\',9L:k.y.cb+\'F\',M:\'2k\'});k.y.1o=O.3j}I q(/^6H$/.1b(p)){m.W(O,{1j:\'8i\',11:(-k.x.1o-k.x.cb)+\'F\',2W:(-k.x.2z-k.x.cb)+\'F\',14:\'28%\',4n:k.y.cb+\'F\',M:\'2k\'});k.y.2z=O.3j;O.G.1j=\'2v\'}},9I:z(){k.9J([\'6x\',\'dh\'],J);k.a2();q(k.6x&&k.7v)k.6x.U+=\' L-3g\';q(m.a3)k.an();K(u i=0;i<m.1x.T;i++){u o=m.1x[i],6r=o.7y,2C=o.2t;q((!6r&&!2C)||(6r&&6r==k.6t)||(2C&&2C===k.2t)){k.4h(o)}}u 6v=[];K(u i=0;i<k.1x.T;i++){u o=m.$(\'1H\'+k.1x[i]);q(/6F$/.1b(o.1j))k.4Q(o);I m.2q(6v,o)}K(u i=0;i<6v.T;i++)k.4Q(6v[i]);k.am=J},7z:z(){q(!k.1l)k.1l=m.1c(\'Z\',{U:k.7B},{1j:\'2v\',M:(k.x.B||(k.36?k.M:H)||k.x.19)+\'F\',1a:(k.y.B||k.y.19)+\'F\',1e:\'1s\',3c:\'1s\',1r:m.2m?4:\'2k\'},m.22,J)},4j:z(7t,al){u 1l=k.1l,x=k.x,y=k.y;m.W(1l,{M:x.B+\'F\',1a:y.B+\'F\'});q(7t||al){K(u i=0;i<k.1x.T;i++){u o=m.$(\'1H\'+k.1x[i]);u 7u=(m.3E||R.6z==\'7P\');q(o&&/^(51|6H)$/.1b(o.1j)){q(7u){o.G.M=(1l.2c+2*x.cb+x.1o+x.2z)+\'F\'}y[o.1j==\'51\'?\'1o\':\'2z\']=o.3j}q(o&&7u&&/^(11|2W)6F$/.1b(o.1j)){o.G.1a=(1l.3j+2*y.cb)+\'F\'}}}q(7t){m.W(k.17,{14:y.1o+\'F\'});m.W(1l,{14:(y.1o+y.cb)+\'F\'})}},aj:z(){u b=k.1l;b.U=\'\';m.W(b,{14:(k.y.1o+k.y.cb)+\'F\',11:(k.x.1o+k.x.cb)+\'F\',3c:\'1D\'});q(m.4t)b.G.1e=\'1D\';k.Q.2E(b);K(u i=0;i<k.1x.T;i++){u o=m.$(\'1H\'+k.1x[i]);o.G.1r=o.1r||4;q(!o.67||k.7m){o.G.1e=\'1D\';m.W(o,{1e:\'1D\',1u:\'\'});m.2b(o,{1n:o.1n},o.3t)}}},6l:z(){q(!k.1x.T)D;q(k.1g){u c=k.1g.2A;q(c&&m.2h(c)==k)c.1O.dd(c)}K(u i=0;i<k.1x.T;i++){u o=m.$(\'1H\'+k.1x[i]);q(o&&o.1O==m.1Z&&m.2h(o)==k)m.3H(o)}m.3H(k.1l)},ap:z(){q(k.1g&&k.1g.2A){k.1g.3Z(\'19-2D\');D}k.62=m.1c(\'a\',{1Y:\'av:m.V[\'+k.P+\'].6q();\',1X:m.18.7p,U:\'L-19-2D\'});k.4h({4e:k.62,1j:m.at,67:J,1n:m.aq})},6q:z(){2d{q(k.62)m.3H(k.62);k.4b();u 2B=k.x.B,3b=k.y.B;k.7k(k.x.19,k.y.19);u 2H=k.x.E-(k.x.B-2B)/2;q(2H<m.4s)2H=m.4s;u 2L=k.y.E-(k.y.B-3b)/2;q(2L<m.4n)2L=m.4n;k.7C(2H,2L);k.5f(\'1s\')}1W(e){k.7D(e)}},5g:z(){k.a.U=k.a.U.2j(\'L-48-3K\',\'\');k.5f(\'1D\');q(k.16&&k.3G)k.16.5j();m.3H(k.Q);k.6l();q(!m.1Z.6b.T)m.1Z.G.1u=\'1F\';q(k.3P)m.7Q(k.P);m.V[k.P]=H;m.ai()}};m.7S=z(3N,1h){q(m.cZ!==1f)m.7O();k.3N=3N;K(u x 2Q 1h)k[x]=1h[x];q(k.d0)k.a8();q(k.2g)k.2g=m.af(k)};m.7S.5s={a8:z(){k.2A=m.1c(\'Z\',{2T:m.a9(m.a7.2A)},H,m.22);u 4Y=[\'3i\',\'2N\',\'31\',\'1p\',\'3g\',\'19-2D\',\'26\'];k.1w={};u 7T=k;K(u i=0;i<4Y.T;i++){k.1w[4Y[i]]=m.a6(k.2A,\'1R\',\'L-\'+4Y[i]);k.3Z(4Y[i])}k.1w.2N.G.1u=\'1F\'},a5:z(){q(k.aa||!k.2A)D;u A=m.V[k.3N],4J=A.6h(),1T=/6k$/;q(4J==0)k.4B(\'31\');I q(1T.1b(k.1w.31.2J(\'a\')[0].U))k.3Z(\'31\');q(4J+1==m.3T.2M[A.2t||\'1F\'].T){k.4B(\'1p\');k.4B(\'3i\')}I q(1T.1b(k.1w.1p.2J(\'a\')[0].U)){k.3Z(\'1p\');k.3Z(\'3i\')}},3Z:z(1w){q(!k.1w)D;u ad=k,a=k.1w[1w].2J(\'a\')[0],1T=/6k$/;a.2F=z(){ad[1w]();D 1f};q(1T.1b(a.U))a.U=a.U.2j(1T,\'\')},4B:z(1w){q(!k.1w)D;u a=k.1w[1w].2J(\'a\')[0];a.2F=z(){D 1f};q(!/6k$/.1b(a.U))a.U+=\' 6k\'},ac:z(){q(k.3D)k.2N();I k.3i()},3i:z(ae){q(k.1w){k.1w.3i.G.1u=\'1F\';k.1w.2N.G.1u=\'\'}k.3D=J;q(!ae)m.1p(k.3N)},2N:z(){q(k.1w){k.1w.2N.G.1u=\'1F\';k.1w.3i.G.1u=\'\'}bf(k.3D);k.3D=H},31:z(){k.2N();m.31(k.1w.31)},1p:z(){k.2N();m.1p(k.1w.1p)},3g:z(){},\'19-2D\':z(){m.2h().6q()},26:z(){m.26(k.1w.26)}};m.af=z(1g){z 6c(A){m.3a(1h||{},{4e:3R,1H:\'2g\',U:\'L-2g-\'+4v+\'-O \'+(1h.U||\'\')});q(m.3E)1h.4U=0;A.4h(1h);m.W(3R.1O,{3c:\'1s\'})};z 1J(3d){4z(1C,1d.2y(3d*3R[3q?\'2c\':\'3j\']*0.7))};z 4z(i,7K){q(i===1C)K(u j=0;j<5c.T;j++){q(5c[j]==m.V[1g.3N].a){i=j;4P}}q(i===1C)D;u as=3R.2J(\'a\'),48=as[i],3L=48.1O,11=3q?\'ag\':\'ab\',2W=3q?\'a4\':\'ah\',M=3q?\'au\':\'ao\',4d=\'1k\'+11,2c=\'1k\'+M,6u=Z.1O.1O[2c],4I=6u-1V[2c],4L=7L(1V.G[3q?\'11\':\'14\'])||0,2w=4L,bt=20;q(7K!==1C){2w=4L-7K;q(4I>0)4I=0;q(2w>0)2w=0;q(2w<4I)2w=4I}I{K(u j=0;j<as.T;j++)as[j].U=\'\';48.U=\'L-48-3K\';u 7F=i>0?as[i-1].1O[4d]:3L[4d],7x=3L[4d]+3L[2c]+(as[i+1]?as[i+1].1O[2c]:0);q(7x>6u-4L)2w=6u-7x;I q(7F<-4L)2w=-7F}u 7r=3L[4d]+(3L[2c]-63[2c])/2+2w;m.2b(1V,3q?{11:2w}:{14:2w},H,\'7n\');m.2b(63,3q?{11:7r}:{14:7r},H,\'7n\');7Y.G.1u=2w<0?\'4D\':\'1F\';8a.G.1u=(2w>4I)?\'4D\':\'1F\'};u 5c=m.3T.2M[m.V[1g.3N].2t||\'1F\'],1h=1g.2g,4v=1h.4v||\'ak\',81=(4v==\'bz\'),3Q=81?[\'Z\',\'7V\',\'1R\',\'23\']:[\'1V\',\'3S\',\'3M\',\'2e\'],3q=(4v==\'ak\'),3R=m.1c(\'Z\',{U:\'L-2g L-2g-\'+4v,2T:\'<Z 2s="L-2g-b2">\'+\'<\'+3Q[0]+\'><\'+3Q[1]+\'></\'+3Q[1]+\'></\'+3Q[0]+\'></Z>\'+\'<Z 2s="L-1J-1t"><Z></Z></Z>\'+\'<Z 2s="L-1J-b8"><Z></Z></Z>\'+\'<Z 2s="L-63"><Z></Z></Z>\'},{1u:\'1F\'},m.22),5z=3R.6b,Z=5z[0],7Y=5z[1],8a=5z[2],63=5z[3],1V=Z.bb,3S=3R.2J(3Q[1])[0],3M;K(u i=0;i<5c.T;i++){q(i==0||!3q)3M=m.1c(3Q[2],H,H,3S);(z(){u a=5c[i],3L=m.1c(3Q[3],H,H,3M),c6=i;m.1c(\'a\',{1Y:a.1Y,1X:a.1X,2F:z(){q(/L-48-3K/.1b(k.U))D 1f;m.2h(k).4b();D m.83(a)},2T:m.9K?m.9K(a):a.2T},H,3L)})()}q(!81){7Y.2F=z(){1J(-1)};8a.2F=z(){1J(1)};m.1Q(3S,R.bA!==1C?\'bY\':\'c8\',z(e){u 3d=0;e=e||1A.29;q(e.9F){3d=e.9F/cj;q(m.3r)3d=-3d}I q(e.9O){3d=-e.9O/3}q(3d)1J(-3d*0.2);q(e.4F)e.4F();e.9W=1f})}D{6c:6c,4z:4z}};m.5L=m.18;u bC=m.56;q(m.2m&&1A==1A.14){(z(){2d{R.4k.bD(\'11\')}1W(e){4q(9Q.bE,50);D}m.3u()})()}m.1Q(R,\'bM\',m.3u);m.1Q(1A,\'az\',m.3u);m.1Q(R,\'3u\',z(){q(m.5P||m.3P){u G=m.1c(\'G\',{S:\'bT/7U\'},H,R.2J(\'bU\')[0]),8k=R.6z==\'7P\';z 5k(7w,7W){q(m.2m&&(m.21<9||8k)){u Y=R.9S[R.9S.T-1];q(1q(Y.5k)=="61")Y.5k(7w,7W)}I{G.2E(R.bV(7w+" {"+7W+"}"))}}z 5x(X){D\'bS( ( ( bO = R.4k.\'+X+\' ? R.4k.\'+X+\' : R.3y.\'+X+\' ) ) + \\\'F\\\' );\'}q(m.5P)5k(\'.L 1y\',\'4c: 5W(\'+m.4u+m.5P+\'), 5F !c1;\');5k(\'.L-1Z-B\',m.2m&&(m.21<7||8k)?\'1j: 2v; \'+\'11:\'+5x(\'5d\')+\'14:\'+5x(\'5u\')+\'M:\'+5x(\'8m\')+\'1a:\'+5x(\'aK\'):\'1j: be; M: 28%; 1a: 28%; 11: 0; 14: 0\')}});m.1Q(1A,\'3O\',z(){m.6D();q(m.1Z)K(u i=0;i<m.1Z.6b.T;i++){u 3x=m.1Z.6b[i],A=m.2h(3x);A.4Q(3x);q(3x.1H==\'2g\')A.1g.2g.4z()}});m.1Q(R,\'6o\',z(e){m.6m={x:e.6d,y:e.66}});m.1Q(R,\'aB\',m.87);m.1Q(R,\'aA\',m.87);m.1Q(R,\'3u\',m.60);m.1Q(1A,\'az\',m.9R)}',62,832,'||||||||||||||||||||this||hs||||if||||var|||||function|exp|size|el|return|pos|px|style|null|else|true|for|highslide|width|get|overlay|key|wrapper|document|type|length|className|expanders|setStyles|prop|last|div||left|||top||outline|content|lang|full|height|test|createElement|Math|visibility|false|slideshow|options|els|position|offset|overlayBox|dim|opacity|p1|next|typeof|zIndex|hidden|up|display|ss|btn|overlays|img|imgSize|window|outlineType|undefined|visible|fx|none|src|hsId|case|scroll|tpos|to|id|wsize|parentNode|op|addEventListener|li|loading|re|upcoming|table|catch|title|href|viewport||uaVersion|container|span|new||close||100|event|dimmer|animate|offsetWidth|try|td|imgPad|thumbstrip|getExpander|target|replace|auto|tgt|ie|minSize|arr|justify|push|easing|class|slideshowGroup|hiddenBy|absolute|tblPos|ratio|round|p2|controls|xSize|sg|expand|appendChild|onclick|elem|xpos|image|getElementsByTagName|match|ypos|groups|pause|marginMin|contentType|in|dragArgs|params|innerHTML|lastY|lastX|right|transitions|min|args|opt|previous||||name|useBox||||extend|ySize|overflow|delta|changed|graphic|move|elPos|play|offsetHeight|val|step|func|number|ucwh|tb|isX|opera|xp1|dur|ready|timers|focusKey|node|body|hasDragged|wh|isImage|yp1|autoplay|ieLt7|custom|outlineWhileAnimating|discardElement|duration|styles|anchor|cell|tr|expKey|resize|dimmingOpacity|tree|dom|tbody|anchors|removeEventListener|marginMax|center|clientSize|onLoad|enable||page|bottom|start|ieLt9|pendingOutlines|tgtArr|clone|active|unit|now|focus|cursor|offsetLeft|overlayId|invPos|setPosition|createOverlay|crossfade|sizeOverlayBox|documentElement|Id|attribs|marginTop|while|images|setTimeout|fitsize|marginLeft|safari|graphicsDir|mode|moveOnly|fadeBox|relToVP|selectThumb|end|disable|styleRestoreCursor|block|owner|preventDefault|tagName|zIndexCounter|minTblPos|cur|allowReduce|curTblPos|setAttribute|getNode|preloadTheseImages|break|positionOverlay|idCounter|minWidth|iebody|fade|xsize|9999px|ysize|buttons|getParam||above|getParams|opos|250|param|Expander|on|matches|padToMinWidth|credits|numberPosition|group|scrollLeft|isExpanded|doShowHide|afterClose|restoreCursor|uclt|destroy|addRule|minHeight|slideshows|max|fac|trans|Outline|all|prototype|keyHandler|scrollTop|blurExp|navigator|fix|allowSizeReduction|domCh|filter|hsKey|offY|onReady|offX|pointer|onLoadStarted|toLowerCase|RegExp|curAnim|dX|langDefaults|wrapperKey|showHideElements|geckoMac|expandCursor|cancelLoading|dir|html|dragHandler|isHsAnchor|gotoEnd|url|keypress|keydown|self|getAnchors|object|fullExpandLabel|marker|names|ximgPad|clientY|hideOnMouseOut|Dimension|relatedTarget|maxWidth|childNodes|add|clientX|expOnly|complete|previousOrNext|getAnchorIndex|adj|oDiv|disabled|destroyOverlays|mouse|afterExpand|mousemove|over|doFullExpand|tId|lt|thumbsUserSetId|overlayWidth|os|preloadFullImage|heading|topmostKey|compatMode|onload|525|userAgent|getPageSize|getPosition|panel|yimgPad|below|other|loadingPosXfade|endOff|xp2|Create|connectOutline|defaultView|props|overrides|startOff|calcExpanded|yp2|loadingPos|maxsize|current|types|getAdjacentAnchor|showLoading||ucrb|calcThumb|maxHeight|margin||align|cloneNode|getSrc|mX|hasMovedMin|from|init|mY|continuePreloading|calcBorders|Text|expandDuration|isReady|hasAlphaImageLoader|resizeTo|srcElement|mouseIsOver|easeOutQuad|dY|fullExpandTitle|oPos|markerPos|distance|doWrapper|ie6|dragByHeading|sel|activeRight|thumbnailId|genOverlayBox|numberOfImagesToPreload|wrapperClassName|moveTo|error|isNew|activeLeft|dimmingDuration|pixDimmerSize|clones|topZ|scrollBy|parseInt|osize|element|updateAnchors|BackCompat|undim|hasFocused|Slideshow|pThis|css|ul|dec|state|scrollUp|setPos|startTime|floatMode|setSize|transit|restoreTitle|update|getWrapperKey|mouseClickHandler|origProp|blur|scrollDown|parent|isClosing|done|openerTagNames|changeSize|parOff|middle|relative|garbageBin|backCompat|arrow|clientWidth|restoreDuration|Click|parseFloat|string|closeTitle|captionOverlay|headingOverlay|fullExpandText|moveText|moveTitle|targetY|targetX|closeText|playTitle|spacebar|Previous|Next|Move|Pause|Play|Highslide|JS|Close|contentLoaded|and|pauseTitle|pauseText|nextTitle|playText|rv|200|previousTitle|previousText|nextText|enableKeyListener|timerId|Date|switch|orig|rb|loadingOpacity|toUpperCase|easeInQuad|getTime|call|_default|png|preloadGraphic||appendTo|onGraphicLoad|hide|vis|background|loadingText|loadingTitle|offsetTop|pageOrigin|allowMultipleInstances|offsetParent|pageXOffset|nopad|wrapperMouseHandler|alpha|thumb|dimmingGeckoFix|pow|detachEvent|ltr|clickY|clickX|focusTopmost|form|tag|hideIframes|offsetX|offsetY|relativeTo|cssDirection|direction|wheelDelta|leftpanel|marginRight|getOverlays|getInline|stripItemFormatter|marginBottom|rightpanel|reuseOverlay|detail|getComputedStyle|arguments|preloadImages|styleSheets|Overlay|hideSelects|getPropertyValue|returnValue|focusTitle|hand|indexOf|clearsY|clearsX|getNumber|showCredits|Right|checkFirstAndLast|getElementByClass|skin|getControls|replaceLang|repeat|Top|hitSpace|sls|wait|Thumbstrip|Left|Bottom|reOrder|showOverlays|horizontal|doPanels|gotOverlays|writeCredits|Height|createFullExpand|fullExpandOpacity|fixedControls||fullExpandPosition|Width|javascript|addOverlay|getAttribute|after|load|mouseup|mousedown|overlayOptions|fadeInOut|creditsTarget|creditsHref|transitionDuration|initSlideshow|toString|ximgSize|clientHeight|border|yimgSize|oldImg|preloadNext|prepareNextOutline|newImg|creditsText|easingClose|tmpMin|Eval|fitOverlayBox|correctRatio|_|creditsTitle|creditsPosition|nextSibling|show|inner|of|geckodimmer|pageYOffset|Loading|cancel|down|Image|Resize|firstChild|innerWidth|innerHeight|fixed|clearTimeout|bring|resizeTitle|iPad|the|Android|actual|Go|iPod|iPhone|dimming|scrollWidth|esc|Powered|mgnRight|scrollHeight|homepage|Expand|front||float|onmousewheel|captionId|HsExpander|doScroll|callee|captionText|captionEval|zoomout|headingId|1001|keyCode|outlineStartOffset|DOMContentLoaded|drop|ignoreMe|http|com|shadow|expression|text|HEAD|createTextNode|headingText|zoomin|mousewheel|padding|keys|important|_self|removeAttribute|click|drag|pI|Use|DOMMouseScroll|graphics|ra||it|documentMode|headingEval|Safari|Macintosh|getElementById|Gecko|120|currentStyle|sqrt|preserveContent|DXImageTransform|200px|default|iframe|onmouseover|onmouseout|clearInterval|splice|Microsoft|AlphaImageLoader|vendor|KDE|setInterval|eval|clip|rect|outlines|outlinesDir|fontSize|readyState|IFRAME|SELECT|progid|lineHeight|collapse|allowSimultaneousLoading|abs|reuse|cellSpacing|isHtml|borderCollapse|sizingMethod|linearTween|xpand|htmlE|addSlideshow|button|hasHtmlExpanders|dynamicallyUpdateAnchors|useControls|registerOverlay|blockRightClick|split|fit|floor|flushImgSize|500|oncontextmenu|interval|dragSensitivity|attachEvent|lineNumber|removeChild|Line|alert|debug|caption|mouseover|message|scale|imageCreate|toElement|location|fromElement|stl'.split('|'),0,{}))


/*********************/
/****** 	locale.js	 ***********/
/*********************/
/**
 * Created by vshevtsov on 20.09.16.
 */

var otpMain = {};
window.osJQuery = jQuery;

(function($, o){

    o.ua = {
        /* JSAPI translation*/
        'Январь': 'Сiчень',
        'Февраль': 'Лютий',
        'Март': 'Березень',
        'Апрель': 'Квiтень',
        'Май': 'Травень',
        'Июнь': 'Червень',
        'Июль': 'Липень',
        'Август': 'Серпень',
        'Сентябрь': 'Вересень',
        'Октябрь': 'Жовтень',
        'Ноябрь': 'Листопад',
        'Декабрь': 'Грудень',
        'января': 'сiчня',
        'февраля': 'лютого',
        'марта': 'березня',
        'апреля': 'квiтня',
        'мая': 'травня',
        'июня': 'червня',
        'июля': 'липня',
        'августа': 'серпня',
        'сентября': 'вересня',
        'октября': 'жовтня',
        'ноября': 'листопада',
        'декабря': 'грудня',
        'янв': 'сiч',
        'фев': 'лют',
        'мар': 'бер',
        'апр': 'квi',
        'май': 'тра',
        'июн': 'чер',
        'июл': 'лип',
        'авг': 'сер',
        'сен': 'вер',
        'окт': 'жов',
        'ноя': 'лис',
        'дек': 'гру',
        // 'Янв': 'Сiч',
        // 'Фев': 'Лют',
        // 'Мар': 'Бер',
        // 'Апр': 'Квi',
        // 'Май': 'Тра',
        // 'Июн': 'Чер',
        // 'Июл': 'Лип',
        // 'Авг': 'Сер',
        // 'Сен': 'Вер',
        // 'Окт': 'Жов',
        // 'Ноя': 'Лис',
        // 'Дек': 'Гру',
        'вс': 'нд',
        'Вс': 'Нд',
        'день': 'день',
        'дня': 'дня',
        'дней': 'днiв',
        'без питания': 'без харчування',
        'завтраки': 'сніданки',
        'завтрак и ужин': 'сніданок і вечеря',
        'полный пансион': 'повний пансіон',
        'все включено': 'все включено',
        'ультра все включено': 'ультра все включено',
        'евро': 'євро',
        'дол': 'дол',
        'грн': 'грн',
        /* @file: view/form/form.js */ 
        'Экскурсионные туры': 'Екскурсійні тури',
        'Выберите даты начала тура': 'Оберіть дати початку туру',
        'программ от': 'програм від',
        'операторов': 'операторів',
        'Уточнить город отправления и транспорт': 'Уточнити місто відправлення і транспорт',
        'Найти туры': 'Знайти тури',
        'Выберите страну или курорт': 'Виберіть країну або курорт',
        'По вашему запросу туры не найдены': 'За вашим запитом тури не знайдені',
        /* @file: view/form/duration.js */
        'Длительность': 'Тривалість',
        'Любая длительность': 'Будь-яка тривалість',
        /* @file: view/form/fromCity.js */
        'Из': 'З',
        'Любой город': 'Будь-яке місто',
        /* @file: view/form/location.js */
        'Страна, курорт': 'Країна, курорт',
        'Добавить пункт назначения': 'Додати пункт призначення',
        /* @file: view/form/tourtype.js */
        'Тип тура': 'Тип туру',
        'Любой тип тура': 'Будь-який тип туру',
        'Пляж и экскурсии': 'Пляж та екскурсії',
        'Горные лыжи и экскурсии': 'Гірські лижі та екскурсії',
        'Туры выходного дня': 'Тури вихідного дня',
        'Туры для школьников': 'Тури для школярів',
        'Осенние каникулы': 'Осінні канікули',
        'Зимние каникулы': 'Зимові канікули',
        'Весенние каникулы': 'Весняні канікули',
        'Летние каникулы': 'Літні канікули',
        'Праздничные туры': 'Святкові тури',
        'Новый год и Рождество': 'Новий рік і Різдво',
        '8 марта': '8 березня',
        'День святого Валентина': 'День Святого Валентина',
        'Майские праздники': 'Травневі свята',
        'Фестивали и концерты': 'Фестивалі та концерти',
        /* @file: view/form/transport.js */
        'Транспорт': 'Транспорт',
        'авиа': 'авіа',
        'автобус': 'автобус',
        'корабль': 'корабель',
        'самолет': 'літак',
        'круиз': 'круїз',
        'без транспорта': 'без транспорту',
        'Без транспорта': 'Без транспорту',
        /* @file: view/tour/tour.js */
        'взрослый': 'дорослий',
        'виза': 'віза',
        'страховка': 'страховка',
        'Вернуться к просмотру результатов': 'Повернутися до перегляду результатів',
        'изменить дату': 'змінити дату',
        'включен': 'включений',
        'проживание в отеле ': 'проживання в готелі ',
        'за человека': 'за людину',
        'код': 'код',
        'Программа тура': 'Програма туру',
        'Необходимые документы': 'Необхідні документи',
        'Заказать тур': 'Замовити тур',
        /* @file: view/result.js */
        'из': 'із',
        'за одного': 'за одного',
        'Туры не найдены': 'Тури не знайдені',
        'Показать больше результатов': 'Показати більше результатів',
        /* @file: form/otpautocomplete.js */
        'Страны': 'Країни',
        'Курорты': 'Курорти',
        'неизвестно': 'невідомо',
        'от': 'від',
        'Нет туров в ': 'Немає турів в ',
        /* @file: tour/tour.js */
        'Загрузка': 'Завантаження',
        'Пожалуйста': 'Будь ласка',
        'подождите': 'зачекайте',
        'Развернуть до полного размера': 'Розгорнути до повного розміру',
        'Кликните для закрытия картинки': 'Натисніть для закриття картинки',
        'нажмите и удерживайте для перемещения': 'натисніть і утримуйте для переміщення',
        'Сфокусировать': 'Сфокусувати',
        'Нажмите для отмены': 'Натисніть для скасування',
        'Предыдущий': 'Попередній',
        'Следующий': 'Наступний',
        'Переместить': 'Перемістити',
        'Закрыть': 'Закрити',
        'Размер': 'Розмір',
        'Показывать': 'Показувати',
        'Начать показ слайдов': 'Почати показ слайдів',
        'пробел': 'пробіл',
        'Пауза': 'Пауза',
        'Приостановить показ слайдов': 'Призупинити показ слайдів',
        'стрелочка влево': 'стрілочка вліво',
        'стрелочка вправо': 'стрілочка вправо',
        'Большой размер': 'Великий розмір',
        'Картинка': 'Зображення'
    };

    // #9930
    o._ = function(from_text) {
        if(typeof o.lang === 'undefined' || !o.lang) {
            o.lang = (typeof osLang !== 'undefined' && ['ru', 'ua'].indexOf(osLang) != -1)? osLang: 'ru'; // ru - default language
            o.lang = o.lang.replace('ua', 'ukr').replace('ru', 'rus');
        }

        switch(o.lang) {
            case 'ukr':
                return typeof o.ua[from_text] !== 'undefined'? o.ua[from_text]: from_text;
                break;
            default:
                return from_text;
        }
    };

    o.osTarget = typeof osTarget !== 'undefined'? osTarget: '';

})(jQuery,otpMain);

/*********************/
/****** 	bootstrap-datepicker.js	 ***********/
/*********************/
/* =========================================================
 * bootstrap-datepicker.js 
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
 
!function( $, o ) {
	
	// Picker object
	
	var Datepicker = function(element, options){
		this.element = $(element);
		this.format = DPGlobal.parseFormat(options.format||this.element.data('date-format')||'mm/dd/yyyy');
		this.picker = $(DPGlobal.template)
							.appendTo('body')
							.on({
								click: $.proxy(this.click, this)//,
								//mousedown: $.proxy(this.mousedown, this)
							});
		this.isInput = this.element.is('input');
		this.component = this.element.is('.date') ? this.element.find('.add-on') : false;
		
		if (this.isInput) {
			this.element.on({
				focus: $.proxy(this.show, this),
				//blur: $.proxy(this.hide, this),
				keyup: $.proxy(this.update, this)
			});
		} else {
			if (this.component){
				this.component.on('click', $.proxy(this.show, this));
			} else {
				this.element.on('click', $.proxy(this.show, this));
			}
		}
	
		this.minViewMode = options.minViewMode||this.element.data('date-minviewmode')||0;
		if (typeof this.minViewMode === 'string') {
			switch (this.minViewMode) {
				case 'months':
					this.minViewMode = 1;
					break;
				case 'years':
					this.minViewMode = 2;
					break;
				default:
					this.minViewMode = 0;
					break;
			}
		}
		this.viewMode = options.viewMode||this.element.data('date-viewmode')||0;
		if (typeof this.viewMode === 'string') {
			switch (this.viewMode) {
				case 'months':
					this.viewMode = 1;
					break;
				case 'years':
					this.viewMode = 2;
					break;
				default:
					this.viewMode = 0;
					break;
			}
		}
		this.startViewMode = this.viewMode;
		this.weekStart = options.weekStart||this.element.data('date-weekstart')||0;
		this.weekEnd = this.weekStart === 0 ? 6 : this.weekStart - 1;
		this.onRender = options.onRender;
		this.fillDow();
		this.fillMonths();
		this.update();
		this.showMode();
	};
	
	Datepicker.prototype = {
		constructor: Datepicker,
		
		show: function(e) {
			this.picker.show();
			this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();
			this.place();
			$(window).on('resize', $.proxy(this.place, this));
			if (e ) {
				e.stopPropagation();
				e.preventDefault();
			}
			if (!this.isInput) {
			}
			var that = this;
			$(document).on('mousedown', function(ev){
				if ($(ev.target).closest('.datepicker').length == 0) {
					that.hide();
					$('.exs_search-dates').removeClass('exs_tip-calendar');
				}
			});
//			this.element.trigger({
//				type: 'show',
//				date: this.date
//			});
		},
		
		hide: function(){
			this.picker.hide();
			$(window).off('resize', this.place);
			this.viewMode = this.startViewMode;
			this.showMode();
			if (!this.isInput) {
				$(document).off('mousedown', this.hide);
			}
			//this.set();
//			this.element.trigger({
//				type: 'hide',
//				date: this.date
//			});
		},
		
		set: function() {
			var formated = DPGlobal.formatDate(this.date, this.format);
			if (!this.isInput) {
				if (this.component){
					this.element.find('input').prop('value', formated);
				}
				this.element.data('date', formated);
			} else {
				this.element.prop('value', formated);
			}
		},
		
		setValue: function(newDate, format) {
            if(!format) {
                format =  { parts : ['yyyy', 'mm', 'dd'], separator : ['-']}
            }
			if (typeof newDate === 'string') {
				this.date = DPGlobal.parseDate(newDate, format);
			} else {
				this.date = new Date(newDate);
			}
			this.set();
			this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);
			this.fill();
		},
		
		place: function(){
			var offset = this.component ? this.component.offset() : this.element.offset();
			this.picker.css({
				top: offset.top + this.height,
				left: offset.left
			});
		},
		
		update: function(newDate){
			this.date = DPGlobal.parseDate(
				typeof newDate === 'string' ? newDate : (this.isInput ? this.element.prop('value') : this.element.data('date')),
				this.format
			);
			this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);
			this.fill();
		},
		
		fillDow: function(){
			var dowCnt = this.weekStart;
			var html = '<tr>';
			while (dowCnt < this.weekStart + 7) {
				html += '<th class="dow">'+DPGlobal.dates.daysMin[(dowCnt++)%7]+'</th>';
			}
			html += '</tr>';
			this.picker.find('.datepicker-days thead').append(html);
		},
		
		fillMonths: function(){
			var html = '';
			var i = 0
			while (i < 12) {
				html += '<span class="month">'+DPGlobal.dates.monthsShort[i++]+'</span>';
			}
			this.picker.find('.datepicker-months td').append(html);
		},
		
		fill: function() {
			var d = new Date(this.viewDate),
				year = d.getFullYear(),
				month = d.getMonth(),
				currentDate = this.date.valueOf();
			this.picker.find('.datepicker-days th:eq(1)')
						.text(DPGlobal.dates.months[month]+' '+year);
			var prevMonth = new Date(year, month-1, 28,0,0,0,0),
				day = DPGlobal.getDaysInMonth(prevMonth.getFullYear(), prevMonth.getMonth());
			prevMonth.setDate(day);
			prevMonth.setDate(day - (prevMonth.getDay() - this.weekStart + 7)%7);
			var nextMonth = new Date(prevMonth);
			nextMonth.setDate(nextMonth.getDate() + 42);
			nextMonth = nextMonth.valueOf();
			var html = [];
			var clsName,
				prevY,
				prevM;
			while(prevMonth.valueOf() < nextMonth) {
				if (prevMonth.getDay() === this.weekStart) {
					html.push('<tr>');
				}
				clsName = this.onRender(prevMonth);
				prevY = prevMonth.getFullYear();
				prevM = prevMonth.getMonth();
				if ((prevM < month &&  prevY === year) ||  prevY < year) {
					clsName += ' old';
				} else if ((prevM > month && prevY === year) || prevY > year) {
					clsName += ' new';
				}
				if (prevMonth.valueOf() === currentDate) {
					clsName += ' active';
				}
				html.push('<td class="day '+clsName+'">'+prevMonth.getDate() + '</td>');
				if (prevMonth.getDay() === this.weekEnd) {
					html.push('</tr>');
				}
				prevMonth.setDate(prevMonth.getDate()+1);
			}
			this.picker.find('.datepicker-days tbody').empty().append(html.join(''));
			var currentYear = this.date.getFullYear();
			
			var months = this.picker.find('.datepicker-months')
						.find('th:eq(1)')
							.text(year)
							.end()
						.find('span').removeClass('active');
			if (currentYear === year) {
				months.eq(this.date.getMonth()).addClass('active');
			}
			
			html = '';
			year = parseInt(year/10, 10) * 10;
			var yearCont = this.picker.find('.datepicker-years')
								.find('th:eq(1)')
									.text(year + '-' + (year + 9))
									.end()
								.find('td');
			year -= 1;
			for (var i = -1; i < 11; i++) {
				html += '<span class="year'+(i === -1 || i === 10 ? ' old' : '')+(currentYear === year ? ' active' : '')+'">'+year+'</span>';
				year += 1;
			}
			yearCont.html(html);
		},
		
		click: function(e) {
			e.stopPropagation();
			e.preventDefault();
			var target = $(e.target).closest('span, td, th');
			if (target.length === 1) {
				switch(target[0].nodeName.toLowerCase()) {
					case 'th':
						switch(target[0].className) {
							//case 'switch':
							//	this.showMode(1);
							//	break;
							case 'prev':
							case 'next':
                            case 'p-arr':
                            case 'n-arr':
								this.viewDate['set'+DPGlobal.modes[this.viewMode].navFnc].call(
									this.viewDate,
									this.viewDate['get'+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate) +
									DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ||target[0].className === 'p-arr' ? -1 : 1)
								);
								this.fill();
								this.set();
								break;
						}
						break;
					case 'span':
						if (target.is('.month')) {
							var month = target.parent().find('span').index(target);
							this.viewDate.setMonth(month);
						} else {
							var year = parseInt(target.text(), 10)||0;
							this.viewDate.setFullYear(year);
						}
						if (this.viewMode !== 0) {
							this.date = new Date(this.viewDate);
							this.element.trigger({
								type: 'changeDate',
								date: this.date,
								viewMode: DPGlobal.modes[this.viewMode].clsName
							});
						}
						this.showMode(-1);
						this.fill();
						this.set();
						break;
					case 'td':
						if (target.is('.day') && !target.is('.disabled')){
							var day = parseInt(target.text(), 10)||1;
							var month = this.viewDate.getMonth();
							if (target.is('.old')) {
								month -= 1;
							} else if (target.is('.new')) {
								month += 1;
							}
							var year = this.viewDate.getFullYear();
							this.date = new Date(year, month, day,0,0,0,0);
							this.viewDate = new Date(year, month, Math.min(28, day),0,0,0,0);
							this.fill();
							this.set();
							this.element.trigger({
								type: 'changeDate',
								date: this.date,
								viewMode: DPGlobal.modes[this.viewMode].clsName
							});
						}
						break;
				}
			}
		},
		
		mousedown: function(e){
			e.stopPropagation();
			e.preventDefault();
		},
		
		showMode: function(dir) {
			if (dir) {
				this.viewMode = Math.max(this.minViewMode, Math.min(2, this.viewMode + dir));
			}
			this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();
		}
	};
	
	$.fn.datepicker = function ( option, val ) {
		return this.each(function () {
			var $this = $(this),
				data = $this.data('datepicker'),
				options = typeof option === 'object' && option;
			if (!data) {
				$this.data('datepicker', (data = new Datepicker(this, $.extend({}, $.fn.datepicker.defaults,options))));
			}
			if (typeof option === 'string') data[option](val);
		});
	};

	$.fn.datepicker.defaults = {
		onRender: function(date) {
			return '';
		}
	};
	$.fn.datepicker.Constructor = Datepicker;
	
	var DPGlobal = {
		modes: [
			{
				clsName: 'days',
				navFnc: 'Month',
				navStep: 1
			},
			{
				clsName: 'months',
				navFnc: 'FullYear',
				navStep: 1
			},
			{
				clsName: 'years',
				navFnc: 'FullYear',
				navStep: 10
		}],
		dates:{
			days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
			daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
			daysMin: [o._('Вс'),'Пн','Вт','Ср','Чт','Пт','Сб'],
			months: [o._("Январь"), o._("Февраль"), o._("Март"), o._("Апрель"), o._("Май"), o._("Июнь"), o._("Июль"), o._("Август"), o._("Сентябрь"), o._("Октябрь"), o._("Ноябрь"), o._("Декабрь")],
			monthsShort: [o._("Янв"), o._("Фев"), o._("Мар"), o._("Апр"), o._("Май"), o._("Июн"), o._("Июл"), o._("Авг"), o._("Сен"), o._("Окт"), o._("Ноя"), o._("Дек")],
            monthLong : [o._('янв'),o._('фев'),o._('мар'),o._('апр'),o._('май'),o._('июн'),o._('июл'),o._('авг'),o._('сен'),o._('окт'),o._('ноя'),o._('дек')]
		},
		isLeapYear: function (year) {
			return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))
		},
		getDaysInMonth: function (year, month) {
			return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]
		},
		parseFormat: function(format){
			var separator = format.match(/[.\/\-\s].*?/),
				parts = format.split(/\W+/);
			if (!separator || !parts || parts.length === 0){
				throw new Error("Invalid date format.");
			}
			return {separator: separator, parts: parts};
		},
		parseDate: function(date, format) {
			var parts = date.split(format.separator),
				date = new Date(),
				val;
			date.setHours(0);
			date.setMinutes(0);
			date.setSeconds(0);
			date.setMilliseconds(0);
			if (parts.length === format.parts.length) {
				var year = date.getFullYear(), day = date.getDate(), month = date.getMonth();
				for (var i=0, cnt = format.parts.length; i < cnt; i++) {
					val = parseInt(parts[i], 10)||1;
					switch(format.parts[i]) {
						case 'dd':
						case 'd':
							day = val;
							date.setDate(val);
							break;
						case 'mm':
						case 'm':
							month = val - 1;
							date.setMonth(val - 1);
							break;
						case 'yy':
							year = 2000 + val;
							date.setFullYear(2000 + val);
							break;
						case 'yyyy':
							year = val;
							date.setFullYear(val);
							break;
                        case 'D':
                            break;
                        case 'M':
                            for(var k in DPGlobal.dates.monthLong) {
                                if(DPGlobal.dates.monthLong[k]==val) {
                                    month = k - 1;
                                    date.setMonth(k - 1);
                                    break;
                                }
                            }
                            break;
					}
				}
				date = new Date(year, month, day, 0 ,0 ,0);
//                console.log('Дата: '+ parts);
//                console.log('Формат даты: ');
//                for(var i in format.parts) {
//                    console.log(format.parts[i]);
//                }
//                console.log('Полученная дата: '+date);
			}
			return date;
		},
		formatDate: function(date, format){
			var val = {
				d: date.getDate(),
				m: date.getMonth() + 1,
				yy: date.getFullYear().toString().substring(2),
				yyyy: date.getFullYear()
			};
			val.dd = (val.d < 10 ? '0' : '') + val.d;
			val.mm = (val.m < 10 ? '0' : '') + val.m;
            val.D = DPGlobal.dates.daysMin[date.getDay()];
            val.M = DPGlobal.dates.monthLong[date.getMonth()];
			var date = [];
			for (var i=0, cnt = format.parts.length; i < cnt; i++) {
				date.push(val[format.parts[i]]);
			}
			return date.join(format.separator);
		},
		headTemplate: '<thead>'+
							'<tr class="header">'+
								'<th class="prev"><em class="p-arr"></em></th>'+
								'<th colspan="5" class="switch"></th>'+
								'<th class="next"><em class="n-arr"></em></th>'+
							'</tr>'+
						'</thead>',
		contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>'
	};

	DPGlobal.template = '<div class="datepicker dropdown-menu">'+
							'<div class="os-datepicker-custom-from"></div>' + // #10249
							'<div class="os-datepicker-custom-to"></div>' + // #10249
							'<div class="datepicker-days">'+
								'<table class=" table-condensed">'+
									DPGlobal.headTemplate+
									'<tbody></tbody>'+
								'</table>'+
							'</div>'+
							'<div class="datepicker-months">'+
								'<table class="table-condensed">'+
									DPGlobal.headTemplate+
									DPGlobal.contTemplate+
								'</table>'+
							'</div>'+
							'<div class="datepicker-years">'+
								'<table class="table-condensed">'+
									DPGlobal.headTemplate+
									DPGlobal.contTemplate+
								'</table>'+
							'</div>'+
						'</div>';

}( window.jQuery, (typeof otpMain !== 'undefined'? otpMain: otpMainOrder));


/*********************/
/****** 	obj.js	 ***********/
/*********************/
/**
 * Created by mtoy on 4/14/14.
 */

/**
 * Main object
 * @type {{config: {}}}
 */

(function($, o){

    o = $.extend(o, {
        /**
         * @type {{prefix: string, searchLink: string, suggestLink: string}}
         */
        config: {
            baseUrl: 'https://export.otpusk.com',
            prefix: 'exs_',
            searchLink: 'https://export.otpusk.com/api/excursions/search/',
            suggestLink: 'https://export.otpusk.com/api/excursions/suggests/',
            tourLink: 'https://export.otpusk.com/api/excursions/tour/',
            datesLink: 'https://export.otpusk.com/api/excursions/dates/',
            regionsLink: 'https://export.otpusk.com/api/excursions/towns/',
            sessionLink: 'https://export.otpusk.com/api/session',
            countDataLink: 'https://export.otpusk.com/api/excursions/operators/',
            staticLink: 'https://export.otpusk.com/api/excursions/static',
            duration: [
                {label: '2-4 '+ o._('дня'), value: 2},
                {label: '3-5 '+ o._('дней'), value: 3},
                {label: '4-6 '+ o._('дней'), value: 4},
                {label: '5-7 '+ o._('дней'), value: 5},
                {label: '6-8 '+ o._('дней'), value: 6},
                {label: '7-9 '+ o._('дней'), value: 7},
                {label: '8-10 '+ o._('дней'), value: 8},
                {label: '9-11 '+ o._('дней'), value: 9},
                {label: '10-12 '+ o._('дней'), value: 10},
                {label: '11-13 '+ o._('дней'), value: 11},
                {label: '12-14 '+ o._('дней'), value: 12},
                {label: '13-15 '+ o._('дней'), value: 13},
                {label: '14-16 '+ o._('дней'), value: 14},
                {label: '15-17 '+ o._('дней'), value: 15},
                {label: '16-18 '+ o._('дней'), value: 16},
                {label: '17-19 '+ o._('дней'), value: 17},
                {label: '18-20 '+ o._('дней'), value: 18},
                {label: '19-21 '+ o._('дней'), value: 19},
                {label: '20-22 '+ o._('дней'), value: 20},
                {label: '21-23 '+ o._('дней'), value: 21},
                {label: '22-24 '+ o._('дня'), value: 22},
                {label: '23-25 '+ o._('дней'), value: 23},
                {label: '24-26 '+ o._('дней'), value: 24},
                {label: '25-26 '+ o._('дней'), value: 25},
                {label: '26-26 '+ o._('дней'), value: 26}
            ],
            transport: [
                {label: o._('автобус'), value: 'bus'},
                {label: o._('самолет'), value: 'air'},
                {label: o._('корабль') + ' (' + o._('круиз') + ')', value: 'ship'},
                {label: o._('Без транспорта'), value: 'no'}
            ],
            citiesFrom: {
                '0': {'name': o._('Любой город') +' ('+ o._('без транспорта')+')', 'rel': o._('Любой город'), 'id': 0},
                '1': {'name': o._('Киев'), 'rel': o._('Киева'), 'id': 1544},
                '2': {'name': o._('Харьков'), 'rel': o._('Харькова'), 'id': 1880},
                '3': {'name': o._('Днепр'), 'rel': o._('Днепра'), 'id': 1874},
                '4': {'name': o._('Одесса'), 'rel': o._('Одессы'), 'id': 1358},
                '5': {'name': o._('Львов'), 'rel': 'Львова', 'id': 1397},
                '1012': {'name': o._('Винница'), 'rel': o._('Винницы'), 'id': 1934},
                '1117': {'name': o._('Луцк'), 'rel': o._('Луцка'), 'id': 2024},
                '1519': {'name': 'Ужгород', 'rel': 'Ужгорода', 'id': 1398},
                '1614': {'name': o._('Запорожье'), 'rel': o._('Запорожья'), 'id': 1875},
                '1714': {'name': o._('Ивано-Франковск'), 'rel': o._('Ив.-Франковска'), 'id': 1760},
                '3421': {'name': o._('Черновцы'), 'rel': o._('Черновцов'), 'id': 1708}
            },
            getRegionId: function(cityId) {
                if(typeof o.config.citiesFrom[cityId] !== 'undefined') {
                    return o.config.citiesFrom[cityId].id;
                }
                return 1544; // Kiev
            }
        }
    });
})(jQuery, otpMain);

/*********************/
/****** 	hashlink.js	 ***********/
/*********************/
(function($,obj){

    var hash = function(){
        var delimaterVars = '&';
        var delimaterVal = '=';
        var store = {};
        var expectedHash = '';
        var prefix = 'e';
        var triggers = [];

        var stop = true;
        this.stop = function(){
            stop = false;
        };
        this.start = function(){
            stop = true;
        };

        this.is_valid = false;

        /**
         * аппендим элемент
         * @param string key
         * @param string val
         */
        this.add = function(key, val, isCompile){

            if(key && val != undefined){
                isCompile = isCompile || false;
                store[key] = val;
                if(isCompile){
                    return this.compile(store)
                }
            }
        };

        this.addTrigger = function(f,p,g){
            if(typeof f == 'function'){
                p = p || 0;
                triggers.push([p,f,g]);
                triggers.sort(function(a,b){
                    return a[0] - b[0];
                })
            }
        };

        /**
         * удаляем по ключу
         * @param key
         */
        this.rm = function(key){
            if(store[key]){
                delete store[key];
                this.compile();
            }
        };

        this.rmAll = function(){
            store = [];
            var loc = window.location.href,
                index = loc.indexOf('#');

            if (index > 0) {
                window.location = loc.substring(0, index);
            }
        };

        /**
         * getter
         * @param key
         * @param defVal
         */
        this.get = function(key, defVal){
            defVal = defVal || false;

            if(!key){
                return store;
            }

            if(store[key] !== undefined){ // find as real key
                return store[key];
            } else {
                return defVal;
            }
        };

        /**
         * собираем хеш-линк и устанавливаем в url
         *
         * @param forceData {}
         * @param isString bool
         * @return {String} bool
         */
        this.compile = function(forceData,isString){
            var isForceTrueKeys = forceData===undefined||forceData===false;
            forceData = forceData || store;
            isString = isString || false;
            var h=[];

            var allowedQ = obj.search.getQuery();
            var allowed = {
                'to': null,
                'from': null,
                'checkIn': null,
                'checkTo': null,
                'length': null,
                'lengthTo': null,
                'type': null,
                'transport': null,
                'page': null,
                'tab': null,
                'tourId': null,
                'offerId': null
            };

            for(var i in forceData){
                if(forceData.hasOwnProperty(i) && (allowedQ.hasOwnProperty(i) || allowed.hasOwnProperty(i))) {
                    h.push( i + delimaterVal + encodeURIComponent(forceData[i]));
                }
            }

            prefix = obj.prefix==undefined? prefix: obj.prefix;

            if(isString){
                return prefix + h.join(delimaterVars);
            } else {
                expectedHash = h.join(delimaterVars);
                window.location.hash = prefix + expectedHash;
            }
        };

        /**
         * парсим хеш-линк и запоминаем
         */
        this.parse = function(h){

            var self = this;
            if(!h) h = window.location.hash;

            if(!h){
                return this;
            }

            prefix = obj.prefix==undefined? prefix: obj.prefix;

            var e = [];
            try {
                e = decodeURI(h).substr(prefix.length+1).split(delimaterVars);
            } catch(e) {
                console.log(e);
            }

            var query = obj.search.getQuery();

            store = {};
            for(var i in e){
                if(e.hasOwnProperty(i)){
                    var zn = e[i].split(delimaterVal);

                    store[zn[0]] = decodeURIComponent(zn[1]);
                }
            }

            // is local hash?
            $.each(store, function(k,v){
                if(typeof query[k] !== 'undefined') {
                    self.is_valid = true;
                    return false;
                }
            });
            return this;
        };


        /**
         * отрабатываем изменение хеш-линка
         *  если изменение
         */
        this.onHashChange = function(){

            if(window.location.hash && this.check() && ('#'+ prefix + expectedHash != encodeURI(decodeURI(window.location.hash))) && stop){

                // #6667
                if(typeof otpMain.osTarget === 'string' && otpMain.osTarget) {
                    var localUri = window.location.hostname + window.location.pathname+window.location.search;
                    var osTargetD = otpMain.osTarget.replace('http://' , '');
                    if(localUri.indexOf(osTargetD) < 0) {
                        return false;
                    }
                }

                this.parse();

                if(this.is_valid) {
                    // call triggers
                    var i;
                    for(i in triggers){
                        if((triggers[i][2] === obj.tab || !triggers[i][2] || (!obj.tab && triggers[i][2] === 'form')) && stop && triggers.hasOwnProperty(i)){
                            triggers[i][1]();
                        }
                    }
                }
            }
        };

        /**
         * Проверка хешлинка на наличие префикса
         * @returns {boolean}
         */
        this.check = function() {
            var h = encodeURI(decodeURI(window.location.hash)).substr(0, 3);

            prefix = obj.prefix==undefined? prefix: obj.prefix;

            if(h.indexOf('#'+ prefix) > -1) {
                return true;
            }
            return false;
        }
    };

    obj.hash = new hash();
    $(window).bind('hashchange', function(e) {
        obj.hash.onHashChange(e);
    });

    // run hashchange trigger
    $(function(){
        setTimeout(function(){
            if(typeof obj.form.view.$ !== 'undefined') {
                obj.hash.onHashChange();
            }
        }, 100);

        $('body').on('click', otpMain.fn.prefix('r-link-click', '.'), function(e){

            if(!e.metaKey && !e.ctrlKey) {
                otpMain.hash.stop();
                window.location.href = jQuery(this).attr('href');
                window.location.reload();
            }

        });
    });

})(jQuery,otpMain);



/*********************/
/****** 	fn.js	 ***********/
/*********************/
/**
 * Created by mtoy on 4/23/14.
 */

(function($,o){

    var f = function(){

        var self = this;

        /**
         * Print price format
         * @param price
         * @param currency
         * @param cls
         * @returns {string}
         */
        this.priceEcho = function(price, currency, cls) {
            var currencies = {
                'uah': [o._('грн'), o._('грн')],
                'hrn': [o._('грн'), o._('грн')],
                'usd': [o._('дол.'), '$'],
                'eur': [o._('евро'), '€']
                },
                cls = cls || 'currency';

            var res = '';
            var sum = Math.round(price).toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g, '$1&thinsp;');

            res += sum;
            res += '&nbsp;'+  '<span class="'+ cls +'">' + currencies[currency][1]+ '</span>';

            return res;
        };

        /**
         * Print price format
         * @param price
         * @param format
         * @returns {string}
         */
        this.onlyPriceEcho = function(price, format) {
            var res = Math.round(price).toString();

            if(format) {
                res = res.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g, '$1&thinsp;');
            }
            return res;
        };

        /**
         * Print currency name
         * @param currency
         * @param is_char
         * @returns {string}
         */
        this.curEcho = function(currency, is_char) {
            var currencies = {
                'uah': [o._('грн'), o._('грн')],
                'hrn': [o._('грн'), o._('грн')],
                'usd': [o._('дол.'), '$'],
                'eur': [o._('евро'), '€']
                },
                cls = cls || 'currency';

            return is_char? currencies[currency][1]: currencies[currency][0];
        };

        /**
         * 1,2,5
         * @param number
         * @param titles
         * @returns {*}
         */
        this.suffixForNumber = function(number, titles, with_number) {
            var cases = [2, 0, 1, 1, 1, 2];
            return (with_number? number +' ': '') + titles[ (number%100>4 && number%100<20)? 2 : cases[(number%10<5)?number%10:5] ];
        };

        /**
         * Apped prefix for css class
         * @param name
         * @param p
         * @returns {string}
         */
        this.prefix = function(name,p){
            p = p || '';
            return p + o.config.prefix + name;
        };

        /**
         * Return first element from array
         * @param d
         * @returns {*}
         */
        this.getFirst = function(d) {
            var i;
            for(i in d) {
                if(d.hasOwnProperty(i)) {
                    if(d[i]) return d[i];
                }
            }
        };

        /**
         * Checks if a value exists in an array
         * @param needle
         * @param haystack
         * @param strict
         * @returns {boolean}
         */
        this.in_array = function(needle, haystack, strict) {
            var found = false, key, strict = !!strict;

            for (key in haystack) {
                if ((strict && haystack[key] === needle) || (!strict && haystack[key] == needle)) {
                    found = true;
                    break;
                }
            }

            return found;
        };

        /**
         * Check is empty object
         * @param obj
         * @returns {*}
         */
        this.isEmpty = function(obj) {
            return $.isEmptyObject(obj);
        };

        /**
         * Print food name
         * @param food
         * @returns {*}
         */
        this.foodName = function(food) {
            var foods = {
                'ob': o._('без питания'),
                'bb': o._('завтраки'),
                'hb': o._('завтрак и ужин'),
                'fb': o._('полный пансион'),
                'ai': o._('все включено'),
                'uai': o._('ультра все включено')
            };

            return foods[food.replace('al', 'ai')];
        };

        /**
         * Print hotel stars
         * @param val
         * @returns {*}
         */
        this.printStars = function(val){
            var stars = {
                'one': '1*',
                'two': '2*',
                'three': '3*',
                'four': '4*',
                'five': '5*',
                'hv1': 'hv1',
                'hv2': 'hv2'
            };

            return typeof val === 'string'? stars[val.toString()]: '';
        };

        /**
         * Return list range [from,2,3,4,5..(+to)]
         * @param from
         * @param to
         * @returns {*}
         */
        this.range = function(from, to) {
            return Array.apply(from, Array(to)).map(function (element, index) {return index + from;});
        };

        /**
         * Check and Load new ApiKey
         * @param d
         * @param callback
         * @param params
         * @returns {boolean}
         */
        this.checkError = function(d, callback, params) {

            if(o.got_keys > 5) {
                console.log('Got 5 keys!');
                return false;
            }

            this.checkApiKey(); // update apikey after 25 minutes

            if(typeof d.error !== 'undefined' && typeof d.message !== 'undefined' && d.error) {
                console.log(d.message);

                if(d.message.indexOf('No valid hash') > -1 ||
                    d.message.indexOf('No valid time') > -1 ||
                    d.message.indexOf('No found SESSION') > -1 ||
                    d.message.indexOf('Old key') > -1) {

                    // load new apiKey #7970
                    $.ajax({
                        url: o.config.sessionLink,
                        type: 'GET',
                        dataType: 'jsonp',
                        data: {
                            access_token: o.apiId
                        },
                        timeout: 25000, // 25 sec
                        success: function (resp) {
                            console.log('got new apiKey');
                            o.apiKey = resp.api_session_token;
                            o.got_keys+= 1;

                            if(typeof callback === 'function' && typeof params === 'object') {
                                callback.apply(params);
                            }
                        },
                        error: function(x, t, m) {
                            console.log('error');
                        }
                    });
                }
            } else {
                return true;
            }
        };

        /**
         * Check session for apikey #9335
         */
        this.checkApiKey = function(){
            clearTimeout(o.timer);
            o.timer = setTimeout(function(){

                self.checkError({
                    'error': true,
                    'message': 'No found SESSION'
                })

            }, 1500000); // 25 minutes
        };

        /**
         * Get count tours & operators
         * @param f
         */
        this.getCountTours = function(f){
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');

                var now = new Date();
                if(+localStorage.getItem(o.fn.prefix('cached-date')) < now.getTime()) {

                    // load count tours and operators #10214
                    $.ajax({
                        url: o.config.countDataLink,
                        type: 'GET',
                        dataType: 'jsonp',
                        data: {
                            api_session_token: o.apiKey,
                        },
                        success: function (resp) {

                            var operators = 0,
                                tours = 0;
                            $.each(resp.operators, function(i, item){
                                operators+= 1;
                                tours+= +item.tours;
                            });

                            localStorage.setItem(o.fn.prefix('cached-date'), JSON.stringify(now.getTime()+(2*24*60*60*1000))); // cached to 2 days
                            localStorage.setItem(o.fn.prefix('cached-tours'), JSON.stringify({
                                'operators': operators,
                                'tours': tours
                            }));
                            
                            f(JSON.parse(localStorage.getItem(o.fn.prefix('cached-tours')) || {}));
                        }
                    });
                } else {
                    f(JSON.parse(localStorage.getItem(o.fn.prefix('cached-tours')) || {}));
                }

            } catch(e) {
                f({
                    'tours': 1128,
                    'operators': 9
                });
            }
        };

        /**
         * Show error
         * @param code
         */
        this.errorPage = function(code) {
            switch(code) {
                default:
                    o.view.$.html(
                        $('<div>').addClass(o.fn.prefix('form-wrap desktop'))
                            .html('<p class="nonactive_big">'+ o._('Модуль экскурсионных туров отключен') +'.</p> <p class="nonactive_big">'+ o._('Найти туры всегда можно на ') +
                                '<a href="https://www.otpusk.com/">www.otpusk.com</a>.</p> ' +
                                '<p class="nonactive_sm"> '+ o._('Для восстановления работы модуля обратитесь в ') +
                                '<a href="http://help.otpusk.com/">'+ o._('поддержку') +'</a>.</p>')
                    );
                    break;
            }

            throw {
                name: 'Error',
                message: 'Something went badly wrong'
            };
        }
    };

    o.fn = new f;

})(jQuery, otpMain);

if (!Object.keys) {
    Object.keys = (function() {
        'use strict';
        var hasOwnProperty = Object.prototype.hasOwnProperty,
            hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString'),
            dontEnums = [
                'toString',
                'toLocaleString',
                'valueOf',
                'hasOwnProperty',
                'isPrototypeOf',
                'propertyIsEnumerable',
                'constructor'
            ],
            dontEnumsLength = dontEnums.length;

        return function(obj) {
            if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {
                throw new TypeError('Object.keys called on non-object');
            }

            var result = [], prop, i;

            for (prop in obj) {
                if (hasOwnProperty.call(obj, prop)) {
                    result.push(prop);
                }
            }

            if (hasDontEnumBug) {
                for (i = 0; i < dontEnumsLength; i++) {
                    if (hasOwnProperty.call(obj, dontEnums[i])) {
                        result.push(dontEnums[i]);
                    }
                }
            }
            return result;
        };
    }());
}



/*********************/
/****** 	search.js	 ***********/
/*********************/
/**
 * Created by mtoy on 4/14/14.
 */

(function($,o){

    var query = function(){
        this.to = ''; //to
        this.from = 0; // from
        this.checkIn = ''; // check in from
        this.checkTo = ''; // check in to
        this.length = 6; // tour length from
        this.lengthTo = 8; // tour length to
        this.type = ''; // tour type
        this.transport = 'bus,air,ship'; // tour transport
        this.price = 0; // price from
        this.priceTo = 0; // price to
        this.page = 1; // results page
        this.toString = function(){
            return JSON.stringify(this);
        }
    };

    var f = function(){

        var self = this;
        this.page = 1;
        this.callback = {};

        /**
         * @returns {query}
         */
        this.getQuery = function(){
            return new query();
        };

        /**
         * Bind to search events
         * @param n
         * @param f
         * @returns {f}
         */
        this.bind = function(n,f) {
            self.callback[n] = f;
            return this;
        };

        /**
         * Run bound callbacks
         * @param n
         * @param p
         * @param p2
         * @returns {boolean}
         */
        var call = function(n,p,p2) {
            if(self.callback[n]){
                if(typeof self.callback[n] == 'function'){
                    self.callback[n](p, p2);
                    return true;
                }
            }
            return false;
        };

        /**
         * Set hash from data of search form
         * @param query
         * @returns {f}
         */
        this.setHash = function(query){
            var i;
            for(i in query){
                if((typeof query[i] != 'function') && query.hasOwnProperty(i)){
                    o.hash.add(i, query[i]);
                }
            }

            o.hash.compile();
            return this;
        };

        /**
         * Submit search form
         */
        this.submit = function(is_click_button){
            this.query = o.hash.get();

            this.query.tab = 'form';

            if(is_click_button) {
                otpMain.search.setHash(this.query);
                otpMain.result.reset();

                // reset tour page
                if(typeof otpMain.tour.view.$ !== 'undefined') {
                    otpMain.tour.view.$.remove();
                }
            }

            o.result.view.spinnerShow(); // show spinner

            this.process();
        };

        /**
         * Make search excursion tours
         * @param f
         */
        this.search = function(f) {

            this.query.page = this.page;
            this.query.api_session_token = o.apiKey;
            this.query.lang = o.lang;

            $.ajax({
                url: o.config.searchLink,
                type: 'GET',
                dataType: 'jsonp',
                data: this.query,
                success: function (d) {
                    if(o.fn.checkError(d, o.search.search, [f])) {
                        call('search', d);

                        if(typeof f === 'function') {
                            f(d);
                        }
                    }
                }
            });
        };

        /**
         * Run process search
         */
        this.process = function(){

            if(this.query && this.query.to) {

                if(self.page < 2) {
                    o.result.view.reset(); // clear old results
                }

                self.search(function(result){
                    var count = typeof result.response.results.length === 'undefined'?
                        Object.keys(result.response.results).length: result.response.results.length;

                    o.result.view.append_results(result); // append new results

                    o.result.view.spinnerHide(); // hide spinner

                    if(!count && self.page < 2) {
                        o.result.view.messageShow('<h2>' + o._('По вашему запросу туры не найдены') + '</h2>'); // show message // TODO rm h2
                    }

                    // show pagination
                    if(+result.response.total > count) {
                        if((+result.response.in_page * self.page) < +result.response.total) {
                            o.result.view.paginationShow();
                        }
                    }
                });
            }

            return false;
        };
    };

    o.search = new f();

    // add trigger on hash change
    if(!otpMain.tab || otpMain.tab === 'form'){

        o.hash.addTrigger(function(){
            if(!otpMain.search.query){
                otpMain.search.submit();
            }

        }, 50, 'form');
    }

})(jQuery,otpMain);



/*********************/
/****** 	form/otpautocomplete.js	 ***********/
/*********************/
(function($,obj){
    var names = {
        city: obj._('Курорты'),
        country: obj._('Страны')
    };

    var selectedGeo = [];

    $.widget( "ui.otpautocomplete", $.ui.autocomplete, {
        _suggest: function( items ) {

            var ul = this.menu.element
                .empty()
                .zIndex( this.element.zIndex() + 1 );
            this._renderMenu( ul, items );
            this.menu.refresh();
            // 3 columns when suggest for empty term
            if(obj.form.location && obj.form.location.selectType == 2){
                var elsm = [
                    $('<div class="column column-1"></div>'),
                    $('<div class="column column-2"></div>'),
                    $('<div class="column column-3"></div>')]
                for(var i in elsm){
                    if(elsm.hasOwnProperty(i)) {

                        elsm[i].appendTo(ul);
                    }
                }
                var els = ul.find('li');
                var b = 0;
                var cnt = [0,0,0];
                for(var i = 0; i < els.length; i++){
                    if(b > 2) b = 0;
                    cnt[b]++;
                    b++;
                }
                var lst = [cnt[0],cnt[0]+cnt[1]];

                els.each(function(i,e){
                    if(i < lst[0]){
                        $(e).appendTo(elsm[0]);
                    }else if(i < lst[1]){
                        $(e).appendTo(elsm[1]);
                    }else {
                        $(e).appendTo(elsm[2]);
                    }
                });
            }

            // size and position menu
            ul.show();
            this._resizeMenu();

            //scroll default list to top
            if(obj.form.location.selectType==3) {
                $('.ui-autocomplete').scrollTop(0);
            }
            ul.position( $.extend({
                of: this.element
            }, this.options.position ));

            if ( this.options.autoFocus ) {
                //this.menu.next();
            }
        },
        _renderItem: function(ul, item) {

            var s = '';

            if(!item.is_empty) s = '<span class="price-from"> '+ obj._('неизвестно') +'</span>';

            if(item.price) {
                s = '<span class="price-from"> ' + obj._('от') + ' ' + obj.fn.priceEcho(item.price, item.currency) + '</span>';
            }

            if (item.type!= 'country') {
                var label = item.label.split(', ');
                if(item.type == 'city') {
                    item.label = label[0]+(label[1]!==undefined?'<span class="gfont">, '+label[1]+'</span>':'');
                }
            }

            var el = $('<a>');
            if(!s) {
                el = $('<div>');
            }

            return $( "<li>" )
                .addClass(item.type + (selectedGeo.indexOf(item.id.toString()) != -1? ' ui-state-disabled': ''))
                .append(el
                    .addClass('os-clearfix')
                    .html(s + '<span class="label-wrap"><span class="label">' + item.label + '</span></span>') )
                .appendTo( ul );
        },

        _renderMenu: function( ul, items ) {

            selectedGeo = otpMain.form.location.view.getValue();

            var that = this;
            var type = null;
            var i = 1;
            otpMain.form.location.geo_list = [];

            $.each( items, function( index, item ) {

                item.type = item.id < 500? 'country': 'city';
                item.label = item.id < 500? item.name: item.name +', '+ item.countryName;
                item.value = item.name;

                if(type != item.type && item.type){
                    $( '<li>' )
                        .addClass('type-item')
                        .text(names[item.type])
                        .appendTo( ul );

                } else if(item.cnt && !item.type && !index) {
                    $( '<li>' )
                        .addClass('type-item')
                        .text(names['city'])
                        .appendTo( ul );
                }
                that._renderItemData( ul, item );

                if(type != item.type){
                    i = 1;
                }
                i++;
                type = item.type;
            });

            if(otpMain.form.location.geo_list && i <  2) {

                that._renderItemData( ul, {
                    is_empty: true,
                    label: obj._('Нет туров в ') + otpMain.form.location.geo_list[0].value
                });
            }

            if(obj.form.location.selectType == 3) {
                $('.ui-autocomplete').addClass('default-list')
                    .prepend($('<div>').addClass('list_bg').css('top', 462+'px'));
                $('.ui-autocomplete').on('scroll', function(){
                    var list = $(this).find('.list_bg');
                    var listHeight = 474, delay = 10; // фиксированная высота списка стилями
                    var top = $(this).scrollTop(); // величина прокрутки списка
                    if(top + listHeight > this.scrollHeight-delay) {
                        list.hide();
                    }
                    else {
                        list.show();
                    }
                    list.css('top', 462+$(this).scrollTop()+'px');
                })
            } else {
                $('.ui-autocomplete').removeClass('default-list');
            }
        }
    })

})(jQuery,otpMain);

/*********************/
/****** 	form/form.js	 ***********/
/*********************/
/**
 * Created by mtoy on 4/14/14.
 */

(function($,o){
    var f = function(){

        var input = {};
        var callback = {};
        var self = this;

        /**
         * Add callback "get/set value" for form field
         * @param n
         * @param $o
         * @param f
         */
        this.setInput = function(n, $o, f){
            input[n] = $o;
            callback[n] = f;
        };

        /**
         * Parse form data
         * @returns {*}
         */
        this.parse = function(){
            var query = otpMain.search.getQuery();

            for(var i in input){
                if(input.hasOwnProperty(i)) {

                    if(callback[i] && typeof callback[i] === 'function'){
                        callback[i](input[i], query);
                    } else {
                        query[i] = input[i].val();
                    }
                }
            }
            return query;
        };
    };

    o.form = new f();

})(jQuery,otpMain);


/*********************/
/****** 	form/location.js	 ***********/
/*********************/
/**
 * Created by mtoy on 4/14/14.
 */

(function($,o){

    var f = function(){

        var store = {};
        var self = this;
        this.selectType = 1;
        this.request = '';
        this.response = {};
        this.autocompleteType = 'autocomplete';
        this.object = false;
        this.callback = {};
        this.selectedSuggest = {};
        this.geo_list = [];
        this.is_closed = true;

        this.bind = function(n,f){
            if(this.callback[n] == undefined){
                this.callback[n] = [];
            }
            this.callback[n].push(f);
            return this;
        };

        var call = function(n,a,b,c){
            if(self.callback[n] && self.callback[n].length){
                for(var i in self.callback[n]){
                    if(typeof self.callback[n][i] == 'function' && self.callback[n].hasOwnProperty(i)){
                        self.callback[n][i](a,b,c);
                    }
                }
                return true;
            }
            return false;
        };

        this.setStore = function(k,v) {
            store[k] = v;
        };

        this.getStore = function(k) {
            return store[k]? store[k]: false;
        };

        /**
         * Search country or city
         * @param search
         * @param f
         */
        this.geoSuggest = function(search, f) {
            if(typeof search !== 'string') {
                console.error('type for search can be string!');
                f({'data': []});
                return false;
            }

            var params = {
                'api_session_token': o.apiKey,
                'lang': o.lang,
                'text': search
            };
            if(!search) params['with'] = 'price';

            $.ajax({
                url: o.config.suggestLink,
                type: 'GET',
                dataType: 'jsonp',
                data:  params,
                success: function(d) {

                    if(o.fn.checkError(d, o.form.location.geoSuggest, [search, f])) {
                        var data = typeof d.response === 'object'? d.response: d;

                        data.countries = typeof data.countries === 'undefined'? []: data.countries;
                        data.cities = typeof data.cities === 'undefined'? []: data.cities;

                        if(o.fn.isEmpty(data.countries) && o.fn.isEmpty(data.cities)) {
                            data.data = [{label: o._('Нам неизвестно о турах в ')+ '«'+ search +'»', value: search, is_empty: true}];
                        }

                        if(data && (!$.isEmptyObject(data.countries) || !$.isEmptyObject(data.cities))){

                            if(!search) search = '--';
                            data.data = $.merge(data.countries, data.cities);

                            store[search] = data.data;
                        }

                        f(data);
                    }
                }
            });
        };

        /**
         * Init location field
         * @param opt
         */
        this.init = function(opt){
            opt = opt || {};
            opt.autoFocus = opt.autoFocus || true;
            opt.appendTo = opt.appendTo || false;

            this.object = this.view.$[this.autocompleteType]({
                autoFocus: opt.autoFocus,
                appendTo: opt.appendTo,

                source: function(request, response) {

                    self.request = request;
                    var key;
                    if($.trim(request.term).length === 0){
                        key = '{empty_key}';
                        self.selectType = 2;
                    } else {
                        key = request.term;
                        if(key==='--') {
                            self.selectType = 3;
                        } else {
                            self.selectType = 1;
                        }
                    }

                    if(store[key] !== undefined){
                        if(!call('source',store[key],response)){
                            response(store[key]);
                        }
                        return;
                    }

                    var search = request.term;

                    if(key === '--') {
                        search = '';
                    }

                    self.geoSuggest(search, function(d){
                        if(d && d.data) {
                            if(!call('source', store[key], response)){
                                response(store[key]);
                            }
                        }
                    });
                },
                select: function(h,v){
                    self.selectedSuggest = v.item;
                    call('select', h, v);
                },
                response: function(event,ui) {

                    if(self.selectedSuggest.value!==self.object.val()
                        && self.selectedSuggest.label!==self.object.val()) {
                        self.selectedSuggest = {};
                    }

                    call('response',event,ui);
                },
                open: function(){

                    o.form.location.view.is_open = true;
                    call('open');
                },
                close: function(h){

                    if(!self.selectedSuggest.value) {
                        var rq = self.request.term;

                        if(rq === '--' && o.form.location.view.$.val().length) {
                            rq = o.form.location.view.$.val();
                        }

                        var rs = store[rq];

                        if(rs && rs[0]) {
                            var val = rs[0].name;

                            if(rq != '--') {
                                self.request.term = rq;
                                var s = val;

                                $.each(o.form.location.geo_list, function(k,v){
                                    if(v.label === val || v.value === val) {
                                        s = false;
                                        return false;
                                    }
                                });

                                if(s) {
                                    self.geoSuggest(s, function(d){
                                        if(d.data) {

                                            self.selectedSuggest = d.data[0];
                                            self.selectedSuggest.label = self.selectedSuggest.name +
                                                (typeof self.selectedSuggest.countryName !== 'undefined'? ', '+ self.selectedSuggest.countryName: ''),

                                            call('select', h, {'item': d.data[0]});
                                        }
                                    });

                                    $(this).val(val);
                                }
                            }
                        } else {

                            if(rq && rq !== '--') {
                                self.geoSuggest(rq, function(d){
                                    if(d.data) {

                                        self.selectedSuggest = d.data[0];
                                        self.selectedSuggest.label = self.selectedSuggest.name +
                                            (typeof self.selectedSuggest.countryName !== 'undefined'? ', '+ self.selectedSuggest.countryName: ''),

                                            call('select', h, {'item': d.data[0]});
                                    }
                                });
                            }

                        }
                    }

                    call('close');

                    setTimeout(function() {
                        o.form.location.view.is_open = false;
                    }, 300);
                },
                minLength: 2,
                delay: 500
            });

            //osGeo = 'Тунис';
            if(typeof osGeo !== 'undefined' && osGeo) {

                self.geoSuggest(osGeo, function(d){

                    if(d.data) {
                        self.selectedSuggest = d.data[0];

                        o.form.fromCity.view.updateCities(d.data[0], function(){
                            o.form.datepicker.updateDates(d.data[0]);
                        });
                    }
                });

                this.object.val(osGeo);
            }
        }
    };

    o.form.location = new f;

    // add trigger on hash change
    o.hash.addTrigger(function(){

        if(otpMain.hash.get('to', '').length && otpMain.hash.get('to', '').length < 100 && !o.form.location.view.getValue().length) {

            // get countries info
            otpMain.form.location.geoSuggest(otpMain.hash.get('to'), function(data){

                // format geo list to {id: {obj}, ...}
                var geo = {};
                $.each(data.data, function(i, item){
                    geo[item.id] = item;
                });

                var location;
                $.each(otpMain.hash.get('to').split(','), function(i, key){
                    if(+key && geo[$.trim(key)]) {

                        location = geo[$.trim(key)];
                        delete geo[$.trim(key)];

                        // set value to location input
                        otpMain.form.location.view.$.val(location.name);

                        otpMain.form.location.selectedSuggest = {
                            'id': location.id,
                            'value': location.name,
                            'label': location.name +(typeof location.countryName !== 'undefined'? ', '+ location.countryName: ''),
                            'countryName': location.countryName,
                            'name': location.name
                        };

                        // is no last geo? append to selected container
                        if(!$.isEmptyObject(geo)) {
                            otpMain.form.location.view.$geoBtn.find('span').trigger('click');

                        } else {
                            otpMain.form.fromCity.view.updateCities(otpMain.form.location.selectedSuggest, function(){
                                o.form.datepicker.updateDates(otpMain.form.location.selectedSuggest, function(){

                                    // add trigger on hash change for city from
                                    otpMain.form.fromCity.view.$.val(otpMain.hash.get('from', 1544));

                                });
                            });
                        }
                    }
                });
            });
        }
    }, 40);

    // bind to location select
    o.form.location.bind('select', function(h, v){

        o.form.fromCity.view.updateCities(v.item, function(){
            o.form.datepicker.updateDates(v.item);
        });
    });

})(jQuery,otpMain);


/*********************/
/****** 	form/fromCity.js	 ***********/
/*********************/
/**
 * Created by mtoy on 5/6/14.
 */

(function($,o){

    o.form.fromCity = new function(){
        var cities = {};

        this.get = function() {
            return cities;
        };

        this.set = function(cities) {
            cities = cities;
        };

        /**
         * Load cities from
         * @param f
         */
        this.getCities = function(f){
            if(!o.config.regionsLink) {
                f({'cities':[]});
                return;
            }

            $.ajax({
                url: o.config.regionsLink,
                type: 'POST',
                dataType: 'jsonp',
                data:  {
                    api_session_token: o.apiKey,
                    to: o.form.location.view.getValue().join(','),
                    lang: o.lang,
                    'with': 'price'
                },
                success: function(d) {
                    if(o.fn.checkError(d, o.form.fromCity.getCities, [f])) {
                        f(d);
                    }
                }
            });
        }
    }

})(jQuery,otpMain);

/*********************/
/****** 	form/tourtype.js	 ***********/
/*********************/
/**
 * Created by mtoy on 4/23/14.
 */

(function($,o){

    o.form.tourtype = new function() {

        /**
         * Load static data #10304
         * @param f
         */
        this.getStaticData = function(f){

            $.ajax({
                url: o.config.staticLink,
                type: 'GET',
                dataType: 'jsonp',
                data: {
                    api_session_token: o.apiKey,
                    lang: o.lang
                },
                success: function (resp) {

                    if(typeof f === 'function') {
                        f(resp);
                    }
                },
                error: function(){
                    f({'typeTours': {}});
                }
            });
        }
    };

    o.hash.addTrigger(function(){
        if(otpMain.hash.get('type', '')) {
            otpMain.form.tourtype.view.$el.val(otpMain.hash.get('type', ''));
        }
    }, 40);

})(jQuery,otpMain);



/*********************/
/****** 	form/duration.js	 ***********/
/*********************/
/**
 * Created by katra on 5/16/14.
 */
(function($, o){

    o.form.duration = new function() {

    };

    o.hash.addTrigger(function(){
        o.form.duration.view.setValue(otpMain.hash.get('length', 0));
    }, 40);

})(jQuery, otpMain);

/*********************/
/****** 	form/transport.js	 ***********/
/*********************/
/**
 * Created by katra on 5/19/14.
 */
(function($, o){

    o.form.transport = {};

    o.hash.addTrigger(function(){
        otpMain.form.transport.view.setValue(o.hash.get('transport', new String('')).split(','));
    }, 40);

})(jQuery, otpMain);

/*********************/
/****** 	form/datepicker.js	 ***********/
/*********************/
/**
 * Created by katra on 5/27/14.
 */
(function($,o){

    o.form.datepicker = new function(){
        var self = this;
        var data = {},
            dates = [];

        /**
         * Save current dates
         * @param d
         */
        this.setDates = function(d){
            if(!o.fn.isEmpty(d)) {
                data = d;
                dates = Object.keys(d);
                dates.sort(function(d1,d2){
                    if(self.parseISO8601(d1).getTime() > self.parseISO8601(d2).getTime())
                        return 1;
                    return -1;
                });

            } else {
                this.defaultDates();
            }
        };

        /**
         * Get current dates
         * @returns {Array}
         */
        this.getDates = function(with_durations){
            if(with_durations) return data;
            return dates;
        };

        /**
         * Get current durations
         * @param date
         * @returns {*}
         */
        this.getDuration = function(date) {
            if(data) {
                return data[o.form.datepicker.formatDate(date)];
            }
        };

        /**
         * Set default dates
         */
        this.defaultDates = function() {
            var now = new Date();
            var dateFrom = new Date(now.getTime()); // today
            var dateTo = new Date(now.getTime()+31536000000); // +365 days

            dates = [
                o.form.datepicker.format(dateFrom, 'y4-m0-d0'),
                o.form.datepicker.format(dateTo, 'y4-m0-d0'),
            ];
        };

        /**
         * Update durations
         * @param minDate
         * @param maxDate
         */
        this.refreshDuraion = function(minDate, maxDate) {

            if(+maxDate.getTime() < 0 || +minDate.getTime() < 0) {
                return false;
            }

            // check is any date #10302
            var currentDates = o.form.datepicker.view.getValue();
            if(!currentDates[0]) { // from any
                minDate = new Date();
            }

            if(!currentDates[1]) { // to any

                if(dates) {
                    maxDate = new Date(dates[dates.length-1]);
                } else {
                    maxDate = new Date(new Date(minDate.getTime()).setMonth(new Date(minDate.getTime()).getMonth() + 6)); // minDate +6 month
                }
            }

            // get all available durations between dates
            var durations = [],
                diffDays = Math.round((maxDate.getTime() - minDate.getTime()) / (1000*60*60*24));

            if(diffDays > -1) {

                durations = [];

                $.each(o.fn.range(0, diffDays+1), function(i){

                    durations = durations.concat((data[o.form.datepicker.formatDate(
                        new Date(minDate.getTime() +  ((i+1) * 86400000)) // ++ 1 day
                    )] || '').split(',')).filter(function(v, i, self){
                        return v && self.indexOf(v) === i;
                    });
                });
            }

            o.form.duration.view.initSelect(durations);
        };

        /**Parses string formatted as YYYY-MM-DD to a Date object.
         * If the supplied string does not match the format, an
         * invalid Date (value NaN) is returned.
         * @param {string} dateStringInRange format YYYY-MM-DD, with year in
         * range of 0000-9999, inclusive.
         * @return {Date} Date object representing the string.
         */
        this.parseISO8601 = function(dateStringInRange) {
            var isoExp = /^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,
                date = new Date(NaN), month,
                parts = isoExp.exec(dateStringInRange);

            if(parts) {
                month = +parts[2];
                date.setFullYear(parts[1], month - 1, parts[3]);
                if(month != date.getMonth() + 1) {
                    date.setTime(NaN);
                }
            }
            return date;
        };

        this.formatDate = function(d) {
            return d.getFullYear() +'-'+ ("0" + (d.getMonth() + 1)).slice(-2) +'-'+ ("0" + d.getDate()).slice(-2)
        };
    };

    o.form.datepicker.mounth = [o._('января'),o._('февраля'),o._('марта'),o._('апреля'),o._('мая'),o._('июня'),o._('июля'),o._('августа'),o._('сентября'),o._('октября'),o._('ноября'),o._('декабря')];
    o.form.datepicker.day_min = [o._('вс'),'пн','вт','ср','чт','пт','сб'];

    /**
     * Date format
     * @param date
     * @param format
     * @returns {*}
     */
    o.form.datepicker.format = function(date, format) {

        var parts = format.split(/[\s,.-]+/);
        
        $.each(parts, function(i, part){
            switch(part.replace(/[^a-zA-Z0-9]/g, '')) {
                case 'D':
                    format = format.replace('D', o.form.datepicker.day[date.getDay()]); // day name
                    break;
                case 'd':
                    format = format.replace('d', date.getDate()); // date
                    break;
                case 'd2':
                    format = format.replace('d2', o.form.datepicker.day_min[date.getDay()]); // day name short
                    break;
                case 'M':
                    format = format.replace('M', o.form.datepicker.mounth[date.getMonth()]); // month name
                    break;
                case 'm':
                    format = format.replace('m', o.form.datepicker.mounth[date.getMonth()].slice(0,3)); // month name short
                    break;
                case 'd0':
                    format = format.replace('d0', (date.getDate() < 10 ? '0' : '') + date.getDate()); // dd
                    break;
                case 'm0':
                    format = format.replace('m0', (date.getMonth()+1 < 10 ? '0' : '') + (date.getMonth()+1)); // mm
                    break;
                case 'y4':
                    format = format.replace('y4', date.getFullYear()); // yyyy
                    break;
            }
        });

        return format;
    };

    /**
     * Update dates
     * @param item
     * @param f
     */
    o.form.datepicker.updateDates = function(item, f) {
        if(!item.id) {
            var dates = o.form.datepicker.getDates();
            if(typeof f === 'function') {
                f({}, dates);
            }
            return;
        }

        $.ajax({
            url: o.config.datesLink,
            type: 'POST',
            dataType: 'jsonp',
            data:  {
                api_session_token: o.apiKey,
                to: o.form.location.view.getValue().join(','),
                from: o.form.fromCity.view.$.val()
            },
            success: function(d) {

                if(o.fn.checkError(d, o.form.datepicker.updateDates, [item, f])) {
                    o.form.datepicker.setDates(d.dates);

                    var dates = o.form.datepicker.getDates();

                    var minDate = o.form.datepicker.parseISO8601(dates[0]);

                    minDate.setHours(0,0,0,0);

                    var dateFrom = o.form.datepicker.view.dateFirst.date;
                    var dateTo = o.form.datepicker.view.dateSecond.date;

                    if(dateFrom && o.fn.in_array(o.form.datepicker.formatDate(dateFrom), dates)) {
                        minDate = dateFrom;
                    }

                    var maxDate = new Date(minDate.getTime());

                    if(dateTo && o.fn.in_array(o.form.datepicker.formatDate(dateTo) , dates)
                        || dates.length == 2) {
                        maxDate = dateTo;
                    }

                    o.form.datepicker.view.setValue([minDate, maxDate]);

                    o.form.datepicker.refreshDuraion(minDate, maxDate);

                    // update datepicker
                    if(!o.form.datepicker.view.$from.val()) {
                        o.form.datepicker.view.dateFirst.update();
                    }
                    if(!o.form.datepicker.view.$to.val()) {
                        o.form.datepicker.view.dateSecond.update();
                    }

                    if(typeof f === 'function') {
                        f(d, dates);
                    }
                }
            }
        });
    };

    o.form.datepicker.defaultDates();

    o.hash.addTrigger(function(){
        otpMain.form.datepicker.view.setValue([otpMain.hash.get('checkIn',''), otpMain.hash.get('checkTo','')], true);
    },40);

})(jQuery, otpMain);


/*********************/
/****** 	result.js	 ***********/
/*********************/
/**
 * Created by mtoy on 5/23/14.
 */

(function($,o){

    var f = function(){

        this.callback = [];
        var self = this;

        self.bind = function(n,f) {
            self.callback[n] = f;
            return this;
        };
        var call = function(n,p) {
            if(self.callback[n]){
                if(typeof self.callback[n] == 'function'){
                    self.callback[n](p);
                    return true;
                }
            }
            return false;
        };

        /**
         * Generate tour link
         * @param offer
         * @param tab
         * @returns {string}
         */
        this.getLink = function(offer, tab){
            var n = o.hash.get();
            n.tab = tab || 'tour';

            if(offer){
                n.tourId = offer.tourId;
                n.offerId = o.fn.getFirst(offer.offers)['offerId'];
            }

            return window.location.protocol +'//'+ window.location.hostname + window.location.pathname + window.location.search +'#'+ o.hash.compile(n, true);
        };

        /**
         * Calling when form submit
         */
        this.reset = function() {

        }
    };

    o.result = new f();

})(jQuery,otpMain);


/*********************/
/****** 	tour/tour.js	 ***********/
/*********************/
/**
 * Created by mtoy on 6/12/14.
 */

(function($,o){

    var f = function(){
        var self = this;

        this.offer = {};
        this.callback = [];

        /**
         * Bind custom callbacks
         * @param n
         * @param f
         * @returns {f}
         */
        this.bind = function(n,f) {
            self.callback[n] = f;
            return this;
        };

        /**
         * Run custom callbacks
         * @param n
         * @param p
         * @returns {boolean}
         */
        var call = function(n,p) {
            if(self.callback[n]){
                if(typeof self.callback[n] == 'function'){
                    self.callback[n](p);
                    return true;
                }
            }
            return false;
        };

        /**
         * Load tour data
         * @param params
         * @param f
         */
        this.getData = function(params, f) {

            params.offerId = 0; // #10293

            $.ajax({
                url: o.config.tourLink,
                type: 'POST',
                dataType: 'jsonp',
                data:  {
                    api_session_token: o.apiKey,
                    tourId: params.tourId,
                    offerId: params.offerId,
                    lang: o.lang
                },
                success: function(d) {
                    if(o.fn.checkError(d, o.tour.getData, [params, f])) {
                        if(typeof f === 'function') {
                            f(d);
                        }
                    }
                }
            });
        };
    };

    o.tour = new f;

    Galleria.configure({
        debug: false,
        transition: 'fade',
        height: 370,
        width: 715,
        showCounter: false,
        autoplay: 4500,
        imageCrop: true,
        showInfo: false,
        thumbnails: false,
        extend: function() {
            /* Functions to help with the little image navigation dots. */
            var gallery = this;

            this.bind('image', function(e) {
                var target = this._active;
                jQuery(otpMain.fn.prefix('js-gallery-dot','.')).removeClass('selected').each(function (index, elem) {
                    var $elem = $(elem);
                    if (index == target) { $elem.addClass('selected'); }
                })
            });

            jQuery(otpMain.fn.prefix('js-gallery-dot','.')).click(function(event) {
                var $target = $(event.target);
                jQuery(otpMain.fn.prefix('js-gallery-dot','.')).removeClass('selected');
                $target.addClass('selected');
                gallery.show($target.data('idx'));
            });

            this.bind('image', function(e){
                var $el = $(e.target);
                $el.find('img').attr('alt', $('body').find('h1').html());
            });
        }
    });

    hs.lang.loadingText = o._('Загрузка') + '. ' + o._('Пожалуйста') + ', ' + o._('подождите') + '...';
    hs.lang.fullExpandTitle = o._('Развернуть до полного размера');
    hs.lang.restoreTitle = o._('Кликните для закрытия картинки') + ', ' + o._('нажмите и удерживайте для перемещения');
    hs.lang.focusTitle = o._('Сфокусировать');
    hs.lang.loadingTitle = o._('Нажмите для отмены');

    hs.lang.creditsText = '';
    hs.lang.creditsTitle = '';
    hs.lang.previousText = o._('Предыдущий');
    hs.lang.nextText = o._('Следующий');
    hs.lang.moveText = o._('Переместить');
    hs.lang.closeText = o._('Закрыть');
    hs.lang.closeTitle = o._('Закрыть') + ' (Esc)';
    hs.lang.resizeTitle = o._('Размер');
    hs.lang.playText = o._('Показывать');
    hs.lang.playTitle = o._('Начать показ слайдов') + ' (' + o._('пробел') + ')';
    hs.lang.pauseText = o._('Пауза');
    hs.lang.pauseTitle = o._('Приостановить показ слайдов') + ' (' + o._('пробел') + ')';
    hs.lang.previousTitle = o._('Предыдущий') + ' (' + o._('стрелочка влево') + ')';
    hs.lang.nextTitle = o._('Следующий') + ' (' + o._('стрелочка вправо') + ')';
    hs.lang.moveTitle = o._('Переместить');
    hs.lang.fullExpandText = o._('Большой размер');
    hs.lang.number = o._('Картинка') + ' %1 ' + o._('из') + ' %2';


    //hs.outlineType = 'rounded-white';
    hs.numberOfImagesToPreload = 0;
    hs.showCredits = false;
    hs.graphicsDir = 'https://export.otpusk.com/os/highslide/graphics/';
    hs.align = 'center';
    hs.transitions = ['expand', 'crossfade'];
    hs.outlineType = 'rounded-white';
    hs.wrapperClassName = 'controls-in-heading';
    hs.fadeInOut = true;
    //hs.dimmingOpacity = 0.75;

    // Add the controlbar
    if (hs.addSlideshow) hs.addSlideshow({
        //slideshowGroup: 'group1',
        interval: 5000,
        repeat: false,
        useControls: true,
        fixedControls: false,
        overlayOptions: {
            opacity: 1,
            position: 'top right',
            hideOnMouseOut: false
        }
    });

})(jQuery, otpMain);



/*********************/
/****** 	view/form/form.js	 ***********/
/*********************/
/**
 * Created by mtoy on 5/6/14.
 */

(function($, o){

    var f = function(){
        var self = this;

        this.$ = undefined;

        var $formWrap,
            $formInfo,
            $form,
            $searchTitle,
            $fieldsCore,
            $location,
            $dates,
            $duration,
            $tourType,
            $button,
            $toggleLink,
            $fieldsExtra,
            $fromCity,
            $transport,
            $results;

        /*
         *  Check osContainer var to get results container
         */
        this.getResultsDefaultContainer = function () {
            // Set default tour container
            var $resultsContainer = o.view.$;
            var targetTourContainerId;
            var isTargetTourContainerElementExists = false;

            // Check for osContainer setting
            if (typeof osContainer != 'undefined') {
                if (typeof osContainer === 'string') {
                    targetTourContainerId = osContainer;
                    osContainer = document.getElementById(osContainer);
                }
                if ($(osContainer).is('div')) {
                    isTargetTourContainerElementExists = true;
                    $resultsContainer = $(osContainer);
                }
            }
            // Hide current tour view and attach to container on load
            if (!isTargetTourContainerElementExists && targetTourContainerId) {
                $resultsContainer = $("<div>", { "class": o.fn.prefix('tour-container') });

                // Move to target container on page load
                $(document).ready(function () {
                    //Find target container element
                    osContainer = document.getElementById(targetTourContainerId);
                    var $targetTourContrainer = $(osContainer);

                    if ($targetTourContrainer.is("div")) {
                        // Attach to target if exists
                        $resultsContainer.appendTo($targetTourContrainer);
                    }
                    else {
                        // Attach to default if does not exists
                        $resultsContainer.appendTo(o.view.$);
                    }
                })
            }

            return $resultsContainer;
        };

        // init excursion form
        this.init = function(){

            this.$ = $('<div>')
                .addClass(o.fn.prefix('container'))
                .attr('id',o.fn.prefix('container'));

                $formInfo = $('<div>')
                    .addClass(o.fn.prefix('search-container'))
                    .attr('id',o.fn.prefix('search-container'))
                    .appendTo(this.$);

                    $form = $('<form>')
                        .addClass(o.fn.prefix('search-form'))
                        .appendTo($formInfo);

                        $searchTitle = $('<div>')
                            .addClass(o.fn.prefix('search-title'))
                            .append(o._('Экскурсионные туры') +' ')
                            .append(
                                $('<span>').append(
                                    $('<b>')
                                ).append(' '+ o._('программ от') +' ')
                                    .append(
                                        $('<b>')
                                    ).append(' '+ o._('операторов'))
                            ).on('init', function(){

                                var that = this;
                                o.fn.getCountTours(function(data){

                                    $(that).find('b:eq(0)').text(data.tours);
                                    $(that).find('b:eq(1)').text(data.operators);

                                });
                            }).trigger('init')
                            .appendTo($form);

                        $fieldsCore = $('<div>')
                            .addClass('clearfix')
                            .appendTo($form);

                            // location
                            $location = $('<div>')
                                .addClass(o.fn.prefix('search-to'))
                                .appendTo($fieldsCore);

                            // dates
                            $dates = $('<div>')
                                .addClass(o.fn.prefix('search-dates'))
                                .appendTo($fieldsCore);

                            // duration
                            $duration = $('<div>')
                                .addClass(o.fn.prefix('search-duration'))
                                .appendTo($fieldsCore);

                            // tour type
                            $tourType = $('<div>')
                                .addClass(o.fn.prefix('search-type'))
                                .appendTo($fieldsCore);

                        // toggle link
                        $toggleLink = $('<div>')
                            .addClass(o.fn.prefix('search-extended'))
                            .append(
                                $('<span>')
                                    .addClass(o.fn.prefix('extended-btn'))
                                    .addClass(o.fn.prefix('und'))
                                    .text(o._('Уточнить город отправления и транспорт') + '?')
                                    .on('click', function(){
                                        $fieldsExtra.toggle();
                                        $toggleLink.toggleClass('opened');
                                        return false;

                                    // show extend form if filters changed #10159
                                    }).on('init', function(){

                                        var that = this;
                                        if(+o.hash.get('from') || (o.hash.get('transport') && o.hash.get('transport') !== 'bus,air,ship')) {
                                            $(function(){
                                                $(that).trigger('click');
                                            });
                                        }
                                    }).trigger('init')
                            ).appendTo($form);

                        $fieldsExtra = $('<div>')
                            .addClass(o.fn.prefix('search-extended-container clearfix'))
                            .css('display', 'none')
                            .appendTo($form);

                            // from city
                            $fromCity = $('<div>')
                                .addClass(o.fn.prefix('search-from'))
                                .appendTo($fieldsExtra);

                            // transport
                            $transport = $('<div>')
                                .addClass(o.fn.prefix('search-transport clearfix'))
                                .appendTo($fieldsExtra);

                        // button
                        $button = $('<input>')
                            .addClass(o.fn.prefix('search-submit'))
                            .addClass(o.fn.prefix('search-submit-top'))
                            .attr('type', 'submit')
                            .val(o._('Найти туры'))
                            .on('click', function(){

                                if(!o.form.location.view.getValue().length) {
                                    alert(o._('Выберите страну или курорт'));
                                    return false;
                                }

                                otpMain.search.setHash(otpMain.form.parse());

                                if(typeof otpMain.osTarget !== 'undefined' && otpMain.osTarget) {
                                    if(typeof otpMain.osTarget !== 'string') {
                                        location.reload();
                                    }

                                    var hash = otpMain.hash.get();
                                    var localUri = window.location.hostname+window.location.pathname+window.location.search;
                                    var osTargetD = otpMain.osTarget.replace('http://' , '');

                                    if(localUri.indexOf(osTargetD) < 0) {

                                        if(typeof osTargetBlank !== 'undefined') {
                                            window.open(
                                                otpMain.osTarget +'#'+ otpMain.hash.compile(hash,true),
                                                '_blank'
                                            );
                                            return false;
                                        } else {
                                            window.location.href = otpMain.osTarget +'#'+ otpMain.hash.compile(hash,true);
                                        }
                                        return false;
                                    }
                                }

                                o.search.page = 1;
                                o.search.submit(true);
                                return false;

                            }).appendTo($form);

            // results container
            $results = $('<div>')
                .addClass(o.fn.prefix('r-container'));
        };

        /**
         * run on document ready
         */
        this.render = function(container){

            self.init();

            container = container || o.view.$;

            o.form.location.view.render($location);
            o.form.datepicker.view.render($dates);
            o.form.duration.view.render($duration);
            o.form.tourtype.view.render($tourType);
            o.form.fromCity.view.render($fromCity);
            o.form.transport.view.render($transport);

            this.$.appendTo(container);

            // render results to
            var resultsContainer = this.getResultsDefaultContainer();
            o.result.view.render($results);
            $results.appendTo(resultsContainer);

            // autocomplete init
            o.form.location.autocompleteType = 'otpautocomplete'; //set autocomplete type
            o.form.location.init();
        }
    };

    o.form.view = new f();

})(jQuery, otpMain);


/*********************/
/****** 	view/form/location.js	 ***********/
/*********************/
/**
 * Created by mtoy on 5/6/14.
 */

(function($,o){

    var f = function(){

        this.$ = undefined;
        this.$toggle = undefined;
        this.$geoList = undefined;
        this.$geoBtn = undefined;
        this.is_open=false;

        var self = this;

        /**
         * Init location field
         * @returns {f}
         */
        this.init = function(){

            this.$ = $('<input>')
                .addClass('ui-autocomplete-input')
                .attr('placeholder', o._('Страна, курорт'))
                .on({click: function(){

                    if(!$(this).val()) {
                        $(this).otpautocomplete("search", '--');
                    } else {
                        $(this).otpautocomplete("search", $(this).val());
                    }

                }, keyup: function(){

                    o.form.location.selectedSuggest.id = 0; // #4815

                    if(!$(this).val()) {
                        $(this).otpautocomplete("search", '--');
                    }

                }, blur: function() {
                    $('.ui-autocomplete').removeClass('default-list');
                }
                });

            this.$toggle = $('<div>')
                .addClass(o.fn.prefix('autocomplete-toggle_element'))
                .on('click', function(){

                    if(!self.is_open) {
                        self.$.focus().otpautocomplete("search", '--');
                    }
                });

            this.$geoList = $('<div>')
                .addClass(o.fn.prefix('dir-list'));

            this.$geoBtn = $('<div>')
                .addClass(o.fn.prefix('add-dir-btn'))
                .append(
                    $('<span>')
                        .addClass(o.fn.prefix('und'))
                        .text(o._('Добавить пункт назначения'))
                        .on('click', function(){

                            if(+o.form.location.selectedSuggest['id']) {

                                self.$geoList.append(
                                    $('<input>').attr({
                                        'type': 'hidden',
                                        'name': 'i[]',
                                        'value': +o.form.location.selectedSuggest['id'],
                                        'country': (+o.form.location.selectedSuggest['id'] > 500?
                                            o.form.location.selectedSuggest['countryName']: o.form.location.selectedSuggest['name']),
                                        'city': (+o.form.location.selectedSuggest['id'] > 500?
                                            o.form.location.selectedSuggest['name']: '')
                                    })
                                ).append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('dir-item'))
                                        .append(o.form.location.selectedSuggest['label'])
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('dir-remove'))
                                                .on('click', function(){
                                                    $(this).parent().prev().remove();
                                                    $(this).parent().remove();
                                                })
                                        )
                                );

                                // clean autocomplete
                                self.$.val('');
                                o.form.location.selectedSuggest = {};
                            }

                            return false;
                        })
                );

            return this;
        };

        /**
         * Return all location ids
         * @returns {*}
         */
        this.getValue = function(){
            var ids = $.map(self.$geoList.find('input'), function(item){ // places
                return $(item).val();
            });

            if(o.form.location.selectedSuggest.id) {
                ids.push(o.form.location.selectedSuggest.id);
            }
            return ids;
        };

        /**
         * Return all location names
         * @returns {*}
         */
        this.getGeoData = function() {
            var geo = $.map(self.$geoList.find('input'), function(item){ // places

                return {
                    'country': $(item).attr('country'),
                    'city': $(item).attr('city')
                };
            });

            if(+o.form.location.selectedSuggest.id) {
                geo.push({
                    'country': +o.form.location.selectedSuggest['id'] > 500?
                        o.form.location.selectedSuggest['countryName']: o.form.location.selectedSuggest['name'],
                    'city': +o.form.location.selectedSuggest['id'] > 500?
                        o.form.location.selectedSuggest['name']: ''
                });
            }
            return geo;
        };

        /**
         * run on document ready
         */
        this.render = function($el){
            this.init();

            //location parse
            o.form.setInput('to', self, function($o, q){
                q.to = $o.getValue().join(',');
            });

            $el.append(this.$);
            $el.append(this.$toggle);
            $el.append(this.$geoList);
            $el.append(this.$geoBtn);

            return this;
        };
    };

    o.form.location.view = new f();

})(jQuery,otpMain);

/*********************/
/****** 	view/form/fromCity.js	 ***********/
/*********************/
/**
 * Created by mtoy on 5/6/14.
 */

(function($,o){

    var f = function(){

        this.$ = undefined;
        var self = this;

        /**
         * Init field
         * @returns {f}
         */
        this.init = function($el){

            $el.append(
                $('<div>')
                .addClass('fl')
                .text(o._('Из'))
            );

            $el.append(
                $('<label>')
                    .addClass(o.fn.prefix('search-label'))
                    .append(
                        self.$ = $('<select>')
                            .addClass(o.fn.prefix('block_select'))
                    )
            );

            // init cities default list
            $.each(o.config.citiesFrom, function(i, item){
                self.$.append(
                    $('<option>').val(item.id).text(item.rel)
                );
            });

            return this;
        };

        /**
         * Set options
         * @param d
         */
        this.setOptions = function(d, f) {
            var curVal = self.$.val();

            if(typeof d.towns === 'object') {

                self.$.empty().append(
                    $('<option>').val(0).text(o._('Любой город'))
                );

                $.each(d.towns, function(i, item){
                    self.$.append(
                        $('<option>').val(item.id).text(item.name).attr('selected', +curVal == +item.id)
                    );
                });
            }

            if(typeof f === 'function') {
                f(d);
            }
        };

        /**
         * Update cities from
         * @param item
         */
        self.updateCities = function(item, f) {
            o.form.fromCity.getCities(function(d){
                self.setOptions(d, f);
            });
        };

        /**
         * run on document ready
         */
        this.render = function($el){
            self.init($el);

            o.form.setInput('from', this.$, function($o, q){
                q.from = $o.val();
            });

            return self;
        };
    };

    o.form.fromCity.view = new f();

})(jQuery,otpMain);

/*********************/
/****** 	view/form/duration.js	 ***********/
/*********************/
/**
 * Created by katra on 5/16/14.
 */
(function($, o) {
    var f= function() {
        this.$ = undefined;
        var self = this;

        /**
         * Init field
         * @returns {f}
         */
        this.init = function($el) {

            $('<label>')
                .addClass(o.fn.prefix('search-label'))
                .append(
                    this.$ = $('<select>')
                        .addClass(o.fn.prefix('block_select'))
                ).appendTo($el);

            return this;
        };

        /**
         * Refresh cities list
         * @param duration
         */
        this.initSelect = function(duration) {

            var curPeriod = self.$.val();
            self.$.empty();


            self.$.append(
                    $('<option>').attr('disabled', 'disabled').text(o._('Длительность')).attr('selected', true)
                ).append(
                    $('<option>').text(o._('Любая длительность')).val(0)
                );

            // init cities list
            $.each(o.config.duration, function(i, item){

                if(duration && !o.fn.in_array(item.value.toString(), duration)) {
                    return;
                }

                self.$.append(
                    $('<option>')
                        .val(item.value)
                        .text(item.label)
                        .attr('selected', +curPeriod?
                            (+curPeriod == +item.value? true: false):
                            (+o.hash.get('l') == +item.value? true: false))
                );
            });
        };

        /**
         * Set city from value
         * @param val
         */
        this.setValue = function(val){
            if(typeof this.$ !== 'undefined') {
                this.$.val(val);
            }
        };

        /**
         * Render duration field
         * @param $el
         * @returns {f}
         */
        this.render = function($el){
            this.init($el);
            this.initSelect();

            o.form.setInput('length', this.$, function($o, q){
                q.length = +$o.val()? +$o.val(): 0;
                q.lengthTo = +$o.val()? (+$o.val() + 2): 0;
            });

            return this;
        };
    };
    o.form.duration.view = new f();

})(jQuery, otpMain);

/*********************/
/****** 	view/form/transport.js	 ***********/
/*********************/
/**
 * Created by katra on 5/19/14.
 */
(function($, o){
    var f = function(){
        this.$ = undefined;
        var self = this;

        /**
         * set actual checkboxes
         * @param a
         */
        this.setValue = function(a){
            if(!a[0]) return;
            this.$.parent().find('input').prop('checked', false).each(function(n, e){
                var $me = $(e);
                for(var i in a) {
                    if($me.prop('value') == a[i] && a.hasOwnProperty(i)) {
                        $me.prop('checked', true);
                    }
                }
            });
        };

        /**
         * get checked value
         * @returns {Array}
         */
        this.getValue = function(){
            var r = [];
            this.$.parent().find('input:checked').each(function(i,e){
                r.push($(e).val());
            });

            return r;
        };

        /**
         * Init fields transport
         * @returns {f}
         */
        this.init = function($el){

            this.$ = $('<div>')
                .addClass(o.fn.prefix('search-transport-title'))
                .text(o._('Транспорт'))
                .appendTo($el);

            $.each(o.config.transport, function(i, item){
                $el.append(
                    $('<label>').append(
                        $('<input>')
                            .attr('type', 'checkbox')
                            .attr('value', item.value)
                    ).append(
                        $('<span>').text(item.label)
                    )
                )
            });

            return this;
        };

        /**
         * Print transport name
         * @param key
         * @returns {*}
         */
        this.printTransport = function(key) {
            var $transports = {
                'air': o._('авиа'),
                'bus': o._('автобус'),
                'ship': o._('корабль'),
                'no': o._('без транспорта')
            };
             return $transports[key];
        };

        /**
         * Render fields transport
         * @param $el
         * @returns {f}
         */
        this.render = function($el){
            this.init($el).setValue(['bus', 'air', 'ship']);

            o.form.setInput('transport', self, function($o, q){
                q.transport = $o.getValue().join(',');
            });

            return this;
        };
    };

    o.form.transport.view = new f();

})(jQuery, otpMain);

/*********************/
/****** 	view/form/tourtype.js	 ***********/
/*********************/
/**
 * Created by vitaliy on 20.09.16.
 */

(function($, o){

    var f = function() {

        var self = this;
        this.$ = undefined;
        this.$el = undefined;

        /**
         * Init field tour-type
         */
        this.init = function(typeTours) {

            typeTours = typeTours || {};

            self.$ = $('<label>')
                .addClass(o.fn.prefix('search-label'))
                .append(
                    this.$el = $('<select>')
                        .append(
                            $('<option>').attr('disabled', 'disabled').text(o._('Тип тура')).attr('selected', true)
                        ).append(
                            $('<option>').text(o._('Любой тип тура')).val('')
                        )
                        .append(
                            $('<option>').text(o._('Пляж и экскурсии') +(+typeTours['beach']? ' ('+ typeTours['beach'] +')': '')).val('beach')
                        ).append(
                            $('<option>').text(o._('Горные лыжи и экскурсии') +(+typeTours['ski']? ' ('+ typeTours['ski'] +')': '')).val('ski')
                        ).append(
                            $('<option>').text(o._('Туры выходного дня') +(+typeTours['weekend']? ' ('+ typeTours['weekend'] +')': '')).val('weekend')
                        ).append(
                            $('<optgroup>')
                                .attr('label', o._('Туры для школьников'))
                                .append(
                                    $('<option>').text(o._('Осенние каникулы') +(+typeTours['autumn']? ' ('+ typeTours['autumn'] +')': '')).val('autumn')
                                ).append(
                                $('<option>').text(o._('Зимние каникулы') +(+typeTours['winter']? ' ('+ typeTours['winter'] +')': '')).val('winter')
                            ).append(
                                $('<option>').text(o._('Весенние каникулы') +(+typeTours['spring']? ' ('+ typeTours['spring'] +')': '')).val('spring')
                            ).append(
                                $('<option>').text(o._('Летние каникулы') +(+typeTours['summer']? ' ('+ typeTours['summer'] +')': '')).val('summer')
                            )
                        ).append(
                            $('<optgroup>')
                                .attr('label', o._('Праздничные туры'))
                                .append(
                                    $('<option>').text(o._('Новый год и Рождество') +(+typeTours['christmas']? ' ('+ typeTours['christmas'] +')': '')).val('christmas')
                                ).append(
                                $('<option>').text(o._('8 марта') +(+typeTours['womens']? ' ('+ typeTours['womens'] +')': '')).val('womens')
                            ).append(
                                $('<option>').text(o._('День святого Валентина') +(+typeTours['valentines']? ' ('+ typeTours['valentines'] +')': '')).val('valentines')
                            ).append(
                                $('<option>').text(o._('Майские праздники') +(+typeTours['mays']? ' ('+ typeTours['mays'] +')': '')).val('mays')
                            )
                        ).append(
                            $('<option>').text(o._('Фестивали и концерты') +(+typeTours['gala']? ' ('+ typeTours['gala'] +')': '')).val('gala')

                        ).on('change', function(){

                            // reset dates #10306
                            if(['autumn','winter','spring','summer','christmas','womens','valentines','mays'].indexOf($(this).val()) != -1) {

                                o.form.datepicker.view.$fromAny.children().trigger('click');
                                if(!o.form.datepicker.view.$fromAny.find('input:checkbox').prop('checked')) {
                                    o.form.datepicker.view.$fromAny.children().trigger('click');
                                }
                                o.form.datepicker.view.$toAny.children().trigger('click');
                                if(!o.form.datepicker.view.$toAny.find('input:checkbox').prop('checked')) {
                                    o.form.datepicker.view.$toAny.children().trigger('click');
                                }
                            }
                        })
                )
        };

        /**
         * Render tour type
         * @param $el
         */
        this.render = function($el) {

            // load type tour counts and render field
            o.form.tourtype.getStaticData(function(data){

                self.init(data.typeTours);

                $el.append(self.$);

                o.form.setInput('type', self.$el, function($o, q){
                    if($o.val()) {
                        q.type = $o.val();
                    }
                });
            });
        }
    };

    o.form.tourtype.view = new f;

})(jQuery, otpMain);

/*********************/
/****** 	view/form/datepicker.js	 ***********/
/*********************/
/**
 * Created by katra on 5/27/14.
 */
(function($, o){
    var f = function(){

        this.$ = undefined;
        this.$prompt = undefined;
        this.$from = undefined;
        this.$to = undefined;
        this.$fromAny = undefined;
        this.$toAny = undefined;

        var self = this;
        var now = new Date();

        /**
         * get the datepicker values
         * @returns {Array}
         */
        this.getValue = function(){
            var now = new Date();
            now.setHours(0,0,0,0);

            // set date first by default
            if(self.$from.val() && now.valueOf() > self.dateFirst.date.valueOf()) {
                self.dateFirst.setValue(now.getTime() + (14*24*60*60*1000)); // +14 days
            }

            // set date to by default
            if(self.$to.val()) {
                if(self.$from.val()) {
                    if(self.dateFirst.date.valueOf() > self.dateSecond.date.valueOf()) {
                        self.dateSecond.setValue(self.dateFirst.date.getTime() + (7*24*60*60*1000)); // +7 days
                    }
                }
            }
            
            return [
                self.$from.val()? o.form.datepicker.format(self.dateFirst.date, 'y4-m0-d0'): '',
                self.$to.val()? o.form.datepicker.format(self.dateSecond.date, 'y4-m0-d0'): ''
            ];
        };

        /**
         * Set the datepicker values
         * @param a
         */
        this.setValue = function(a, is_force){

            if(self.dateFirst && self.dateSecond){

                if(self.$from.val() || is_force) {
                    if(a[0]) {
                        self.dateFirst.setValue(a[0]);
                    }
                }

                if(self.$to.val() || is_force) {
                    if(a[1]) {
                        self.dateSecond.setValue(a[1]);
                    }
                }
            }
        };

        /**
         * Init date fields
         */
        this.init = function($el) {
            self.$prompt = $('<span>')
                .text(o._('Выберите даты начала тура'))
                .addClass(o.fn.prefix('search-dates-popup'))
                .addClass('exs_tip-active')
                .appendTo($el);

            self.$ = $('<div>')
                .addClass(o.fn.prefix('search-dates-wrap'))
                .addClass(o.fn.prefix('search-cols clearfix'))
                .on('mouseenter', function () {
                    $('.exs_search-dates').addClass('exs_tip-hovered');
                })
                .on('mouseleave', function () {
                    $('.exs_search-dates').removeClass('exs_tip-hovered');
                })
                .appendTo($el);

            $('<div>')
                .addClass(o.fn.prefix('datepicker-wrap'))
                .addClass(o.fn.prefix('datepicker-wrap-1'))
                .addClass(o.fn.prefix('search-col'))
                .append(
                    self.$from = $('<input>')
                        .addClass(o.fn.prefix('datepicker'))
                        .addClass(o.fn.prefix('datepicker-start'))
                        .attr('readonly', 'readonly')
                        .attr('placeholder', o._('с'))
                ).appendTo(this.$);

            $('<div>')
                .addClass(o.fn.prefix('datepicker-wrap'))
                .addClass(o.fn.prefix('datepicker-wrap-2'))
                .addClass(o.fn.prefix('search-col'))
                .append(
                    self.$to = $('<input>')
                        .addClass(o.fn.prefix('datepicker'))
                        .addClass(o.fn.prefix('datepicker-end'))
                        .attr('readonly', 'readonly')
                        .attr('placeholder', o._('по'))
                ).appendTo(this.$);

            // init datepicker from
            var minDate, maxDate;
            self.dateFirst = self.$from.datepicker({
                format:'D d M',
                weekStart: 1,
                onRender: function(date) {

                    var dates = o.form.datepicker.getDates();

                    if(typeof dates[0] === 'string') {
                        minDate = o.form.datepicker.parseISO8601(dates[0]);
                    } else {
                        minDate = new Date(dates[0]);
                    }

                    if(typeof dates[dates.length-1] === 'string') {
                        maxDate = o.form.datepicker.parseISO8601(dates[dates.length-1]);
                    } else {
                        maxDate = new Date(dates[dates.length-1]);
                    }

                    minDate.setHours(0,0,0,0);
                    maxDate.setHours(0,0,0,0);

                    if(date.valueOf() < minDate.valueOf()
                        || date.valueOf() > maxDate.valueOf()) {
                        return 'disabled';
                    }

                    if(dates.length != 2 || +o.form.location.selectedSuggest.id) { // got dates
                        if(!o.fn.in_array(o.form.datepicker.format(date, 'y4-m0-d0'), dates)) {
                            return 'disabled';
                        }
                    }

                    if(self.dateFirst && o.form.datepicker.format(date, 'y4-m0-d0') === o.form.datepicker.format(self.dateFirst.date, 'y4-m0-d0')) { // #10249
                        return 'first-active';
                    }

                    if(self.dateFirst && self.dateSecond && self.$to.val() && date.valueOf() > self.dateFirst.date.valueOf() && date.valueOf() < self.dateSecond.date.valueOf()) {
                        return 'hover';
                    }

                    if(self.dateSecond && o.form.datepicker.format(date, 'y4-m0-d0') === o.form.datepicker.format(self.dateSecond.date, 'y4-m0-d0')) { // #10249
                        return 'second-active';
                    }

                    return '';
                }
            }).on('changeDate', function(ev) {

                // clear second datepicker
                if(self.dateSecond.date.valueOf() < self.dateFirst.date.valueOf()) {
                    self.dateSecond.setValue(ev.date);
                    self.$to.val('');
                }

                // #12305
                var currentSecond = self.dateSecond.date;
                self.dateSecond.update();
                self.dateSecond.date = currentSecond;
                self.dateSecond.setValue(currentSecond);

                $('.exs_search-dates').removeClass('exs_tip-calendar');
                self.dateFirst.hide();
                self.$fromAny.find('input').prop('checked', false);
                self.$to.focus();

                if(typeof window.osCallbackDateFrom === 'function') {
                    window.osCallbackDateFrom(ev.date);
                }

                // update durations
                //o.form.datepicker.refreshDuraion(ev.date, secondDate);

            }).on('click', function(){

                $('.exs_search-dates').addClass('exs_tip-calendar');
                self.$prompt.removeClass('exs_tip-active');
                self.dateFirst.show();
                self.$fromAny.show();

            }).on('focus', function(){

                if(!self.$fromAny) {
                    // init date from
                    var on_change = function(e, is_checkbox){
                        if(!is_checkbox) {
                            e.find('input').prop('checked', !e.parent().find('input').prop('checked'));
                        }
                        self.dateFirst.setValue(new Date());
                        self.$from.val('');

                        if(e.find('input').prop('checked')) {
                            self.dateFirst.hide();
                        }

                        self.dateFirst.update();

                        o.form.datepicker.refreshDuraion(self.dateFirst.date, self.dateSecond.date);
                    };

                    self.$fromAny = $('.os-datepicker-custom-from').append(

                        $('<div>').append(
                            $('<input>')
                                .attr('type', 'checkbox')
                                .attr('checked', !self.$from.val()? 'checked': false)
                                .on('click', function(e){
                                    e.stopPropagation();

                                    on_change($(this).parent(), true);
                                })
                        ).append(o._('Любая дата')).on('click', function(e){
                            on_change($(this));
                        })
                    );
                }

                $('.exs_search-dates').addClass('exs_tip-calendar');
                self.$fromAny.show();
                if(self.$toAny) self.$toAny.hide();

            }).data('datepicker');

            // init datepicker to
            self.dateSecond = self.$to.datepicker({
                format:'D d M',
                weekStart:1,
                onRender: function(date) {

                    var dates = o.form.datepicker.getDates(),
                        minDate = new Date(dates[0]),
                        maxDate = new Date(dates[dates.length-1]),
                        dateTo = new Date(self.dateFirst.date.getTime()+(30*24*60*60*1000)); // +30 day

                    minDate.setHours(0,0,0,0);
                    maxDate.setHours(0,0,0,0);

                    if(date.valueOf() < self.dateFirst.date.valueOf()
                        || date.valueOf() > maxDate.valueOf()
                        || date.valueOf() > dateTo.valueOf()) {
                        return 'disabled';
                    }

                    if(dates.length != 2 || +o.form.location.selectedSuggest.id) { // got dates
                        if(!o.fn.in_array(o.form.datepicker.format(date, 'y4-m0-d0'), dates)) {
                            return 'disabled';
                        }
                    }

                    if(self.dateFirst && o.form.datepicker.format(date, 'y4-m0-d0') === o.form.datepicker.format(self.dateFirst.date, 'y4-m0-d0')) { // #10249
                        return 'first-active';
                    }

                    if(self.dateFirst && self.$from.val() && self.dateSecond && date.valueOf() > self.dateFirst.date.valueOf() && date.valueOf() < self.dateSecond.date.valueOf()) {
                        return 'hover';
                    }

                    if(self.dateSecond && o.form.datepicker.format(date, 'y4-m0-d0') === o.form.datepicker.format(self.dateSecond.date, 'y4-m0-d0')) { // #10249
                        return 'second-active';
                    }

                    return '';
                }
            }).on('changeDate', function(ev) {
                self.dateSecond.hide();
                $('.exs_search-dates').removeClass('exs_tip-calendar');

                // update first datepicker
                var firstDate = self.dateFirst.date;
                self.dateFirst.update();
                if(self.$from.val()) {
                    self.dateFirst.setValue(firstDate);
                }

                self.$toAny.find('input').prop('checked', false);

                // update durations
                o.form.datepicker.refreshDuraion(self.dateFirst.date, ev.date);

                if(typeof window.osCallbackDateTo === 'function') {
                    window.osCallbackDateTo(ev.date);
                }

            }).on('focus', function(){

                if(!self.$toAny) {
                    // init date from
                    var on_change = function(e, is_checkbox){
                        if(!is_checkbox) {
                            e.find('input').prop('checked', !e.parent().find('input').prop('checked'));
                        }
                        self.dateSecond.setValue(new Date());
                        self.$to.val('');

                        if(e.find('input').prop('checked')) {
                            self.dateSecond.hide();
                        }

                        self.dateSecond.update();

                        o.form.datepicker.refreshDuraion(self.dateFirst.date, self.dateSecond.date);
                    };

                    self.$toAny = $('.os-datepicker-custom-to').append(

                        $('<div>').append(
                            $('<input>')
                                .attr('type', 'checkbox')
                                .attr('checked', !self.$to.val()? 'checked': false)
                                .on('click', function(e){
                                    e.stopPropagation();

                                    on_change($(this).parent(), true);
                                })
                        ).append(o._('Любая дата')).on('click', function(e){
                            on_change($(this));
                        })
                    );
                }

                $('.exs_search-dates').addClass('exs_tip-calendar');
                self.$toAny.show();
                if(self.$fromAny) self.$fromAny.hide();

            }).on('click', function(){

                $('.exs_search-dates').addClass('exs_tip-calendar');
                self.$prompt.removeClass('exs_tip-active');
                self.dateSecond.show();
                self.$toAny.show();

            }).data('datepicker');

            // default date not show #10249
            // var minDate = new Date(now.getTime()+604800000); // +7 day
            // self.dateFirst.setValue(o.form.datepicker.formatDate(minDate));
            // var maxDate = new Date(now.getTime()+(14*24*60*60*1000)); // +14 day
            // self.dateSecond.setValue(o.form.datepicker.formatDate(maxDate));

            self.dateFirst.hide();
            self.dateSecond.hide();
        };

        /**
         * Render date fields
         * @param $el
         * @returns {f}
         */
        this.render = function($el){

            this.init($el);

            o.form.setInput('checkIn', this.$, function($o, q){
                q.checkIn = self.getValue()[0];
                q.checkTo = self.getValue()[1];
            });

            return this;
        }
    };

    o.form.datepicker.view = new f();

})(jQuery, otpMain);

/*********************/
/****** 	view/result.js	 ***********/
/*********************/
/**
 * Created by vshevtsov on 29/09/16.
 */

(function($, o){

    o.result.view = new function(){

        this.$spinner = undefined;
        this.$container = undefined;
        this.$pagination = undefined;
        this.$message = undefined;

        var self = this;

        /**
         * Reset results
         */
        this.reset = function() {
            this.spinnerHide();
            this.$container.empty();
            this.paginationHide();
            this.messageHide();
        };

        /**
         * Refresh results
         */
        this.append_results = function(result) {

            var offer;

            $.each(result.response.results, function(i, item){

                offer = o.fn.getFirst(item.offers);

                $('<div>')
                    .addClass(o.fn.prefix('r-item-wrap'))
                    .append(
                        $('<a>')
                            .attr('href', o.result.getLink(item, 'tour'))
                            .attr('data-price', offer.price)
                            .attr('data-price-uah', offer.priceUah)
                            .attr('data-currency', offer.currency)
                            .addClass(o.fn.prefix('r-item'))
                            .addClass(o.fn.prefix('r-link-click'))
                            .append(
                                $('<div>')
                                    .addClass(o.fn.prefix('r-item-top') + (item.image ? '' : ' exs_r-item-no-image'))
                                    .css('background-image', 'url('+ ( item.image ? 'https://newimg.otpusk.com/2/400x300/'+ item.image : 'https://export.otpusk.com/os/excursion/blank-exc.png' ) +')')

                            ).append(
                                $('<div>')
                                    .addClass(o.fn.prefix('r-item-table'))
                                    .append(
                                        $('<div>')
                                            .addClass(o.fn.prefix('r-item-geo'))
                                            .append(
                                                $('<div>')
                                                    .addClass(o.fn.prefix('r-item-geo-text'))
                                                    .append('<svg version="1.1"xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 400 500" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M194.994,52.5c-88.083,0-159.5,71.411-159.5,159.5 c0,88.09,159.5,265.833,159.5,265.833S354.5,300.091,354.5,212C354.5,123.91,283.083,52.5,194.994,52.5z M194.994,278.455 c-44.042,0-79.75-35.705-79.75-79.747c0-44.048,35.708-79.75,79.75-79.75c44.047,0,79.75,35.702,79.75,79.75 C274.744,242.75,239.041,278.455,194.994,278.455z"/></svg>')
                                                    .on('init', function(){

                                                        var that = this;
                                                        $.each(item.geo, function(i, geo){

                                                            if(i) $(that).append(' &mdash; ');
                                                            $(that).append(geo.cityName + ' <span>('+ geo.countryName +')</span>');
                                                            $(that).attr( 'title',$(that).text() );

                                                        });

                                                    }).trigger('init')
                                            )
                                    )
                            )

                            .append(
                                $('<div>')
                                    .addClass(o.fn.prefix('r-item-top-info'))
                                    .append(
                                        $('<div>')
                                            .addClass(o.fn.prefix('r-item-top-name'))
                                            .text(item.name)
                                    ).append(
                                        $('<div>')
                                            .addClass(o.fn.prefix('r-item-top-brcr'))
                                            .on('init', function(){

                                                $(this).append(o.fn.suffixForNumber(+offer['length'], [o._('день'), o._('дня'), o._('дней')], true)); // length
                                                $(this).append(' &bull; ');

                                                // dates
                                                var date = new Date(offer['date']);
                                                $(this).append(("0" + date.getDate()).slice(-2) + '.' + ("0" + (date.getMonth() + 1)).slice(-2)); // date from
                                                $(this).append(' - ');
                                                date.setDate(date.getDate() + (+offer['length']));
                                                $(this).append(("0" + date.getDate()).slice(-2) + '.' + ("0" + (date.getMonth() + 1)).slice(-2)); // date to
                                                $(this).append(' &bull; ');

                                                // transport
                                                $(this).append(o.form.transport.view.printTransport(item.transport));

                                                // city from
                                                if(item.fromCity.nameRd) {
                                                    $(this).append(' '+ o._('из') +' '+ item.fromCity.nameRd);
                                                }

                                            }).trigger('init')
                                    )
                            )
                            .append(
                                $('<div>')
                                    .addClass(o.fn.prefix('r-item-price'))
                                    .on('refresh', function(e, currency){

                                        $(this).empty();

                                        $(this)
                                            .append($('<strong>').html(o.fn.onlyPriceEcho((currency === 'uah'? $(this).parent().data('price-uah'): $(this).parent().data('price')) || offer.priceUah, true)))
                                            .append(' '+ o.fn.curEcho(currency, true))
                                            .append($('<br>'))
                                            .append($('<i>').text(' '+ o._('за одного')))
                                    }).trigger('refresh', 'uah')
                            )

                            // #10263
                            .hover(function(){
                                $(this).find(o.fn.prefix('r-item-price','.')).trigger('refresh', $(this).data('currency'));

                            }, function(){
                                $(this).find(o.fn.prefix('r-item-price','.')).trigger('refresh', 'uah');
                            })
                    )
                    
                    .appendTo(self.$container)
            });
        };

        /**
         * Show spinner
         */
        this.spinnerShow = function() {
            this.$spinner.show();
        };

        /**
         * Hide spinner
         */
        this.spinnerHide = function() {
            this.$spinner.hide();
        };

        /**
         * Show pagination
         */
        this.paginationShow = function() {
            this.$pagination.css('visibility', 'visible');
            this.$pagination.show();
        };

        /**
         * Hide pagination
         */
        this.paginationHide = function(is_visible) {
            if(is_visible) {
                this.$pagination.css('visibility', 'hidden')
            } else {
                this.$pagination.hide();
            }
        };

        /**
         * Show message
         * @param text
         */
        this.messageShow = function(text) {
            this.$message.html(text || o._('Туры не найдены'));
            this.$message.show();
        };

        /**
         * Hide message
         */
        this.messageHide = function() {
            this.$message.hide();
        };

        /**
         * render results
         */
        this.render = function($container){
            this.$spinner = $('<div>')
                .addClass(o.fn.prefix('r-loading'))
                .css('display', 'none')
                .appendTo($container);

            this.$container = $('<div>')
                .addClass(o.fn.prefix('r-wrapper clearfix'))
                .appendTo($container);

            this.$pagination = $('<div>')
                .addClass(o.fn.prefix('r-more-results-btn'))
                .css('display', 'none')
                .text(o._('Показать больше результатов'))
                .on('click', function(){

                    self.paginationHide(true);

                    o.search.page +=1;
                    o.search.process();
                    return false;

                }).appendTo($container);

            this.$message = $('<div>')
                .addClass(o.fn.prefix('r-message'))
                .css('display', 'none')
                .appendTo($container);
        }
    };

})(jQuery, otpMain);

/*********************/
/****** 	view/tour/tour.js	 ***********/
/*********************/
/**
 * Created by mtoy on 6/12/14.
 */

(function($,o){

    var f = function(){

        this.$ = undefined;
        this.$datesBlock = undefined;
        this.$datesInfo = undefined;

        var self = this;

        var $title;

        /**
         * Init excursion tour page
         */
        this.init = function(data){

            var offer = o.fn.getFirst(data.tour.offers);

            this.$ = $('<div>')
                .addClass(o.fn.prefix('p-container'))
                .append(
                    $('<div>')
                        .addClass(o.fn.prefix('p-brcr-container'))
                        .append(
                            $('<div>')
                                .addClass(o.fn.prefix('p-brcr'))
                                .append(
                                    $('<a>')
                                        .addClass(o.fn.prefix('p-underline'))
                                        .addClass(o.fn.prefix('r-link-click'))
                                        .attr('href', o.result.getLink(data.tour, 'form'))
                                        .text(o._('Вернуться к просмотру результатов'))
                                )
                        )
                ).append(
                    $('<div>')
                        .addClass(o.fn.prefix('p-content-wrap'))
                        .append(
                            $('<div>')
                                .addClass(o.fn.prefix('p-content'))
                                .append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('p-tour-title'))
                                        .text(data.tour.name)
                                ).append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('p-geo'))
                                        .on('init', function(){

                                            var that = this;
                                            $.each(data.tour.destination, function(i, item){
                                                if(i) $(that).append(' &mdash; ');
                                                $(that).append(item.cityName + ' <span>('+ item.countryName +')</span>');
                                            });

                                        }).trigger('init')

                                ).append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('activity-gallery'))
                                        .css('display', !data.tour.images.length? 'none':'')
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('activity-gallery-images'))
                                                .attr('id', o.fn.prefix('activity-gallery-images'))
                                                .on('init', function(){

                                                    var that = this, src;
                                                    $.each(data.tour.images, function(i, item){

                                                        if(item.indexOf('newimg.otpusk.com') != -1) {
                                                            src = item;
                                                        } else {
                                                            src = 'https://newimg.otpusk.com/2'+ (watermark? '_'+ watermark: '') +'/715x370/'+ item
                                                        }

                                                        $(that).append(
                                                            $('<img>').attr('src', src)
                                                        )
                                                    });

                                                }).trigger('init')
                                        ).append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('dot-container'))
                                                .append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('dot-container-inner'))
                                                        .on('init', function(){

                                                            var that = this;
                                                            $.each(data.tour.images, function(i, item){
                                                                $(that).append(
                                                                    $('<span>')
                                                                        .addClass(o.fn.prefix('slide-dot'))
                                                                        .addClass(o.fn.prefix('js-gallery-dot'))
                                                                        .addClass(o.fn.prefix('js-link'))
                                                                        .attr('data-idx', i)
                                                                )
                                                            });

                                                        }).trigger('init')
                                                )
                                        ).on('run', function(){

                                            if($(this).find('img').length) {
                                                Galleria.run(o.fn.prefix('activity-gallery-images','#'));
                                            }

                                        }).trigger('run')

                                ).append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('p-tour-info-container clearfix'))
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-tour-info-col'))
                                                .append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-tour-info_item'))
                                                        .addClass(o.fn.prefix('p-people'))
                                                        .text('1 '+ o._('взрослый'))
                                                ).append(
                                                    self.$datesInfo = $('<div>')
                                                        .addClass(o.fn.prefix('p-tour-info_item'))
                                                        .addClass(o.fn.prefix('p-date'))
                                                        .on('refresh', function(){

                                                            $(this).empty();
                                                            $(this).append(o.form.datepicker.format(new Date(offer.date), 'd m (d2)'));
                                                            $(this).append(' &mdash; ');
                                                            var dateTo = new Date(offer.date);
                                                            dateTo.setDate(dateTo.getDate() + (+offer['length']));
                                                            $(this).append(o.form.datepicker.format(dateTo, 'd m (d2)'));
                                                            $(this).append(', '+ o.fn.suffixForNumber(+offer['length'], [o._('день'), o._('дня'), o._('дней')], true))
                                                            $(this).append(' ');
                                                            $(this).append(
                                                                $('<div>')
                                                                    .addClass(o.fn.prefix('p-change-date'))
                                                                    .addClass(o.fn.prefix('p-underline'))
                                                                    .text(o._('другие даты'))
                                                                    .on('click', function(){
                                                                        self.$datesBlock.toggleClass('visbl');
                                                                    })
                                                            )

                                                        }).trigger('refresh')
                                                )
                                        ).append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-tour-info-col'))
                                                .append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-tour-info_item'))
                                                        .addClass(o.fn.prefix('p-transport '+ data.tour.transport))
                                                        .append(o.form.transport.view.printTransport(data.tour.transport) +
                                                            ((data.tour.transport !== 'no')? ' ' + o._('из') + ' '+ data.tour.fromCity.nameRd +' &mdash; ' + o._('включен'): ''))
                                                ).append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-tour-info_item'))
                                                        .addClass(o.fn.prefix('p-food'))
                                                        .append(data.tour.food.toUpperCase() +' &mdash; '+ o.fn.foodName(data.tour.food.toLowerCase()))
                                                )
                                        ).append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-tour-info-col'))
                                                .append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-tour-info_item'))
                                                        .addClass(o.fn.prefix('p-etc'))
                                                        .on('init', function(){

                                                            var info = [];
                                                            if(data.tour.stars !== 'na')  {
                                                                info.push(o._('проживание в отеле ')+ o.fn.printStars(data.tour.stars));
                                                            }

                                                            if(data.tour.visa === 'yes') {
                                                                info.push(o._('виза'));
                                                            }

                                                            if(data.tour.insurance === 'yes') {
                                                                info.push(o._('страховка'));
                                                            }

                                                            $(this).append(info.join(', '));

                                                        }).trigger('init')
                                                )
                                        )
                                ).append(
                                    self.$datesBlock = $('<div>')
                                        //.css('display', 'none')
                                        .addClass(o.fn.prefix('slider-wrap'))
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('slider-title'))
                                                .text('другие даты')
                                        )
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('slider'))
                                                .addClass('slider')
                                                .on('init_dates', function(){

                                                    var that = this;

                                                    // data.tour.offers['201768769'] = {'currency':"eur",'date':"2016-10-28",'length':4,'offerId':"201768769",'price':30,'priceUah':876.3}
                                                    // data.tour.offers['201768768'] = {'currency':"eur",'date':"2016-10-28",'length':4,'offerId':"201768769",'price':30,'priceUah':866.3}
                                                    // data.tour.offers['201768767'] = {'currency':"eur",'date':"2016-10-28",'length':4,'offerId':"201768769",'price':30,'priceUah':856.3}
                                                    // data.tour.offers['201768766'] = {'currency':"eur",'date':"2016-10-28",'length':4,'offerId':"201768769",'price':30,'priceUah':846.3}
                                                    // data.tour.offers['201768765'] = {'currency':"eur",'date':"2016-10-28",'length':4,'offerId':"201768769",'price':30,'priceUah':836.3}
                                                    // data.tour.offers['201768764'] = {'currency':"eur",'date':"2016-10-28",'length':4,'offerId':"201768769",'price':30,'priceUah':826.3}
                                                    // data.tour.offers['201768763'] = {'currency':"eur",'date':"2016-10-28",'length':4,'offerId':"201768769",'price':30,'priceUah':816.3}
                                                    // data.tour.offers['201768762'] = {'currency':"eur",'date':"2016-10-28",'length':4,'offerId':"201768769",'price':30,'priceUah':806.3}

                                                    // sort by date #11271
                                                    var offers = Object.keys(data.tour.offers).sort(function(a, b) {
                                                        return o.form.datepicker.parseISO8601(data.tour.offers[a].date).getTime() - o.form.datepicker.parseISO8601(data.tour.offers[b].date).getTime();
                                                    });

                                                    var item;
                                                    $.each(offers, function(i, oid){

                                                        item = data.tour.offers[oid];

                                                        var dateTo = new Date(item.date);
                                                        dateTo.setDate(dateTo.getDate() + (+item['length']));

                                                        $(that).append(
                                                            $('<div>')
                                                                .attr('data-oid', oid)
                                                                .addClass(+oid == +offer.offerId? 'chosen': '')
                                                                .append(
                                                                    $('<div>')
                                                                        .addClass(o.fn.prefix('slider-dates'))
                                                                        .html(o.form.datepicker.format(new Date(item.date), 'd0.m0') + ' - '+ o.form.datepicker.format(dateTo, 'd0.m0'))
                                                                )
                                                                .append(
                                                                    $('<div>')
                                                                        .addClass(o.fn.prefix('slider-price'))
                                                                        .html('<strong>'+ o.fn.onlyPriceEcho(item.priceUah, true) +'</strong> '+ o.fn.curEcho('uah'))
                                                                )
                                                                .on('click', function(){

                                                                    $(that).find('div').removeClass('chosen');
                                                                    $(this).addClass('chosen');


                                                                    offer = data.tour.offers[$(this).attr('data-oid')]; // set new offer data

                                                                    self.$datesInfo.trigger('refresh'); // refresh date info
                                                                    $(o.fn.prefix('p-order-btn','.')).trigger('refresh'); // refresh order buttons
                                                                    $(o.fn.prefix('p-tour-code','.')).trigger('refresh'); // refresh code info
                                                                    $(o.fn.prefix('p-green','.')).trigger('refresh'); // refresh price info

                                                                })
                                                        )
                                                    });

                                                }).trigger('init_dates')
                                        )
                                        
                                ).append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('p-table clearfix'))
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-table-col'))
                                                .addClass(o.fn.prefix('p-table-col-1'))
                                                .append(
                                                    $('<span>')
                                                        .addClass(o.fn.prefix('p-green'))
                                                        .on('refresh', function(){
                                                            $(this).empty();
                                                            $(this).append($('<span>').html(o.fn.onlyPriceEcho(offer.priceUah, true)));
                                                            $(this).append(' '+ o.fn.curEcho('uah'));
                                                            $(this).append(
                                                                $('<span>')
                                                                    .addClass(o.fn.prefix('p-green-spare'))
                                                                    .append(' / '+ o.fn.onlyPriceEcho(offer.price, true) +' '+ o.fn.curEcho(offer.currency, true))
                                                            ).append(
                                                                $('<span>')
                                                                    .addClass(o.fn.prefix('p-green-info'))
                                                                    .append(' '+ o._('за человека'))
                                                            );
                                                        }).trigger('refresh')
                                                )
                                        ).append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-table-col'))
                                                .addClass(o.fn.prefix('p-table-col-2'))
                                                .append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-order-btn'))
                                                        .text(o._('Заказать тур'))
                                                        .on('refresh', function(){

                                                            $(this)
                                                                .attr('data-date', offer.date)
                                                                .attr('data-people', '1')
                                                                .attr('data-len', +offer['length']+100)
                                                                .attr('data-offerId', offer.offerId)
                                                                .attr('data-comment', 'Экскурсионный тур «'+ data.tour.name +'», '+ Math.round(offer.priceUah).toString() +' грн')

                                                        }).on('click', function(){

                                                            var selectedGeo = o.form.location.view.getGeoData()[0];
                                                            if(selectedGeo && selectedGeo.country) {
                                                                $(this).attr('data-country', selectedGeo.country);
                                                                $(this).attr('data-city', selectedGeo.city);
                                                            } else {
                                                                $(this).attr('data-country', o.fn.getFirst(data.tour.destination)['countryName']);
                                                                $(this).attr('data-city', o.fn.getFirst(data.tour.destination)['cityName']);
                                                            }

                                                            if(typeof otpMainOrder !== 'undefined') {
                                                                otpMainOrder.showForm(this);
                                                            } else if(typeof window.osExcursionOrder === 'function'){
                                                                window.osExcursionOrder(data.tour, this);
                                                            }
                                                            return false;

                                                        }).trigger('refresh')
                                                ).append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-tour-code'))
                                                        .on('refresh', function(){
                                                            $(this).html(o._('код') + ': '+ offer.offerId);
                                                        }).trigger('refresh')
                                                )
                                        )
                                ).append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('p-tour-bl'))
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-tour-bl-title'))
                                                .append(o._('Программа тура') +': '+ data.tour.name)

                                        ).append(data.tour.description) // tour description

                                ).append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('p-tour-bl'))
                                        .css('display', !data.tour.required? 'none': 'block')
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-table clearfix'))
                                                .append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-table-col'))
                                                        .addClass(o.fn.prefix('p-table-col-1'))
                                                        .append(
                                                            $('<div>')
                                                                .addClass(o.fn.prefix('p-tour-bl-title'))
                                                                .text(o._('Необходимые документы')+ ':')
                                                        )
                                                ).append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-table-col'))
                                                        .addClass(o.fn.prefix('p-table-col-2'))
                                                        .append(
                                                            $('<div>')
                                                                .addClass(o.fn.prefix('p-order-btn'))
                                                                .text(o._('Заказать тур'))
                                                                .on('refresh', function(){

                                                                    $(this)
                                                                        .attr('data-date', offer.date)
                                                                        .attr('data-people', '1')
                                                                        .attr('data-len', +offer['length']+100)
                                                                        .attr('data-offerId', offer.offerId)
                                                                        .attr('data-comment', 'Экскурсионный тур «'+ data.tour.name +'», '+ Math.round(offer.priceUah).toString() +' грн')

                                                                }).on('click', function(){

                                                                    var selectedGeo = o.form.location.view.getGeoData()[0];
                                                                    if(selectedGeo && selectedGeo.country) {
                                                                        $(this).attr('data-country', selectedGeo.country);
                                                                        $(this).attr('data-city', selectedGeo.city);
                                                                    } else {
                                                                        $(this).attr('data-country', o.fn.getFirst(data.tour.destination)['countryName']);
                                                                        $(this).attr('data-city', o.fn.getFirst(data.tour.destination)['cityName']);
                                                                    }

                                                                    if(typeof otpMainOrder !== 'undefined') {
                                                                        otpMainOrder.showForm(this);
                                                                    } else if(typeof window.osExcursionOrder === 'function'){
                                                                        window.osExcursionOrder(data.tour, this);
                                                                    }
                                                                    return false;

                                                                }).trigger('refresh')
                                                        ).append(
                                                            $('<div>')
                                                                .addClass(o.fn.prefix('p-tour-code'))
                                                                .on('refresh', function(){
                                                                    $(this).html(o._('код') + ': '+ offer.offerId);
                                                                }).trigger('refresh')
                                                        )
                                                )

                                        ).append(data.tour.required) // tour required
                                ).append(
                                    $('<div>')
                                        .addClass(o.fn.prefix('p-table clearfix'))
                                        .append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-table-col'))
                                                .addClass(o.fn.prefix('p-table-col-1'))
                                                .append(
                                                    $('<span>')
                                                        .addClass(o.fn.prefix('p-green'))
                                                        .on('refresh', function(){
                                                            $(this).empty();
                                                            $(this).append($('<span>').html(o.fn.onlyPriceEcho(offer.priceUah, true)));
                                                            $(this).append(' '+ o.fn.curEcho('uah'));
                                                            $(this).append(
                                                                $('<span>')
                                                                    .addClass(o.fn.prefix('p-green-spare'))
                                                                    .append(' / '+ o.fn.onlyPriceEcho(offer.price, true) +' '+ o.fn.curEcho(offer.currency, true))
                                                            ).append(
                                                                $('<span>')
                                                                    .addClass(o.fn.prefix('p-green-info'))
                                                                    .append(' '+ o._('за человека'))
                                                            );
                                                        }).trigger('refresh')
                                                )
                                        ).append(
                                            $('<div>')
                                                .addClass(o.fn.prefix('p-table-col'))
                                                .addClass(o.fn.prefix('p-table-col-2'))
                                                .append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-order-btn'))
                                                        .text(o._('Заказать тур'))
                                                        .on('refresh', function(){

                                                                $(this)
                                                                    .attr('data-date', offer.date)
                                                                    .attr('data-people', '1')
                                                                    .attr('data-len', +offer['length']+100)
                                                                    .attr('data-offerId', offer.offerId)
                                                                    .attr('data-comment', 'Экскурсионный тур «'+ data.tour.name +'», '+ Math.round(offer.priceUah).toString() +' грн')

                                                        }).on('click', function(){

                                                            var selectedGeo = o.form.location.view.getGeoData()[0];
                                                            if(selectedGeo && selectedGeo.country) {
                                                                $(this).attr('data-country', selectedGeo.country);
                                                                $(this).attr('data-city', selectedGeo.city);
                                                            } else {
                                                                $(this).attr('data-country', o.fn.getFirst(data.tour.destination)['countryName']);
                                                                $(this).attr('data-city', o.fn.getFirst(data.tour.destination)['cityName']);
                                                            }

                                                            if(typeof otpMainOrder !== 'undefined') {
                                                                otpMainOrder.showForm(this);
                                                            } else if(typeof window.osExcursionOrder === 'function'){
                                                                window.osExcursionOrder(data.tour, this);
                                                            }
                                                            return false;

                                                        }).trigger('refresh')
                                                ).append(
                                                    $('<div>')
                                                        .addClass(o.fn.prefix('p-tour-code'))
                                                        .on('refresh', function(){
                                                            $(this).html(o._('код') + ': '+ offer.offerId);
                                                        }).trigger('refresh')
                                                )
                                        )
                                )
                        )
                );
        };

        /*
         *  Check osContainer and osTourContainer to get results container
         */
        this.getTourDefaultContainer = function () {
            // #10449
            // Set default tour container
            var $tourContainer = o.view.$;
            var targetTourContainerId;
            var isTargetTourContainerElementExists = false;

            // Check for osTourContainer setting
            if (typeof osTourContainer != 'undefined') {
                if (typeof osTourContainer === 'string') {
                    targetTourContainerId = osTourContainer;
                    osTourContainer = document.getElementById(osTourContainer);
                }
                if ($(osTourContainer).is('div')) {
                    isTargetTourContainerElementExists = true;
                    $tourContainer = $(osTourContainer);
                }
            }

            // Check for osContainer setting
            else if (typeof osContainer != 'undefined') {
                if (typeof osContainer === 'string') {
                    targetTourContainerId = osContainer;
                    osContainer = document.getElementById(osContainer);
                }
                if ($(osContainer).is('div')) {
                    isTargetTourContainerElementExists = true;
                    $tourContainer = $(osContainer);
                }
            }
            // Hide current tour view and attach to container on load
            if (!isTargetTourContainerElementExists && targetTourContainerId) {
                $tourContainer = $("<div>", { "class": o.fn.prefix('tour-container') });

                // Move to target container on page load
                $(document).ready(function () {
                    //Find target container element
                    var targetTourContainer = document.getElementById(targetTourContainerId);
                    var $targetTourContrainer = $(targetTourContainer);

                    if ($targetTourContrainer.is("div")) {
                        // Attach to target if exists
                        $tourContainer.appendTo($targetTourContrainer);
                    }
                    else {
                        // Attach to default if does not exists
                        $tourContainer.appendTo(o.view.$);
                    }
                })
            }

            return $tourContainer;
        };

        /**
         * Render excursion tour page
         * @param container
         */
        this.render = function(container) {

            container = container || this.getTourDefaultContainer();

            // get tour data and render the page
            o.tour.getData(o.hash.get(), function(data){

                o.tour.view.init(data);

                o.tour.view.$.appendTo(container);

            });
        }
    };

    o.tour.view = new f();

})(jQuery,otpMain);


/*********************/
/****** 	init.js	 ***********/
/*********************/
/**
 * Created by vshevtsov on 23.09.16.
 */

otpMain.tab = otpMain.hash.parse().get('tab', 'form');

jQuery('head')
.append('<meta name="viewport" content="width=device-width, initial-scale=1">')
.append("<link href='https://fonts.googleapis.com/css?family=Roboto:100,300,400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>");
document.write('<div class="'+ otpMain.fn.prefix('os') +'"></div>'); //init parent form container
otpMain.view = {};
otpMain.view.$ = jQuery(otpMain.fn.prefix('os','.'));

if(!api_session_token) {
    console.log('No api_session_token!');
    otpMain.tour.head.errorPage(500);
}

// global vars
otpMain.apiKey = api_session_token;
otpMain.apiId = osApiId;
otpMain.apiType = (typeof api_modules['excursions'] !== 'undefined'? api_modules['excursions']: false);

otpMain.timer = 0;
otpMain.got_keys = 0;

// #10162
if(!otpMain.apiType) {
    console.info('the module is not enabled!');
    otpMain.fn.errorPage(500);
}

var runApplication = function(tab){
    otpMain.tab = tab || otpMain.tab;

    if(otpMain.tab){

        otpMain.form.view.render(); //render form

        switch(otpMain.tab){
            case 'tour':
                otpMain.tour.view.render(); // render tour page
                break;
        }
    }
};

// Cookies not started in Safari #4522
var is_chrome = navigator.userAgent.indexOf('Chrome') > -1;
var is_safari = navigator.userAgent.indexOf('Safari') > -1;
var ios = /iphone|ipod|ipad/.test(window.navigator.userAgent.toLowerCase());
if ((is_chrome)&&(is_safari)) {is_safari=false;}

if(is_safari) {

    otpMain.form.location.geoSuggest('', function(d){
        if(d.error){
            var countError = parseInt(otpMain.fn.getCookie('countError')) || 0;

            if(countError < 3) {
                document.cookie = "countError="+ (countError+1);
                window.location.href='https://export.otpusk.com/js/sessions/?url='+ window.location.href;
            } else {
                if(countError==3) {
                    window.location.reload();
                } else {
                    console.log('error: can\'t set cookie');
                    document.cookie = "countError=2";
                    runApplication();
                }
            }

        } else {
            document.cookie = "countError=0";
            runApplication();
        }
    });

} else {
    runApplication();
}

//ресайз формы
var resizeForm = function(){
    if(jQuery('.'+otpMain.fn.prefix('os')).parent().width() < 951) {
        jQuery('body').addClass('exs_mobile-form');
        if(jQuery('.'+otpMain.fn.prefix('os')).parent().width() >= 400) {
            jQuery('body').removeClass('exs_sm-mobile-form');
        }
        if(jQuery('.'+otpMain.fn.prefix('os')).parent().width() < 400) {
            jQuery('body').addClass('exs_sm-mobile-form');
        }
    } else {
        jQuery('body').removeClass('exs_mobile-form').removeClass('exs_sm-mobile-form');
    }
    if(jQuery('.'+otpMain.fn.prefix('os')).parent().width() < 620) {
        jQuery('body').addClass('exs_res-one-col');
    } else {
        jQuery('body').removeClass('exs_res-one-col');
    }
    if(jQuery('.'+otpMain.fn.prefix('os')).parent().width() < 460) {
        jQuery('body').addClass('exs_table-one-col');
    } else {
        jQuery('body').removeClass('exs_table-one-col');
    }
};

jQuery(function(){
    jQuery(document).ready(function() {
        resizeForm();
    });

    jQuery(window).load(function() {
        resizeForm();

        jQuery('.exs_search-form > *').css('opacity','1');
        jQuery('a.highslide').each(function() {
            this.onclick = function() {
                return hs.expand(this);
            };
        });

        if ( jQuery('.exs_p-tour-title').length ) {
            jQuery('html, body').animate({
                scrollTop: jQuery('.exs_p-tour-title').offset().top - 50
            }, 500);
        }
    });

    window.onresize = function(){
        resizeForm();
    };

    jQuery('.exs_slider').addClass('visbl');

    //otpMain.tour.view.$datesBlock.toggle();
});})(api_session_token, api_modules, osApiId);
if(typeof osjQuerryUse!="undefined"){var jQuery=osjQuerryUse;$=$osUse;}