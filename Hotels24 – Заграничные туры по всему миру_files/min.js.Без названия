if(typeof osGeo===undefined){var osGeo}if(typeof osTarget===undefined){var osTarget}if(typeof osContainer===undefined){var osContainer}if(typeof jQuery!="undefined"){var osjQuerryUse=jQuery;$osUse=$}if(typeof api_modules===undefined){var api_modules={tours:"free"}}(function(apiKey,osGeo,osTarget,osContainer,api_modules,undefined){
/*! jQuery v1.9.0 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license */
(function(e,t){function n(e){var t=e.length,n=st.type(e);return st.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){var t=Tt[e]={};return st.each(e.match(lt)||[],function(e,n){t[n]=!0}),t}function i(e,n,r,i){if(st.acceptData(e)){var o,a,s=st.expando,u="string"==typeof n,l=e.nodeType,c=l?st.cache:e,f=l?e[s]:e[s]&&s;if(f&&c[f]&&(i||c[f].data)||!u||r!==t){return f||(l?e[s]=f=K.pop()||st.guid++:f=s),c[f]||(c[f]={},l||(c[f].toJSON=st.noop)),("object"==typeof n||"function"==typeof n)&&(i?c[f]=st.extend(c[f],n):c[f].data=st.extend(c[f].data,n)),o=c[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[st.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[st.camelCase(n)])):a=o,a}}}function o(e,t,n){if(st.acceptData(e)){var r,i,o,a=e.nodeType,u=a?st.cache:e,l=a?e[st.expando]:st.expando;if(u[l]){if(t&&(r=n?u[l]:u[l].data)){st.isArray(t)?t=t.concat(st.map(t,st.camelCase)):t in r?t=[t]:(t=st.camelCase(t),t=t in r?[t]:t.split(" "));for(i=0,o=t.length;o>i;i++){delete r[t[i]]}if(!(n?s:st.isEmptyObject)(r)){return}}(n||(delete u[l].data,s(u[l])))&&(a?st.cleanData([e],!0):st.support.deleteExpando||u!=u.window?delete u[l]:u[l]=null)}}}function a(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(Nt,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:wt.test(r)?st.parseJSON(r):r}catch(o){}st.data(e,n,r)}else{r=t}}return r}function s(e){var t;for(t in e){if(("data"!==t||!st.isEmptyObject(e[t]))&&"toJSON"!==t){return !1}}return !0}function u(){return !0}function l(){return !1}function c(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function f(e,t,n){if(t=t||0,st.isFunction(t)){return st.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n})}if(t.nodeType){return st.grep(e,function(e){return e===t===n})}if("string"==typeof t){var r=st.grep(e,function(e){return 1===e.nodeType});if(Wt.test(t)){return st.filter(t,r,!n)}t=st.filter(t,r)}return st.grep(e,function(e){return st.inArray(e,t)>=0===n})}function p(e){var t=zt.split("|"),n=e.createDocumentFragment();if(n.createElement){for(;t.length;){n.createElement(t.pop())}}return n}function d(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function g(e){var t=nn.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n,r=0;null!=(n=e[r]);r++){st._data(n,"globalEval",!t||st._data(t[r],"globalEval"))}}function y(e,t){if(1===t.nodeType&&st.hasData(e)){var n,r,i,o=st._data(e),a=st._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s){for(r=0,i=s[n].length;i>r;r++){st.event.add(t,n,s[n][r])}}}a.data&&(a.data=st.extend({},a.data))}}function v(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!st.support.noCloneEvent&&t[st.expando]){r=st._data(t);for(i in r.events){st.removeEvent(t,i,r.handle)}t.removeAttribute(st.expando)}"script"===n&&t.text!==e.text?(h(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),st.support.html5Clone&&e.innerHTML&&!st.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Zt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function b(e,n){var r,i,o=0,a=e.getElementsByTagName!==t?e.getElementsByTagName(n||"*"):e.querySelectorAll!==t?e.querySelectorAll(n||"*"):t;if(!a){for(a=[],r=e.childNodes||e;null!=(i=r[o]);o++){!n||st.nodeName(i,n)?a.push(i):st.merge(a,b(i,n))}}return n===t||n&&st.nodeName(e,n)?st.merge([e],a):a}function x(e){Zt.test(e.type)&&(e.defaultChecked=e.checked)}function T(e,t){if(t in e){return t}for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Nn.length;i--;){if(t=Nn[i]+n,t in e){return t}}return r}function w(e,t){return e=t||e,"none"===st.css(e,"display")||!st.contains(e.ownerDocument,e)}function N(e,t){for(var n,r=[],i=0,o=e.length;o>i;i++){n=e[i],n.style&&(r[i]=st._data(n,"olddisplay"),t?(r[i]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&w(n)&&(r[i]=st._data(n,"olddisplay",S(n.nodeName)))):r[i]||w(n)||st._data(n,"olddisplay",st.css(n,"display")))}for(i=0;o>i;i++){n=e[i],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[i]||"":"none"))}return e}function C(e,t,n){var r=mn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2){"margin"===n&&(a+=st.css(e,n+wn[o],!0,i)),r?("content"===n&&(a-=st.css(e,"padding"+wn[o],!0,i)),"margin"!==n&&(a-=st.css(e,"border"+wn[o]+"Width",!0,i))):(a+=st.css(e,"padding"+wn[o],!0,i),"padding"!==n&&(a+=st.css(e,"border"+wn[o]+"Width",!0,i)))}return a}function E(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=ln(e),a=st.support.boxSizing&&"border-box"===st.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=un(e,t,o),(0>i||null==i)&&(i=e.style[t]),yn.test(i)){return i}r=a&&(st.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+k(e,t,n||(a?"border":"content"),r,o)+"px"}function S(e){var t=V,n=bn[e];return n||(n=A(e,t),"none"!==n&&n||(cn=(cn||st("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(cn[0].contentWindow||cn[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=A(e,t),cn.detach()),bn[e]=n),n}function A(e,t){var n=st(t.createElement(e)).appendTo(t.body),r=st.css(n[0],"display");return n.remove(),r}function j(e,t,n,r){var i;if(st.isArray(t)){st.each(t,function(t,i){n||kn.test(e)?r(e,i):j(e+"["+("object"==typeof i?t:"")+"]",i,n,r)})}else{if(n||"object"!==st.type(t)){r(e,t)}else{for(i in t){j(e+"["+i+"]",t[i],n,r)}}}}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(lt)||[];if(st.isFunction(n)){for(;r=o[i++];){"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}}}function L(e,n,r,i){function o(u){var l;return a[u]=!0,st.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||s||a[c]?s?!(l=c):t:(n.dataTypes.unshift(c),o(c),!1)}),l}var a={},s=e===$n;return o(n.dataTypes[0])||!a["*"]&&o("*")}function H(e,n){var r,i,o=st.ajaxSettings.flatOptions||{};for(r in n){n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r])}return i&&st.extend(!0,e,i),e}function M(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(o in c){o in r&&(n[c[o]]=r[o])}for(;"*"===l[0];){l.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("Content-Type"))}if(i){for(o in u){if(u[o]&&u[o].test(i)){l.unshift(o);break}}}if(l[0] in r){a=l[0]}else{for(o in r){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}s||(s=o)}a=a||s}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function q(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1]){for(n in e.converters){a[n.toLowerCase()]=e.converters[n]}}for(;i=u[++s];){if("*"!==i){if("*"!==l&&l!==i){if(n=a[l+" "+i]||a["* "+i],!n){for(r in a){if(o=r.split(" "),o[1]===i&&(n=a[l+" "+o[0]]||a["* "+o[0]])){n===!0?n=a[r]:a[r]!==!0&&(i=o[0],u.splice(s--,0,i));break}}}if(n!==!0){if(n&&e["throws"]){t=n(t)}else{try{t=n(t)}catch(c){return{state:"parsererror",error:n?c:"No conversion from "+l+" to "+i}}}}}l=i}}return{state:"success",data:t}}function _(){try{return new e.XMLHttpRequest}catch(t){}}function F(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function O(){return setTimeout(function(){Qn=t}),Qn=st.now()}function B(e,t){st.each(t,function(t,n){for(var r=(rr[t]||[]).concat(rr["*"]),i=0,o=r.length;o>i;i++){if(r[i].call(e,t,n)){return}}})}function P(e,t,n){var r,i,o=0,a=nr.length,s=st.Deferred().always(function(){delete u.elem}),u=function(){if(i){return !1}for(var t=Qn||O(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++){l.tweens[a].run(o)}return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:st.extend({},t),opts:st.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qn||O(),duration:n.duration,tweens:[],createTween:function(t,n){var r=st.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i){return this}for(i=!0;r>n;n++){l.tweens[n].run(1)}return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(R(c,l.opts.specialEasing);a>o;o++){if(r=nr[o].call(l,e,c,l.opts)){return r}}return B(l,c),st.isFunction(l.opts.start)&&l.opts.start.call(e,l),st.fx.timer(st.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function R(e,t){var n,r,i,o,a;for(n in e){if(r=st.camelCase(n),i=t[r],o=e[n],st.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=st.cssHooks[r],a&&"expand" in a){o=a.expand(o),delete e[r];for(n in o){n in e||(e[n]=o[n],t[n]=i)}}else{t[r]=i}}}function W(e,t,n){var r,i,o,a,s,u,l,c,f,p=this,d=e.style,h={},g=[],m=e.nodeType&&w(e);n.queue||(c=st._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,f=c.empty.fire,c.empty.fire=function(){c.unqueued||f()}),c.unqueued++,p.always(function(){p.always(function(){c.unqueued--,st.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height" in t||"width" in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===st.css(e,"display")&&"none"===st.css(e,"float")&&(st.support.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",st.support.shrinkWrapBlocks||p.done(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t){if(o=t[r],Zn.exec(o)){if(delete t[r],u=u||"toggle"===o,o===(m?"hide":"show")){continue}g.push(r)}}if(a=g.length){s=st._data(e,"fxshow")||st._data(e,"fxshow",{}),"hidden" in s&&(m=s.hidden),u&&(s.hidden=!m),m?st(e).show():p.done(function(){st(e).hide()}),p.done(function(){var t;st._removeData(e,"fxshow");for(t in h){st.style(e,t,h[t])}});for(r=0;a>r;r++){i=g[r],l=p.createTween(i,m?s[i]:0),h[i]=s[i]||st.style(e,i),i in s||(s[i]=l.start,m&&(l.end=l.start,l.start="width"===i||"height"===i?1:0))}}}function $(e,t,n,r,i){return new $.prototype.init(e,t,n,r,i)}function I(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t){n=wn[i],r["margin"+n]=r["padding"+n]=e}return t&&(r.opacity=r.width=e),r}function z(e){return st.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var X,U,V=e.document,Y=e.location,J=e.jQuery,G=e.$,Q={},K=[],Z="1.9.0",et=K.concat,tt=K.push,nt=K.slice,rt=K.indexOf,it=Q.toString,ot=Q.hasOwnProperty,at=Z.trim,st=function(e,t){return new st.fn.init(e,t,X)},ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,lt=/\S+/g,ct=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ft=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,pt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^[\],:{}\s]*$/,ht=/(?:^|:|,)(?:\s*\[)+/g,gt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,mt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,yt=/^-ms-/,vt=/-([\da-z])/gi,bt=function(e,t){return t.toUpperCase()},xt=function(){V.addEventListener?(V.removeEventListener("DOMContentLoaded",xt,!1),st.ready()):"complete"===V.readyState&&(V.detachEvent("onreadystatechange",xt),st.ready())};st.fn=st.prototype={jquery:Z,constructor:st,init:function(e,n,r){var i,o;if(!e){return this}if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ft.exec(e),!i||!i[1]&&n){return !n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}if(i[1]){if(n=n instanceof st?n[0]:n,st.merge(this,st.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:V,!0)),pt.test(i[1])&&st.isPlainObject(n)){for(i in n){st.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i])}}return this}if(o=V.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2]){return r.find(e)}this.length=1,this[0]=o}return this.context=V,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):st.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),st.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return nt.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=st.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return st.each(this,e,t)},ready:function(e){return st.ready.promise().done(e),this},slice:function(){return this.pushStack(nt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(st.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:tt,sort:[].sort,splice:[].splice},st.fn.init.prototype=st.fn,st.extend=st.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||st.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++){if(null!=(e=arguments[u])){for(n in e){r=s[n],i=e[n],s!==i&&(c&&i&&(st.isPlainObject(i)||(o=st.isArray(i)))?(o?(o=!1,a=r&&st.isArray(r)?r:[]):a=r&&st.isPlainObject(r)?r:{},s[n]=st.extend(c,a,i)):i!==t&&(s[n]=i))}}}return s},st.extend({noConflict:function(t){return e.$===st&&(e.$=G),t&&e.jQuery===st&&(e.jQuery=J),st},isReady:!1,readyWait:1,holdReady:function(e){e?st.readyWait++:st.ready(!0)},ready:function(e){if(e===!0?!--st.readyWait:!st.isReady){if(!V.body){return setTimeout(st.ready)}st.isReady=!0,e!==!0&&--st.readyWait>0||(U.resolveWith(V,[st]),st.fn.trigger&&st(V).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===st.type(e)},isArray:Array.isArray||function(e){return"array"===st.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Q[it.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==st.type(e)||e.nodeType||st.isWindow(e)){return !1}try{if(e.constructor&&!ot.call(e,"constructor")&&!ot.call(e.constructor.prototype,"isPrototypeOf")){return !1}}catch(n){return !1}var r;for(r in e){}return r===t||ot.call(e,r)},isEmptyObject:function(e){var t;for(t in e){return !1}return !0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e){return null}"boolean"==typeof t&&(n=t,t=!1),t=t||V;var r=pt.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=st.buildFragment([e],t,i),i&&st(i).remove(),st.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=st.trim(n),n&&dt.test(n.replace(gt,"@").replace(mt,"]").replace(ht,"")))?Function("return "+n)():(st.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n){return null}try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||st.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&st.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(yt,"ms-").replace(vt,bt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s){for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++){}}else{for(o in e){if(i=t.apply(e[o],r),i===!1){break}}}}else{if(s){for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++){}}else{for(o in e){if(i=t.call(e[o],o,e[o]),i===!1){break}}}}return e},trim:at&&!at.call("\ufeff\u00a0")?function(e){return null==e?"":at.call(e)}:function(e){return null==e?"":(e+"").replace(ct,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?st.merge(r,"string"==typeof e?[e]:e):tt.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(rt){return rt.call(t,e,n)}for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++){if(n in t&&t[n]===e){return n}}}return -1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r){for(;r>o;o++){e[i++]=n[o]}}else{for(;n[o]!==t;){e[i++]=n[o++]}}return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++){r=!!t(e[o],o),n!==r&&i.push(e[o])}return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),u=[];if(s){for(;a>o;o++){i=t(e[o],o,r),null!=i&&(u[u.length]=i)}}else{for(o in e){i=t(e[o],o,r),null!=i&&(u[u.length]=i)}}return et.apply([],u)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(r=e[n],n=e,e=r),st.isFunction(e)?(i=nt.call(arguments,2),o=function(){return e.apply(n||this,i.concat(nt.call(arguments)))},o.guid=e.guid=e.guid||st.guid++,o):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===st.type(r)){o=!0;for(u in r){st.access(e,n,u,r[u],!0,a,s)}}else{if(i!==t&&(o=!0,st.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(st(e),n)})),n)){for(;l>u;u++){n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)))}}}return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),st.ready.promise=function(t){if(!U){if(U=st.Deferred(),"complete"===V.readyState){setTimeout(st.ready)}else{if(V.addEventListener){V.addEventListener("DOMContentLoaded",xt,!1),e.addEventListener("load",st.ready,!1)}else{V.attachEvent("onreadystatechange",xt),e.attachEvent("onload",st.ready);var n=!1;try{n=null==e.frameElement&&V.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!st.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}st.ready()}}()}}}return U.promise(t)},st.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Q["[object "+t+"]"]=t.toLowerCase()}),X=st(V);var Tt={};st.Callbacks=function(e){e="string"==typeof e?Tt[e]||r(e):st.extend({},e);var n,i,o,a,s,u,l=[],c=!e.once&&[],f=function(t){for(n=e.memory&&t,i=!0,u=a||0,a=0,s=l.length,o=!0;l&&s>u;u++){if(l[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}}o=!1,l&&(c?c.length&&f(c.shift()):n?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;(function r(t){st.each(t,function(t,n){var i=st.type(n);"function"===i?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})})(arguments),o?s=l.length:n&&(a=t,f(n))}return this},remove:function(){return l&&st.each(arguments,function(e,t){for(var n;(n=st.inArray(t,l,n))>-1;){l.splice(n,1),o&&(s>=n&&s--,u>=n&&u--)}}),this},has:function(e){return st.inArray(e,l)>-1},empty:function(){return l=[],this},disable:function(){return l=c=n=t,this},disabled:function(){return !l},lock:function(){return c=t,n||p.disable(),this},locked:function(){return !c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||i&&!c||(o?c.push(t):f(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return !!i}};return p},st.extend({Deferred:function(e){var t=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return st.Deferred(function(n){st.each(t,function(t,o){var a=o[0],s=st.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&st.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?st.extend(e,r):r}},i={};return r.pipe=r.then,st.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=nt.call(arguments),a=o.length,s=1!==a||e&&st.isFunction(e.promise)?a:0,u=1===s?e:st.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?nt.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1){for(t=Array(a),n=Array(a),r=Array(a);a>i;i++){o[i]&&st.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--s}}return s||u.resolveWith(r,o),u.promise()}}),st.support=function(){var n,r,i,o,a,s,u,l,c,f,p=V.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=p.getElementsByTagName("*"),i=p.getElementsByTagName("a")[0],!r||!i||!r.length){return{}}o=V.createElement("select"),a=o.appendChild(V.createElement("option")),s=p.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",n={getSetAttribute:"t"!==p.className,leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!s.value,optSelected:a.selected,enctype:!!V.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==V.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===V.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},s.checked=!0,n.noCloneChecked=s.cloneNode(!0).checked,o.disabled=!0,n.optDisabled=!a.disabled;try{delete p.test}catch(d){n.deleteExpando=!1}s=V.createElement("input"),s.setAttribute("value",""),n.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),n.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),u=V.createDocumentFragment(),u.appendChild(s),n.appendChecked=s.checked,n.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){n.noCloneEvent=!1}),p.cloneNode(!0).click());for(f in {submit:!0,change:!0,focusin:!0}){p.setAttribute(l="on"+f,"t"),n[f+"Bubbles"]=l in e||p.attributes[l].expando===!1}return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",n.clearCloneStyle="content-box"===p.style.backgroundClip,st(function(){var r,i,o,a="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=V.getElementsByTagName("body")[0];s&&(r=V.createElement("div"),r.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(r).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",n.reliableHiddenOffsets=c&&0===o[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",n.boxSizing=4===p.offsetWidth,n.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,e.getComputedStyle&&(n.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,n.boxSizingReliable="4px"===(e.getComputedStyle(p,null)||{width:"4px"}).width,i=p.appendChild(V.createElement("div")),i.style.cssText=p.style.cssText=a,i.style.marginRight=i.style.width="0",p.style.width="1px",n.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),p.style.zoom!==t&&(p.innerHTML="",p.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",n.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",n.shrinkWrapBlocks=3!==p.offsetWidth,s.style.zoom=1),s.removeChild(r),r=p=o=i=null)}),r=o=u=a=i=s=null,n}();var wt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Nt=/([A-Z])/g;st.extend({cache:{},expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?st.cache[e[st.expando]]:e[st.expando],!!e&&!s(e)},data:function(e,t,n){return i(e,t,n,!1)},removeData:function(e,t){return o(e,t,!1)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){var t=e.nodeName&&st.noData[e.nodeName.toLowerCase()];return !t||t!==!0&&e.getAttribute("classid")===t}}),st.fn.extend({data:function(e,n){var r,i,o=this[0],s=0,u=null;if(e===t){if(this.length&&(u=st.data(o),1===o.nodeType&&!st._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>s;s++){i=r[s].name,i.indexOf("data-")||(i=st.camelCase(i.substring(5)),a(o,i,u[i]))}st._data(o,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){st.data(this,e)}):st.access(this,function(n){return n===t?o?a(o,e,st.data(o,e)):null:(this.each(function(){st.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){st.removeData(this,e)})}}),st.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=st._data(e,n),r&&(!i||st.isArray(r)?i=st._data(e,n,st.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=st.queue(e,t),r=n.length,i=n.shift(),o=st._queueHooks(e,t),a=function(){st.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return st._data(e,n)||st._data(e,n,{empty:st.Callbacks("once memory").add(function(){st._removeData(e,t+"queue"),st._removeData(e,n)})})}}),st.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?st.queue(this[0],e):n===t?this:this.each(function(){var t=st.queue(this,e,n);st._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&st.dequeue(this,e)})},dequeue:function(e){return this.each(function(){st.dequeue(this,e)})},delay:function(e,t){return e=st.fx?st.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=st.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;){r=st._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u))}return u(),o.promise(n)}});var Ct,kt,Et=/[\t\r\n]/g,St=/\r/g,At=/^(?:input|select|textarea|button|object)$/i,jt=/^(?:a|area)$/i,Dt=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Lt=/^(?:checked|selected)$/i,Ht=st.support.getSetAttribute,Mt=st.support.input;st.fn.extend({attr:function(e,t){return st.access(this,st.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){st.removeAttr(this,e)})},prop:function(e,t){return st.access(this,st.prop,e,t,arguments.length>1)},removeProp:function(e){return e=st.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(st.isFunction(e)){return this.each(function(t){st(this).addClass(e.call(this,t,this.className))})}if(u){for(t=(e||"").match(lt)||[];s>a;a++){if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Et," "):" ")){for(o=0;i=t[o++];){0>r.indexOf(" "+i+" ")&&(r+=i+" ")}n.className=st.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(st.isFunction(e)){return this.each(function(t){st(this).removeClass(e.call(this,t,this.className))})}if(u){for(t=(e||"").match(lt)||[];s>a;a++){if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Et," "):"")){for(o=0;i=t[o++];){for(;r.indexOf(" "+i+" ")>=0;){r=r.replace(" "+i+" "," ")}}n.className=e?st.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return st.isFunction(e)?this.each(function(n){st(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){for(var i,o=0,a=st(this),s=t,u=e.match(lt)||[];i=u[o++];){s=r?s:!a.hasClass(i),a[s?"addClass":"removeClass"](i)}}else{("undefined"===n||"boolean"===n)&&(this.className&&st._data(this,"__className__",this.className),this.className=this.className||e===!1?"":st._data(this,"__className__")||"")}})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++){if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Et," ").indexOf(t)>=0){return !0}}return !1},val:function(e){var n,r,i,o=this[0];if(arguments.length){return i=st.isFunction(e),this.each(function(r){var o,a=st(this);1===this.nodeType&&(o=i?e.call(this,r,a.val()):e,null==o?o="":"number"==typeof o?o+="":st.isArray(o)&&(o=st.map(o,function(e){return null==e?"":e+""})),n=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],n&&"set" in n&&n.set(this,o,"value")!==t||(this.value=o))})}if(o){return n=st.valHooks[o.type]||st.valHooks[o.nodeName.toLowerCase()],n&&"get" in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,"string"==typeof r?r.replace(St,""):null==r?"":r)}}}),st.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return !t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++){if(n=r[u],!(!n.selected&&u!==i||(st.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&st.nodeName(n.parentNode,"optgroup"))){if(t=st(n).val(),o){return t}a.push(t)}}return a},set:function(e,t){var n=st.makeArray(t);return st(e).find("option").each(function(){this.selected=st.inArray(st(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s){return e.getAttribute===t?st.prop(e,n,r):(a=1!==s||!st.isXMLDoc(e),a&&(n=n.toLowerCase(),o=st.attrHooks[n]||(Dt.test(n)?kt:Ct)),r===t?o&&a&&"get" in o&&null!==(i=o.get(e,n))?i:(e.getAttribute!==t&&(i=e.getAttribute(n)),null==i?t:i):null!==r?o&&a&&"set" in o&&(i=o.set(e,r,n))!==t?i:(e.setAttribute(n,r+""),r):(st.removeAttr(e,n),t))}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(lt);if(o&&1===e.nodeType){for(;n=o[i++];){r=st.propFix[n]||n,Dt.test(n)?!Ht&&Lt.test(n)?e[st.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:st.attr(e,n,""),e.removeAttribute(Ht?n:r)}}},attrHooks:{type:{set:function(e,t){if(!st.support.radioValue&&"radio"===t&&st.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s){return a=1!==s||!st.isXMLDoc(e),a&&(n=st.propFix[n]||n,o=st.propHooks[n]),r!==t?o&&"set" in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get" in o&&null!==(i=o.get(e,n))?i:e[n]}},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):At.test(e.nodeName)||jt.test(e.nodeName)&&e.href?0:t}}}}),kt={get:function(e,n){var r=st.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?Mt&&Ht?null!=i:Lt.test(n)?e[st.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?st.removeAttr(e,n):Mt&&Ht||!Lt.test(n)?e.setAttribute(!Ht&&st.propFix[n]||n,n):e[st.camelCase("default-"+n)]=e[n]=!0,n}},Mt&&Ht||(st.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return st.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return st.nodeName(e,"input")?(e.defaultValue=n,t):Ct&&Ct.set(e,n,r)}}),Ht||(Ct=st.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},st.attrHooks.contenteditable={get:Ct.get,set:function(e,t,n){Ct.set(e,""===t?!1:t,n)}},st.each(["width","height"],function(e,n){st.attrHooks[n]=st.extend(st.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),st.support.hrefNormalized||(st.each(["href","src","width","height"],function(e,n){st.attrHooks[n]=st.extend(st.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),st.each(["href","src"],function(e,t){st.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),st.support.style||(st.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),st.support.optSelected||(st.propHooks.selected=st.extend(st.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),st.support.enctype||(st.propFix.enctype="encoding"),st.support.checkOn||st.each(["radio","checkbox"],function(){st.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),st.each(["radio","checkbox"],function(){st.valHooks[this]=st.extend(st.valHooks[this],{set:function(e,n){return st.isArray(n)?e.checked=st.inArray(st(e).val(),n)>=0:t}})});var qt=/^(?:input|select|textarea)$/i,_t=/^key/,Ft=/^(?:mouse|contextmenu)|click/,Ot=/^(?:focusinfocus|focusoutblur)$/,Bt=/^([^.]*)(?:\.(.+)|)$/;st.event={global:{},add:function(e,n,r,i,o){var a,s,u,l,c,f,p,d,h,g,m,y=3!==e.nodeType&&8!==e.nodeType&&st._data(e);if(y){for(r.handler&&(a=r,r=a.handler,o=a.selector),r.guid||(r.guid=st.guid++),(l=y.events)||(l=y.events={}),(s=y.handle)||(s=y.handle=function(e){return st===t||e&&st.event.triggered===e.type?t:st.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=(n||"").match(lt)||[""],c=n.length;c--;){u=Bt.exec(n[c])||[],h=m=u[1],g=(u[2]||"").split(".").sort(),p=st.event.special[h]||{},h=(o?p.delegateType:p.bindType)||h,p=st.event.special[h]||{},f=st.extend({type:h,origType:m,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&st.expr.match.needsContext.test(o),namespace:g.join(".")},a),(d=l[h])||(d=l[h]=[],d.delegateCount=0,p.setup&&p.setup.call(e,i,g,s)!==!1||(e.addEventListener?e.addEventListener(h,s,!1):e.attachEvent&&e.attachEvent("on"+h,s))),p.add&&(p.add.call(e,f),f.handler.guid||(f.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,f):d.push(f),st.event.global[h]=!0}e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,m=st.hasData(e)&&st._data(e);if(m&&(u=m.events)){for(t=(t||"").match(lt)||[""],l=t.length;l--;){if(s=Bt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(f=st.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;){c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c))}a&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||st.removeEvent(e,d,m.handle),delete u[d])}else{for(d in u){st.event.remove(e,d+t[l],n,r,!0)}}}st.isEmptyObject(u)&&(delete m.handle,st._removeData(e,"events"))}},trigger:function(n,r,i,o){var a,s,u,l,c,f,p,d=[i||V],h=n.type||n,g=n.namespace?n.namespace.split("."):[];if(s=u=i=i||V,3!==i.nodeType&&8!==i.nodeType&&!Ot.test(h+st.event.triggered)&&(h.indexOf(".")>=0&&(g=h.split("."),h=g.shift(),g.sort()),c=0>h.indexOf(":")&&"on"+h,n=n[st.expando]?n:new st.Event(h,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:st.makeArray(r,[n]),p=st.event.special[h]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!st.isWindow(i)){for(l=p.delegateType||h,Ot.test(l+h)||(s=s.parentNode);s;s=s.parentNode){d.push(s),u=s}u===(i.ownerDocument||V)&&d.push(u.defaultView||u.parentWindow||e)}for(a=0;(s=d[a++])&&!n.isPropagationStopped();){n.type=a>1?l:p.bindType||h,f=(st._data(s,"events")||{})[n.type]&&st._data(s,"handle"),f&&f.apply(s,r),f=c&&s[c],f&&st.acceptData(s)&&f.apply&&f.apply(s,r)===!1&&n.preventDefault()}if(n.type=h,!(o||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===h&&st.nodeName(i,"a")||!st.acceptData(i)||!c||!i[h]||st.isWindow(i))){u=i[c],u&&(i[c]=null),st.event.triggered=h;try{i[h]()}catch(m){}st.event.triggered=t,u&&(i[c]=u)}return n.result}},dispatch:function(e){e=st.event.fix(e);var n,r,i,o,a,s=[],u=nt.call(arguments),l=(st._data(this,"events")||{})[e.type]||[],c=st.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=st.event.handlers.call(this,e,l),n=0;(o=s[n++])&&!e.isPropagationStopped();){for(e.currentTarget=o.elem,r=0;(a=o.handlers[r++])&&!e.isImmediatePropagationStopped();){(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,i=((st.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}}return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type)){for(;l!=this;l=l.parentNode||this){if(l.disabled!==!0||"click"!==e.type){for(i=[],r=0;u>r;r++){a=n[r],o=a.selector+" ",i[o]===t&&(i[o]=a.needsContext?st(o,this).index(l)>=0:st.find(o,this,null,[l]).length),i[o]&&i.push(a)}i.length&&s.push({elem:l,handlers:i})}}}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[st.expando]){return e}var t,n,r=e,i=st.event.fixHooks[e.type]||{},o=i.props?this.props.concat(i.props):this.props;for(e=new st.Event(r),t=o.length;t--;){n=o[t],e[n]=r[n]}return e.target||(e.target=r.srcElement||V),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||V,i=r.documentElement,o=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return st.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==V.activeElement&&this.focus){try{return this.focus(),!1}catch(e){}}},delegateType:"focusin"},blur:{trigger:function(){return this===V.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=st.extend(new st.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?st.event.trigger(i,null,t):st.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},st.removeEvent=V.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,n,r){var i="on"+n;e.detachEvent&&(e[i]===t&&(e[i]=null),e.detachEvent(i,r))},st.Event=function(e,n){return this instanceof st.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?u:l):this.type=e,n&&st.extend(this,n),this.timeStamp=e&&e.timeStamp||st.now(),this[st.expando]=!0,t):new st.Event(e,n)},st.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u,this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){st.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!st.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),st.support.submitBubbles||(st.event.special.submit={setup:function(){return st.nodeName(this,"form")?!1:(st.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=st.nodeName(n,"input")||st.nodeName(n,"button")?n.form:t;r&&!st._data(r,"submitBubbles")&&(st.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),st._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&st.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return st.nodeName(this,"form")?!1:(st.event.remove(this,"._submit"),t)}}),st.support.changeBubbles||(st.event.special.change={setup:function(){return qt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(st.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),st.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),st.event.simulate("change",this,e,!0)})),!1):(st.event.add(this,"beforeactivate._change",function(e){var t=e.target;qt.test(t.nodeName)&&!st._data(t,"changeBubbles")&&(st.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||st.event.simulate("change",this.parentNode,e,!0)}),st._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return st.event.remove(this,"._change"),!qt.test(this.nodeName)}}),st.support.focusinBubbles||st.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){st.event.simulate(t,e.target,st.event.fix(e),!0)};st.event.special[t]={setup:function(){0===n++&&V.addEventListener(e,r,!0)},teardown:function(){0===--n&&V.removeEventListener(e,r,!0)}}}),st.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(s in e){this.on(s,n,r,e[s],o)}return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1){i=l}else{if(!i){return this}}return 1===o&&(a=i,i=function(e){return st().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=st.guid++)),this.each(function(){st.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj){return i=e.handleObj,st(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this}if("object"==typeof e){for(o in e){this.off(o,n,e[o])}return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=l),this.each(function(){st.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){st.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?st.event.trigger(e,n,r,!0):t},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){st.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)},_t.test(t)&&(st.event.fixHooks[t]=st.event.keyHooks),Ft.test(t)&&(st.event.fixHooks[t]=st.event.mouseHooks)}),function(e,t){function n(e){return ht.test(e+"")}function r(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>C.cacheLength&&delete e[t.shift()],e[n]=r}}function i(e){return e[P]=!0,e}function o(e){var t=L.createElement("div");try{return e(t)}catch(n){return !1}finally{t=null}}function a(e,t,n,r){var i,o,a,s,u,l,c,d,h,g;if((t?t.ownerDocument||t:R)!==L&&D(t),t=t||L,n=n||[],!e||"string"!=typeof e){return n}if(1!==(s=t.nodeType)&&9!==s){return[]}if(!M&&!r){if(i=gt.exec(e)){if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode){return n}if(o.id===a){return n.push(o),n}}else{if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&O(t,o)&&o.id===a){return n.push(o),n}}}else{if(i[2]){return Q.apply(n,K.call(t.getElementsByTagName(e),0)),n}if((a=i[3])&&W.getByClassName&&t.getElementsByClassName){return Q.apply(n,K.call(t.getElementsByClassName(a),0)),n}}}if(W.qsa&&!q.test(e)){if(c=!0,d=P,h=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=f(e),(c=t.getAttribute("id"))?d=c.replace(vt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;){l[u]=d+p(l[u])}h=dt.test(e)&&t.parentNode||t,g=l.join(",")}if(g){try{return Q.apply(n,K.call(h.querySelectorAll(g),0)),n}catch(m){}finally{c||t.removeAttribute("id")}}}}return x(e.replace(at,"$1"),t,n,r)}function s(e,t){for(var n=e&&t&&e.nextSibling;n;n=n.nextSibling){if(n===t){return -1}}return e?1:-1}function u(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;){n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}})})}function f(e,t){var n,r,i,o,s,u,l,c=X[e+" "];if(c){return t?0:c.slice(0)}for(s=e,u=[],l=C.preFilter;s;){(!n||(r=ut.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(i=[])),n=!1,(r=lt.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(at," ")}),s=s.slice(n.length));for(o in C.filter){!(r=pt[o].exec(s))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length))}if(!n){break}}return t?s.length:s?a.error(e):X(e,u).slice(0)}function p(e){for(var t=0,n=e.length,r="";n>t;t++){r+=e[t].value}return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===t.dir,o=I++;return t.first?function(t,n,o){for(;t=t[r];){if(1===t.nodeType||i){return e(t,n,o)}}}:function(t,n,a){var s,u,l,c=$+" "+o;if(a){for(;t=t[r];){if((1===t.nodeType||i)&&e(t,n,a)){return !0}}}else{for(;t=t[r];){if(1===t.nodeType||i){if(l=t[P]||(t[P]={}),(u=l[r])&&u[0]===c){if((s=u[1])===!0||s===N){return s===!0}}else{if(u=l[r]=[c],u[1]=e(t,n,a)||N,u[1]===!0){return !0}}}}}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;){if(!e[i](t,n,r)){return !1}}return !0}:e[0]}function g(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++){(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s))}return a}function m(e,t,n,r,o,a){return r&&!r[P]&&(r=m(r)),o&&!o[P]&&(o=m(o,a)),i(function(i,a,s,u){var l,c,f,p=[],d=[],h=a.length,m=i||b(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?m:g(m,p,e,s,u),v=n?o||(i?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){for(l=g(v,d),r(l,[],s,u),c=l.length;c--;){(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}}if(i){if(o||e){if(o){for(l=[],c=v.length;c--;){(f=v[c])&&l.push(y[c]=f)}o(null,v=[],l,u)}for(c=v.length;c--;){(f=v[c])&&(l=o?Z.call(i,f):p[c])>-1&&(i[l]=!(a[l]=f))}}}else{v=g(v===a?v.splice(h,v.length):v),o?o(null,a,v,u):Q.apply(a,v)}})}function y(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,u=d(function(e){return e===t},a,!0),l=d(function(e){return Z.call(t,e)>-1},a,!0),c=[function(e,n,r){return !o&&(r||n!==j)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];i>s;s++){if(n=C.relative[e[s].type]){c=[d(h(c),n)]}else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[P]){for(r=++s;i>r&&!C.relative[e[r].type];r++){}return m(s>1&&h(c),s>1&&p(e.slice(0,s-1)).replace(at,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}}return h(c)}function v(e,t){var n=0,r=t.length>0,o=e.length>0,s=function(i,s,u,l,c){var f,p,d,h=[],m=0,y="0",v=i&&[],b=null!=c,x=j,T=i||o&&C.find.TAG("*",c&&s.parentNode||s),w=$+=null==x?1:Math.E;for(b&&(j=s!==L&&s,N=n);null!=(f=T[y]);y++){if(o&&f){for(p=0;d=e[p];p++){if(d(f,s,u)){l.push(f);break}}b&&($=w,N=++n)}r&&((f=!d&&f)&&m--,i&&v.push(f))}if(m+=y,r&&y!==m){for(p=0;d=t[p];p++){d(v,h,s,u)}if(i){if(m>0){for(;y--;){v[y]||h[y]||(h[y]=G.call(l))}}h=g(h)}Q.apply(l,h),b&&!i&&h.length>0&&m+t.length>1&&a.uniqueSort(l)}return b&&($=w,j=x),v};return r?i(s):s}function b(e,t,n){for(var r=0,i=t.length;i>r;r++){a(e,t[r],n)}return n}function x(e,t,n,r){var i,o,a,s,u,l=f(e);if(!r&&1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&!M&&C.relative[o[1].type]){if(t=C.find.ID(a.matches[0].replace(xt,Tt),t)[0],!t){return n}e=e.slice(o.shift().value.length)}for(i=pt.needsContext.test(e)?-1:o.length-1;i>=0&&(a=o[i],!C.relative[s=a.type]);i--){if((u=C.find[s])&&(r=u(a.matches[0].replace(xt,Tt),dt.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=r.length&&p(o),!e){return Q.apply(n,K.call(r,0)),n}break}}}return S(e,l)(r,t,M,n,dt.test(e)),n}function T(){}var w,N,C,k,E,S,A,j,D,L,H,M,q,_,F,O,B,P="sizzle"+-new Date,R=e.document,W={},$=0,I=0,z=r(),X=r(),U=r(),V=typeof t,Y=1<<31,J=[],G=J.pop,Q=J.push,K=J.slice,Z=J.indexOf||function(e){for(var t=0,n=this.length;n>t;t++){if(this[t]===e){return t}}return -1},et="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=tt.replace("w","w#"),rt="([*^$|!~]?=)",it="\\["+et+"*("+tt+")"+et+"*(?:"+rt+et+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+nt+")|)|)"+et+"*\\]",ot=":("+tt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+it.replace(3,8)+")*)|.*)\\)|)",at=RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),ut=RegExp("^"+et+"*,"+et+"*"),lt=RegExp("^"+et+"*([\\x20\\t\\r\\n\\f>+~])"+et+"*"),ct=RegExp(ot),ft=RegExp("^"+nt+"$"),pt={ID:RegExp("^#("+tt+")"),CLASS:RegExp("^\\.("+tt+")"),NAME:RegExp("^\\[name=['\"]?("+tt+")['\"]?\\]"),TAG:RegExp("^("+tt.replace("w","w*")+")"),ATTR:RegExp("^"+it),PSEUDO:RegExp("^"+ot),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),needsContext:RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},dt=/[\x20\t\r\n\f]*[+~]/,ht=/\{\s*\[native code\]\s*\}/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,vt=/'|\\/g,bt=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,xt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,Tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{K.call(H.childNodes,0)[0].nodeType}catch(wt){K=function(e){for(var t,n=[];t=this[e];e++){n.push(t)}return n}}E=a.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=a.setDocument=function(e){var r=e?e.ownerDocument||e:R;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,H=r.documentElement,M=E(r),W.tagNameNoComments=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),W.attributes=o(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),W.getByClassName=o(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),W.getByName=o(function(e){e.id=P+0,e.innerHTML="<a name='"+P+"'></a><div name='"+P+"'></div>",H.insertBefore(e,H.firstChild);var t=r.getElementsByName&&r.getElementsByName(P).length===2+r.getElementsByName(P+0).length;return W.getIdNotName=!r.getElementById(P),H.removeChild(e),t}),C.attrHandle=o(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==V&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},W.getIdNotName?(C.find.ID=function(e,t){if(typeof t.getElementById!==V&&!M){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(xt,Tt);return function(e){return e.getAttribute("id")===t}}):(C.find.ID=function(e,n){if(typeof n.getElementById!==V&&!M){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==V&&r.getAttributeNode("id").value===e?[r]:t:[]}},C.filter.ID=function(e){var t=e.replace(xt,Tt);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=W.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==V?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i];i++){1===n.nodeType&&r.push(n)}return r}return o},C.find.NAME=W.getByName&&function(e,n){return typeof n.getElementsByName!==V?n.getElementsByName(name):t},C.find.CLASS=W.getByClassName&&function(e,n){return typeof n.getElementsByClassName===V||M?t:n.getElementsByClassName(e)},_=[],q=[":focus"],(W.qsa=n(r.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||q.push("\\["+et+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||q.push(":checked")}),o(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&q.push("[*^$]="+et+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),q.push(",.*:")})),(W.matchesSelector=n(F=H.matchesSelector||H.mozMatchesSelector||H.webkitMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&o(function(e){W.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),_.push("!=",ot)}),q=RegExp(q.join("|")),_=RegExp(_.join("|")),O=n(H.contains)||H.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t){for(;t=t.parentNode;){if(t===e){return !0}}}return !1},B=H.compareDocumentPosition?function(e,t){var n;return e===t?(A=!0,0):(n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&n||e.parentNode&&11===e.parentNode.nodeType?e===r||O(R,e)?-1:t===r||O(R,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(e===t){return A=!0,0}if(e.sourceIndex&&t.sourceIndex){return(~t.sourceIndex||Y)-(O(R,e)&&~e.sourceIndex||Y)}if(!o||!a){return e===r?-1:t===r?1:o?-1:a?1:0}if(o===a){return s(e,t)}for(n=e;n=n.parentNode;){u.unshift(n)}for(n=t;n=n.parentNode;){l.unshift(n)}for(;u[i]===l[i];){i++}return i?s(u[i],l[i]):u[i]===R?-1:l[i]===R?1:0},A=!1,[0,0].sort(B),W.detectDuplicates=A,L):L},a.matches=function(e,t){return a(e,null,null,t)},a.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&D(e),t=t.replace(bt,"='$1']"),!(!W.matchesSelector||M||_&&_.test(t)||q.test(t))){try{var n=F.call(e,t);if(n||W.disconnectedMatch||e.document&&11!==e.document.nodeType){return n}}catch(r){}}return a(t,L,null,[e]).length>0},a.contains=function(e,t){return(e.ownerDocument||e)!==L&&D(e),O(e,t)},a.attr=function(e,t){var n;return(e.ownerDocument||e)!==L&&D(e),M||(t=t.toLowerCase()),(n=C.attrHandle[t])?n(e):M||W.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},a.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},a.uniqueSort=function(e){var t,n=[],r=1,i=0;if(A=!W.detectDuplicates,e.sort(B),A){for(;t=e[r];r++){t===e[r-1]&&(i=n.push(r))}for(;i--;){e.splice(n[i],1)}}return e},k=a.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent){return e.textContent}for(e=e.firstChild;e;e=e.nextSibling){n+=k(e)}}else{if(3===i||4===i){return e.nodeValue}}}else{for(;t=e[r];r++){n+=k(t)}}return n},C=a.selectors={cacheLength:50,createPseudo:i,match:pt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,Tt),e[3]=(e[4]||e[5]||"").replace(xt,Tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||a.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&a.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return pt.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ct.test(n)&&(t=f(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return !0}:(e=e.replace(xt,Tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=z[e+" "];return t||(t=RegExp("(^|"+et+")"+e+"("+et+"|$)"))&&z(e,function(e){return t.test(e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=a.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.substr(i.length-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return !!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){for(;g;){for(f=t;f=f[g];){if(s?f.nodeName.toLowerCase()===y:1===f.nodeType){return !1}}h=g="only"===e&&!h&&"nextSibling"}return !0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(c=m[P]||(m[P]={}),l=c[e]||[],d=l[0]===$&&l[1],p=l[0]===$&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(p=d=0)||h.pop();){if(1===f.nodeType&&++p&&f===t){c[e]=[$,d,p];break}}}else{if(v&&(l=(t[P]||(t[P]={}))[e])&&l[0]===$){p=l[1]}else{for(;(f=++d&&f&&f[g]||(p=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++p||(v&&((f[P]||(f[P]={}))[e]=[$,p]),f!==t));){}}}return p-=i,p===r||0===p%r&&p/r>=0}}},PSEUDO:function(e,t){var n,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||a.error("unsupported pseudo: "+e);return r[P]?r(t):r.length>1?(n=[e,e,"",t],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,o=r(e,t),a=o.length;a--;){i=Z.call(e,o[a]),e[i]=!(n[i]=o[a])}}):function(e){return r(e,0,n)}):r}},pseudos:{not:i(function(e){var t=[],n=[],r=S(e.replace(at,"$1"));return r[P]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;){(o=a[s])&&(e[s]=!(t[s]=o))}}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(t){return a(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return ft.test(e||"")||a.error("unsupported lang: "+e),e=e.replace(xt,Tt).toLowerCase(),function(t){var n;do{if(n=M?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang){return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-")}}while((t=t.parentNode)&&1===t.nodeType);return !1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType){return !1}}return !0},parent:function(e){return !C.pseudos.empty(e)},header:function(e){return yt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2){e.push(n)}return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2){e.push(n)}return e}),lt:c(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;){e.push(r)}return e}),gt:c(function(e,t,n){for(var r=0>n?n+t:n;t>++r;){e.push(r)}return e})}};for(w in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){C.pseudos[w]=u(w)}for(w in {submit:!0,reset:!0}){C.pseudos[w]=l(w)}S=a.compile=function(e,t){var n,r=[],i=[],o=U[e+" "];if(!o){for(t||(t=f(e)),n=t.length;n--;){o=y(t[n]),o[P]?r.push(o):i.push(o)}o=U(e,v(i,r))}return o},C.pseudos.nth=C.pseudos.eq,C.filters=T.prototype=C.pseudos,C.setFilters=new T,D(),a.attr=st.attr,st.find=a,st.expr=a.selectors,st.expr[":"]=st.expr.pseudos,st.unique=a.uniqueSort,st.text=a.getText,st.isXMLDoc=a.isXML,st.contains=a.contains}(e);var Pt=/Until$/,Rt=/^(?:parents|prev(?:Until|All))/,Wt=/^.[^:#\[\.,]*$/,$t=st.expr.match.needsContext,It={children:!0,contents:!0,next:!0,prev:!0};st.fn.extend({find:function(e){var t,n,r;if("string"!=typeof e){return r=this,this.pushStack(st(e).filter(function(){for(t=0;r.length>t;t++){if(st.contains(r[t],this)){return !0}}}))}for(n=[],t=0;this.length>t;t++){st.find(e,this[t],n)}return n=this.pushStack(st.unique(n)),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=st(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++){if(st.contains(this,n[t])){return !0}}})},not:function(e){return this.pushStack(f(this,e,!1))},filter:function(e){return this.pushStack(f(this,e,!0))},is:function(e){return !!e&&("string"==typeof e?$t.test(e)?st(e,this.context).index(this[0])>=0:st.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=$t.test(e)||"string"!=typeof e?st(e,t||this.context):0;i>r;r++){for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?a.index(n)>-1:st.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length>1?st.unique(o):o)},index:function(e){return e?"string"==typeof e?st.inArray(this[0],st(e)):st.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?st(e,t):st.makeArray(e&&e.nodeType?[e]:e),r=st.merge(this.get(),n);return this.pushStack(st.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),st.fn.andSelf=st.fn.addBack,st.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return st.dir(e,"parentNode")},parentsUntil:function(e,t,n){return st.dir(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return st.dir(e,"nextSibling")},prevAll:function(e){return st.dir(e,"previousSibling")},nextUntil:function(e,t,n){return st.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return st.dir(e,"previousSibling",n)},siblings:function(e){return st.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return st.sibling(e.firstChild)},contents:function(e){return st.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:st.merge([],e.childNodes)}},function(e,t){st.fn[e]=function(n,r){var i=st.map(this,t,n);return Pt.test(e)||(r=n),r&&"string"==typeof r&&(i=st.filter(r,i)),i=this.length>1&&!It[e]?st.unique(i):i,this.length>1&&Rt.test(e)&&(i=i.reverse()),this.pushStack(i)}}),st.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?st.find.matchesSelector(t[0],e)?[t[0]]:[]:st.find.matches(e,t)},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!st(o).is(r));){1===o.nodeType&&i.push(o),o=o[n]}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling){1===e.nodeType&&e!==t&&n.push(e)}return n}});var zt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Xt=/ jQuery\d+="(?:null|\d+)"/g,Ut=RegExp("<(?:"+zt+")[\\s/>]","i"),Vt=/^\s+/,Yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Jt=/<([\w:]+)/,Gt=/<tbody/i,Qt=/<|&#?\w+;/,Kt=/<(?:script|style|link)/i,Zt=/^(?:checkbox|radio)$/i,en=/checked\s*(?:[^=]|=\s*.checked.)/i,tn=/^$|\/(?:java|ecma)script/i,nn=/^true\/(.*)/,rn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,on={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:st.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},an=p(V),sn=an.appendChild(V.createElement("div"));on.optgroup=on.option,on.tbody=on.tfoot=on.colgroup=on.caption=on.thead,on.th=on.td,st.fn.extend({text:function(e){return st.access(this,function(e){return e===t?st.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(st.isFunction(e)){return this.each(function(t){st(this).wrapAll(e.call(this,t))})}if(this[0]){var t=st(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;){e=e.firstChild}return e}).append(this)}return this},wrapInner:function(e){return st.isFunction(e)?this.each(function(t){st(this).wrapInner(e.call(this,t))}):this.each(function(){var t=st(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=st.isFunction(e);return this.each(function(n){st(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++){(!e||st.filter(e,[n]).length>0)&&(t||1!==n.nodeType||st.cleanData(b(n)),n.parentNode&&(t&&st.contains(n.ownerDocument,n)&&m(b(n,"script")),n.parentNode.removeChild(n)))}return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&st.cleanData(b(e,!1));e.firstChild;){e.removeChild(e.firstChild)}e.options&&st.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return st.clone(this,e,t)})},html:function(e){return st.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t){return 1===n.nodeType?n.innerHTML.replace(Xt,""):t}if(!("string"!=typeof e||Kt.test(e)||!st.support.htmlSerialize&&Ut.test(e)||!st.support.leadingWhitespace&&Vt.test(e)||on[(Jt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Yt,"<$1></$2>");try{for(;i>r;r++){n=this[r]||{},1===n.nodeType&&(st.cleanData(b(n,!1)),n.innerHTML=e)}n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=st.isFunction(e);return t||"string"==typeof e||(e=st(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;(n&&1===this.nodeType||11===this.nodeType)&&(st(this).remove(),t?t.parentNode.insertBefore(e,t):n.appendChild(e))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=et.apply([],e);var i,o,a,s,u,l,c=0,f=this.length,p=this,m=f-1,y=e[0],v=st.isFunction(y);if(v||!(1>=f||"string"!=typeof y||st.support.checkClone)&&en.test(y)){return this.each(function(i){var o=p.eq(i);v&&(e[0]=y.call(this,i,n?o.html():t)),o.domManip(e,n,r)})}if(f&&(i=st.buildFragment(e,this[0].ownerDocument,!1,this),o=i.firstChild,1===i.childNodes.length&&(i=o),o)){for(n=n&&st.nodeName(o,"tr"),a=st.map(b(i,"script"),h),s=a.length;f>c;c++){u=i,c!==m&&(u=st.clone(u,!0,!0),s&&st.merge(a,b(u,"script"))),r.call(n&&st.nodeName(this[c],"table")?d(this[c],"tbody"):this[c],u,c)}if(s){for(l=a[a.length-1].ownerDocument,st.map(a,g),c=0;s>c;c++){u=a[c],tn.test(u.type||"")&&!st._data(u,"globalEval")&&st.contains(l,u)&&(u.src?st.ajax({url:u.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):st.globalEval((u.text||u.textContent||u.innerHTML||"").replace(rn,"")))}}i=o=null}return this}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){st.fn[e]=function(e){for(var n,r=0,i=[],o=st(e),a=o.length-1;a>=r;r++){n=r===a?this:this.clone(!0),st(o[r])[t](n),tt.apply(i,n.get())}return this.pushStack(i)}}),st.extend({clone:function(e,t,n){var r,i,o,a,s,u=st.contains(e.ownerDocument,e);if(st.support.html5Clone||st.isXMLDoc(e)||!Ut.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(sn.innerHTML=e.outerHTML,sn.removeChild(s=sn.firstChild)),!(st.support.noCloneEvent&&st.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||st.isXMLDoc(e))){for(r=b(s),i=b(e),a=0;null!=(o=i[a]);++a){r[a]&&v(o,r[a])}}if(t){if(n){for(i=i||b(e),r=r||b(s),a=0;null!=(o=i[a]);a++){y(o,r[a])}}else{y(e,s)}}return r=b(s,"script"),r.length>0&&m(r,!u&&b(e,"script")),r=i=o=null,s},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c,f=e.length,d=p(t),h=[],g=0;f>g;g++){if(o=e[g],o||0===o){if("object"===st.type(o)){st.merge(h,o.nodeType?[o]:o)}else{if(Qt.test(o)){for(s=s||d.appendChild(t.createElement("div")),a=(Jt.exec(o)||["",""])[1].toLowerCase(),u=on[a]||on._default,s.innerHTML=u[1]+o.replace(Yt,"<$1></$2>")+u[2],c=u[0];c--;){s=s.lastChild}if(!st.support.leadingWhitespace&&Vt.test(o)&&h.push(t.createTextNode(Vt.exec(o)[0])),!st.support.tbody){for(o="table"!==a||Gt.test(o)?"<table>"!==u[1]||Gt.test(o)?0:s:s.firstChild,c=o&&o.childNodes.length;c--;){st.nodeName(l=o.childNodes[c],"tbody")&&!l.childNodes.length&&o.removeChild(l)}}for(st.merge(h,s.childNodes),s.textContent="";s.firstChild;){s.removeChild(s.firstChild)}s=d.lastChild}else{h.push(t.createTextNode(o))}}}}for(s&&d.removeChild(s),st.support.appendChecked||st.grep(b(h,"input"),x),g=0;o=h[g++];){if((!r||-1===st.inArray(o,r))&&(i=st.contains(o.ownerDocument,o),s=b(d.appendChild(o),"script"),i&&m(s),n)){for(c=0;o=s[c++];){tn.test(o.type||"")&&n.push(o)}}}return s=null,d},cleanData:function(e,n){for(var r,i,o,a,s=0,u=st.expando,l=st.cache,c=st.support.deleteExpando,f=st.event.special;null!=(o=e[s]);s++){if((n||st.acceptData(o))&&(i=o[u],r=i&&l[i])){if(r.events){for(a in r.events){f[a]?st.event.remove(o,a):st.removeEvent(o,a,r.handle)}}l[i]&&(delete l[i],c?delete o[u]:o.removeAttribute!==t?o.removeAttribute(u):o[u]=null,K.push(i))}}}});var un,ln,cn,fn=/alpha\([^)]*\)/i,pn=/opacity\s*=\s*([^)]*)/,dn=/^(top|right|bottom|left)$/,hn=/^(none|table(?!-c[ea]).+)/,gn=/^margin/,mn=RegExp("^("+ut+")(.*)$","i"),yn=RegExp("^("+ut+")(?!px)[a-z%]+$","i"),vn=RegExp("^([+-])=("+ut+")","i"),bn={BODY:"block"},xn={position:"absolute",visibility:"hidden",display:"block"},Tn={letterSpacing:0,fontWeight:400},wn=["Top","Right","Bottom","Left"],Nn=["Webkit","O","Moz","ms"];st.fn.extend({css:function(e,n){return st.access(this,function(e,n,r){var i,o,a={},s=0;if(st.isArray(n)){for(i=ln(e),o=n.length;o>s;s++){a[n[s]]=st.css(e,n[s],!1,i)}return a}return r!==t?st.style(e,n,r):st.css(e,n)},e,n,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:w(this))?st(this).show():st(this).hide()})}}),st.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=un(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":st.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=st.camelCase(n),l=e.style;if(n=st.cssProps[u]||(st.cssProps[u]=T(l,u)),s=st.cssHooks[n]||st.cssHooks[u],r===t){return s&&"get" in s&&(o=s.get(e,!1,i))!==t?o:l[n]}if(a=typeof r,"string"===a&&(o=vn.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(st.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||st.cssNumber[u]||(r+="px"),st.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set" in s&&(r=s.set(e,r,i))===t))){try{l[n]=r}catch(c){}}}},css:function(e,n,r,i){var o,a,s,u=st.camelCase(n);return n=st.cssProps[u]||(st.cssProps[u]=T(e.style,u)),s=st.cssHooks[n]||st.cssHooks[u],s&&"get" in s&&(o=s.get(e,!0,r)),o===t&&(o=un(e,n,i)),"normal"===o&&n in Tn&&(o=Tn[n]),r?(a=parseFloat(o),r===!0||st.isNumeric(a)?a||0:o):o},swap:function(e,t,n,r){var i,o,a={};for(o in t){a[o]=e.style[o],e.style[o]=t[o]}i=n.apply(e,r||[]);for(o in t){e.style[o]=a[o]}return i}}),e.getComputedStyle?(ln=function(t){return e.getComputedStyle(t,null)},un=function(e,n,r){var i,o,a,s=r||ln(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||st.contains(e.ownerDocument,e)||(u=st.style(e,n)),yn.test(u)&&gn.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):V.documentElement.currentStyle&&(ln=function(e){return e.currentStyle},un=function(e,n,r){var i,o,a,s=r||ln(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),yn.test(u)&&!dn.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u}),st.each(["height","width"],function(e,n){st.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&hn.test(st.css(e,"display"))?st.swap(e,xn,function(){return E(e,n,i)}):E(e,n,i):t},set:function(e,t,r){var i=r&&ln(e);return C(e,t,r?k(e,n,r,st.support.boxSizing&&"border-box"===st.css(e,"boxSizing",!1,i),i):0)}}}),st.support.opacity||(st.cssHooks.opacity={get:function(e,t){return pn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=st.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===st.trim(o.replace(fn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=fn.test(o)?o.replace(fn,i):o+" "+i)}}),st(function(){st.support.reliableMarginRight||(st.cssHooks.marginRight={get:function(e,n){return n?st.swap(e,{display:"inline-block"},un,[e,"marginRight"]):t}}),!st.support.pixelPosition&&st.fn.position&&st.each(["top","left"],function(e,n){st.cssHooks[n]={get:function(e,r){return r?(r=un(e,n),yn.test(r)?st(e).position()[n]+"px":r):t}}})}),st.expr&&st.expr.filters&&(st.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!st.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||st.css(e,"display"))},st.expr.filters.visible=function(e){return !st.expr.filters.hidden(e)}),st.each({margin:"",padding:"",border:"Width"},function(e,t){st.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++){i[e+wn[r]+t]=o[r]||o[r-2]||o[0]}return i}},gn.test(e)||(st.cssHooks[e+t].set=C)});var Cn=/%20/g,kn=/\[\]$/,En=/\r?\n/g,Sn=/^(?:submit|button|image|reset)$/i,An=/^(?:input|select|textarea|keygen)/i;st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=st.prop(this,"elements");return e?st.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!st(this).is(":disabled")&&An.test(this.nodeName)&&!Sn.test(e)&&(this.checked||!Zt.test(e))}).map(function(e,t){var n=st(this).val();return null==n?null:st.isArray(n)?st.map(n,function(e){return{name:t.name,value:e.replace(En,"\r\n")}}):{name:t.name,value:n.replace(En,"\r\n")}}).get()}}),st.param=function(e,n){var r,i=[],o=function(e,t){t=st.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(e)||e.jquery&&!st.isPlainObject(e)){st.each(e,function(){o(this.name,this.value)})}else{for(r in e){j(r,e[r],n,o)}}return i.join("&").replace(Cn,"+")};var jn,Dn,Ln=st.now(),Hn=/\?/,Mn=/#.*$/,qn=/([?&])_=[^&]*/,_n=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,On=/^(?:GET|HEAD)$/,Bn=/^\/\//,Pn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Rn=st.fn.load,Wn={},$n={},In="*/".concat("*");try{Dn=Y.href}catch(zn){Dn=V.createElement("a"),Dn.href="",Dn=Dn.href}jn=Pn.exec(Dn.toLowerCase())||[],st.fn.load=function(e,n,r){if("string"!=typeof e&&Rn){return Rn.apply(this,arguments)}var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),st.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),s.length>0&&st.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){a=arguments,s.html(i?st("<div>").append(st.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,a||[e.responseText,t,e])}),this},st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){st.fn[t]=function(e){return this.on(t,e)}}),st.each(["get","post"],function(e,n){st[n]=function(e,r,i,o){return st.isFunction(r)&&(o=o||i,i=r,r=t),st.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dn,type:"GET",isLocal:Fn.test(jn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":In,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,st.ajaxSettings),t):H(st.ajaxSettings,e)},ajaxPrefilter:D(Wn),ajaxTransport:D($n),ajax:function(e,n){function r(e,n,r,s){var l,f,v,b,T,N=n;2!==x&&(x=2,u&&clearTimeout(u),i=t,a=s||"",w.readyState=e>0?4:0,r&&(b=M(p,w,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=w.getResponseHeader("Last-Modified"),T&&(st.lastModified[o]=T),T=w.getResponseHeader("etag"),T&&(st.etag[o]=T)),304===e?(l=!0,N="notmodified"):(l=q(p,b),N=l.state,f=l.data,v=l.error,l=!v)):(v=N,(e||!N)&&(N="error",0>e&&(e=0))),w.status=e,w.statusText=(n||N)+"",l?g.resolveWith(d,[f,N,w]):g.rejectWith(d,[w,N,v]),w.statusCode(y),y=t,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[w,p,l?f:v]),m.fireWith(d,[w,N]),c&&(h.trigger("ajaxComplete",[w,p]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,o,a,s,u,l,c,f,p=st.ajaxSetup({},n),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?st(d):st.event,g=st.Deferred(),m=st.Callbacks("once memory"),y=p.statusCode||{},v={},b={},x=0,T="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s){for(s={};t=_n.exec(a);){s[t[1].toLowerCase()]=t[2]}}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e){if(2>x){for(t in e){y[t]=[y[t],e[t]]}}else{w.always(e[w.status])}}return this},abort:function(e){var t=e||T;return i&&i.abort(t),r(0,t),this}};if(g.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,p.url=((e||p.url||Dn)+"").replace(Mn,"").replace(Bn,jn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=st.trim(p.dataType||"*").toLowerCase().match(lt)||[""],null==p.crossDomain&&(l=Pn.exec(p.url.toLowerCase()),p.crossDomain=!(!l||l[1]===jn[1]&&l[2]===jn[2]&&(l[3]||("http:"===l[1]?80:443))==(jn[3]||("http:"===jn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=st.param(p.data,p.traditional)),L(Wn,p,n,w),2===x){return w}c=p.global,c&&0===st.active++&&st.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!On.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(Hn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=qn.test(o)?o.replace(qn,"$1_="+Ln++):o+(Hn.test(o)?"&":"?")+"_="+Ln++)),p.ifModified&&(st.lastModified[o]&&w.setRequestHeader("If-Modified-Since",st.lastModified[o]),st.etag[o]&&w.setRequestHeader("If-None-Match",st.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+In+"; q=0.01":""):p.accepts["*"]);for(f in p.headers){w.setRequestHeader(f,p.headers[f])}if(p.beforeSend&&(p.beforeSend.call(d,w,p)===!1||2===x)){return w.abort()}T="abort";for(f in {success:1,error:1,complete:1}){w[f](p[f])}if(i=L($n,p,n,w)){w.readyState=1,c&&h.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(u=setTimeout(function(){w.abort("timeout")},p.timeout));try{x=1,i.send(v,r)}catch(N){if(!(2>x)){throw N}r(-1,N)}}else{r(-1,"No Transport")}return w},getScript:function(e,n){return st.get(e,t,n,"script")},getJSON:function(e,t,n){return st.get(e,t,n,"json")}}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return st.globalEval(e),e}}}),st.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),st.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=V.head||st("head")[0]||V.documentElement;return{send:function(t,i){n=V.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Xn=[],Un=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xn.pop()||st.expando+"_"+Ln++;return this[e]=!0,e}}),st.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Un.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Un.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=st.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Un,"$1"+o):n.jsonp!==!1&&(n.url+=(Hn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||st.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Xn.push(o)),s&&st.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Vn,Yn,Jn=0,Gn=e.ActiveXObject&&function(){var e;for(e in Vn){Vn[e](t,!0)}};st.ajaxSettings.xhr=e.ActiveXObject?function(){return !this.isLocal&&_()||F()}:_,Yn=st.ajaxSettings.xhr(),st.support.cors=!!Yn&&"withCredentials" in Yn,Yn=st.support.ajax=!!Yn,Yn&&st.ajaxTransport(function(n){if(!n.crossDomain||st.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields){for(s in n.xhrFields){u[s]=n.xhrFields[s]}}n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i){u.setRequestHeader(s,i[s])}}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,f,p;try{if(r&&(i||4===u.readyState)){if(r=t,a&&(u.onreadystatechange=st.noop,Gn&&delete Vn[a]),i){4!==u.readyState&&u.abort()}else{f={},s=u.status,p=u.responseXML,c=u.getAllResponseHeaders(),p&&p.documentElement&&(f.xml=p),"string"==typeof u.responseText&&(f.text=u.responseText);try{l=u.statusText}catch(d){l=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=f.text?200:404}}}catch(h){i||o(-1,h)}f&&o(s,l,f,c)},n.async?4===u.readyState?setTimeout(r):(a=++Jn,Gn&&(Vn||(Vn={},st(e).unload(Gn)),Vn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Qn,Kn,Zn=/^(?:toggle|show|hide)$/,er=RegExp("^(?:([+-])=|)("+ut+")([a-z%]*)$","i"),tr=/queueHooks$/,nr=[W],rr={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=er.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(st.cssNumber[e]?"":"px"),"px"!==r&&s){s=st.css(i.elem,e,!0)||n||1;do{u=u||".5",s/=u,st.style(i.elem,e,s+r)}while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};st.Animation=st.extend(P,{tweener:function(e,t){st.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++){n=e[r],rr[n]=rr[n]||[],rr[n].unshift(t)}},prefilter:function(e,t){t?nr.unshift(e):nr.push(e)}}),st.Tween=$,$.prototype={constructor:$,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(st.cssNumber[n]?"":"px")},cur:function(){var e=$.propHooks[this.prop];return e&&e.get?e.get(this):$.propHooks._default.get(this)},run:function(e){var t,n=$.propHooks[this.prop];return this.pos=t=this.options.duration?st.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):$.propHooks._default.set(this),this}},$.prototype.init.prototype=$.prototype,$.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=st.css(e.elem,e.prop,"auto"),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){st.fx.step[e.prop]?st.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[st.cssProps[e.prop]]||st.cssHooks[e.prop])?st.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},$.propHooks.scrollTop=$.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},st.each(["toggle","show","hide"],function(e,t){var n=st.fn[t];st.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(I(t,!0),e,r,i)}}),st.fn.extend({fadeTo:function(e,t,n,r){return this.filter(w).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=st.isEmptyObject(e),o=st.speed(t,n,r),a=function(){var t=P(this,st.extend({},e),o);a.finish=function(){t.stop(!0)},(i||st._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=st.timers,a=st._data(this);if(n){a[n]&&a[n].stop&&i(a[n])}else{for(n in a){a[n]&&a[n].stop&&tr.test(n)&&i(a[n])}}for(n=o.length;n--;){o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1))}(t||!r)&&st.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=st._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=st.timers,a=r?r.length:0;for(n.finish=!0,st.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;){o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1))}for(t=0;a>t;t++){r[t]&&r[t].finish&&r[t].finish.call(this)}delete n.finish})}}),st.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){st.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),st.speed=function(e,t,n){var r=e&&"object"==typeof e?st.extend({},e):{complete:n||!n&&t||st.isFunction(e)&&e,duration:e,easing:n&&t||t&&!st.isFunction(t)&&t};return r.duration=st.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in st.fx.speeds?st.fx.speeds[r.duration]:st.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){st.isFunction(r.old)&&r.old.call(this),r.queue&&st.dequeue(this,r.queue)},r},st.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}},st.timers=[],st.fx=$.prototype.init,st.fx.tick=function(){var e,n=st.timers,r=0;for(Qn=st.now();n.length>r;r++){e=n[r],e()||n[r]!==e||n.splice(r--,1)}n.length||st.fx.stop(),Qn=t},st.fx.timer=function(e){e()&&st.timers.push(e)&&st.fx.start()},st.fx.interval=13,st.fx.start=function(){Kn||(Kn=setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){clearInterval(Kn),Kn=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fx.step={},st.expr&&st.expr.filters&&(st.expr.filters.animated=function(e){return st.grep(st.timers,function(t){return e===t.elem}).length}),st.fn.offset=function(e){if(arguments.length){return e===t?this:this.each(function(t){st.offset.setOffset(this,e,t)})}var n,r,i={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a){return n=a.documentElement,st.contains(n,o)?(o.getBoundingClientRect!==t&&(i=o.getBoundingClientRect()),r=z(a),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i}},st.offset={setOffset:function(e,t,n){var r=st.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,a=st(e),s=a.offset(),u=st.css(e,"top"),l=st.css(e,"left"),c=("absolute"===r||"fixed"===r)&&st.inArray("auto",[u,l])>-1,f={},p={};c?(p=a.position(),i=p.top,o=p.left):(i=parseFloat(u)||0,o=parseFloat(l)||0),st.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+i),null!=t.left&&(f.left=t.left-s.left+o),"using" in t?t.using.call(e,f):a.css(f)}},st.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===st.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),st.nodeName(e[0],"html")||(n=e.offset()),n.top+=st.css(e[0],"borderTopWidth",!0),n.left+=st.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-st.css(r,"marginTop",!0),left:t.left-n.left-st.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||V.documentElement;e&&!st.nodeName(e,"html")&&"static"===st.css(e,"position");){e=e.offsetParent}return e||V.documentElement})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);st.fn[e]=function(i){return st.access(this,function(e,i,o){var a=z(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?st(a).scrollLeft():o,r?o:st(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}}),st.each({Height:"height",Width:"width"},function(e,n){st.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){st.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return st.access(this,function(n,r,i){var o;return st.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?st.css(n,r,s):st.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=st,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return st})})(window);
/*! jQuery UI - v1.9.1 - 2012-11-19
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.datepicker.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version){return}e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t){return this.css("zIndex",n)}if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0){return s}}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return !!e.data(n,t)}}):function(t,n,r){return !!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart" in n,t.removeChild(n).style.display="none"}),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r){s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])}},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11){return}for(r=0;r<i.length;r++){e.options[i[r][0]]&&i[r][1].apply(e.element,n)}}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden"){return !1}var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++){try{e(r).triggerHandler("remove")}catch(s){}}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return !!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget){return new o(e,t)}arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++){for(u in i[s]){a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a)}}return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i){return e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}if(!e.isFunction(i[o])||o.charAt(0)==="_"){return e.error("no such method '"+o+"' for "+n+" widget instance")}r=i[o].apply(i,a);if(r!==i&&r!==t){return f=r&&r.jquery?f.pushStack(r.get()):r,!1}}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0){return e.widget.extend({},this.options)}if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++){o[s[u]]=o[s[u]]||{},o=o[s[u]]}n=s.pop();if(r===t){return o[n]===t?null:o[n]}o[n]=r}else{if(r===t){return this.options[n]===t?null:this.options[n]}i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e){this._setOption(t,e[t])}return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled")){return}return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s){for(i in s){i in n||(n[i]=s[i])}}return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent")){return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n){return}this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted){return t.preventDefault(),!0}}return !0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return !e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return !0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t){return n}var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of){return c.apply(this,arguments)}t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a)){e.left+=l+c+h}}else{if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f){e.left+=l+c+h}}}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r){t.style[s]=r[s]}t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset){return n.call(this,r)}var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n){return}var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this.document.find(t||"body")[0]),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength){return this.close(t)}if(this._trigger("search",t)===!1){return}return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t),t.preventDefault()}}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t){if(t[n]==null||t[n]==undefined){e[n]=t[n]}}return e}$.extend($.ui,{datepicker:{version:"1.9.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++){e[r].length>t&&(t=e[r].length,n=r)}return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();if(r=="input"){e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();if(r=="input"){e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e){return !1}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]==e){return !0}}return !1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string"){return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null}var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing){switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}}else{e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1}n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal){try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}}return !0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e){return}var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1){return}extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e))){e=e[n?"previousSibling":"nextSibling"]}var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME)){return}if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst){return}var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0])){return}this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay){n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear}else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0])){return}var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/86400000)/7)+1},parseDate:function(e,t,n){if(e==null||t==null){throw"Invalid arguments"}t=typeof t=="object"?t.toString():t+"";if(t==""){return null}var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s){throw"Missing number at position "+g}return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return -(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase()){return s=n[0],g+=r.length,!1}});if(s!=-1){return s+1}throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y)){throw"Unexpected literal at position "+g}g++},g=0;for(var y=0;y<e.length;y++){if(h){e.charAt(y)=="'"&&!p("'")?h=!1:m()}else{switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/10000);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}}}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w)){throw"Extra/unparsed characters found in date: "+w}}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E){break}f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l){throw"Invalid date"}return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(e,t,n){if(!t){return""}var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e)){while(r.length<n){r="0"+r}}return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t){for(var h=0;h<e.length;h++){if(c){e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h)}else{switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*10000+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}}}}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++){if(n){e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i)}else{switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}}}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal){return}var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v){p--,p<0&&(p=11,d--)}}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1){switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a){h+='<span class="ui-datepicker-month">'+o[t]+"</span>"}else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++){(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>")}h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f){c+='<span class="ui-datepicker-year">'+n+"</span>"}else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++){e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>"}e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.1",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(e,t){var n=!1;e.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var r=e(t.target).closest(".ui-menu-item");!n&&r.not(".ui-state-disabled").length&&(n=!0,this.select(t),r.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),n=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1000)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),r.each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active){return}this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active){r=this.activeMenu.children(".ui-menu-item")[t]()}this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem()){return}this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem()){return}this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slidez",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&i.values.length!==2&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(i.range==="min"||i.range==="max"?" ui-slider-range-"+i.range:""))),r=i.values&&i.values.length||1;for(t=s.length;t<r;t++){u.push(o)}this.handles=s.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){i.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1){return}}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax()){return}s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin()){return}s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return !0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length){return this._values()}if(!e.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(t):this.value()}r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1){r[s]=this._trimAlignValue(i[s]),this._change(null,s)}this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1){this._change(null,r)}this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length){return t=this.options.values[e],t=this._trimAlignValue(t),t}n=this.options.values.slice();for(r=0;r<n.length;r+=1){n[r]=this._trimAlignValue(n[r])}return n},_trimAlignValue:function(e){if(e<=this._valueMin()){return this._valueMin()}if(e>=this._valueMax()){return this._valueMax()}var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})})(jQuery);
/*!
 * jQuery Color Animations v@VERSION
 * https://github.com/jquery/jquery-color
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: @DATE
 */
(function(root,factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{if(typeof exports==="object"){module.exports=factory(require("jquery"))}else{factory(root.jQuery)}}})(this,function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]]}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha)},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},colors,each=jQuery.each;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1}});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def}value=type.floor?~~value:parseFloat(value);if(type.mod){return(value+type.mod)%type.mod}return Math.min(type.max,Math.max(0,value))}function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent)}return inst}return colors[string]}color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this}if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined}var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array"}if(type==="string"){return this.parse(stringParse(red)||colors._default)}if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop)});return this}if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice()}})}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return}inst[cache]=space.to(inst._rgba)}inst[cache][prop.idx]=clamp(red[key],prop,true)});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache])}}})}return this}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same}})}return same});return same},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName)}});return used.pop()},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return}if(startValue===null){result[index]=endValue}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod}else{if(startValue-endValue>type.mod/2){startValue-=type.mod}}}result[index]=clamp((endValue-startValue)*distance+startValue,prop)}});return this[spaceName](result)},blend:function(opaque){if(this._rgba[3]===1){return this}var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v}))},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){if(v!=null){return v}return i>2?1:0});if(rgba[3]===1){rgba.pop();prefix="rgb("}return prefix+rgba.join()+")"},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0}if(i&&i<3){v=Math.round(v*100)+"%"}return v});if(hsla[3]===1){hsla.pop();prefix="hsl("}return prefix+hsla.join()+")"},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255))}return"#"+jQuery.map(rgba,function(v){return("0"+(v||0).toString(16)).substr(-2)}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6}if(h*2<1){return q}if(h*3<2){return p+(q-p)*((2/3)-h)*6}return p}spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]]}var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0}else{if(r===max){h=(60*(g-b)/diff)+360}else{if(g===max){h=(60*(b-r)/diff)+120}else{h=(60*(r-g)/diff)+240}}}if(diff===0){s=0}else{if(l<=0.5){s=diff/add}else{s=diff/(2-add)}}return[Math.round(h)%360,s,l,a==null?1:a]};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]]}var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a]};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba)}if(value===undefined){return this[cache].slice()}var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx]}local[prop.idx]=clamp(val,prop)});if(from){ret=color(from(local));ret[cache]=local;return ret}else{return color(local)}};each(props,function(key,prop){if(color.fn[key]){return}color.fn[key]=function(value){var local,cur,match,fn,vtype=jQuery.type(value);if(key==="alpha"){fn=this._hsla?"hsla":"rgba"}else{fn=spaceName}local=this[fn]();cur=local[prop.idx];if(vtype==="undefined"){return cur}if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value)}if(value==null&&prop.empty){return this}if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1)}}local[prop.idx]=value;return this[fn](local)}})});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed;if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);value=value.toRgbaString()}elem.style[hook]=value}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true}jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos))}})};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value});return expanded}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}});
/*! Lazy Load 1.9.7 - MIT license - Copyright 2010-2015 Mika Tuupola */
!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible")){if(a.abovethetop(this,j)||a.leftofbegin(this,j)){}else{if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit){return !1}}else{c.trigger("appear"),b=0}}}})}var h,i=this,j={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr("src")===d||c.attr("src")===!1)&&c.is("img")&&c.attr("src",j.placeholder),c.one("appear",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a("<img />").bind("load",function(){var d=c.attr("data-"+j.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return !a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr("src",c.attr("data-"+j.data_attribute))}}),0!==j.event.indexOf("scroll")&&c.bind(j.event,function(){b.loaded||c.trigger("appear")})}),e.bind("resize",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return !(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return !a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return !a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return !a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return !a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r,G,f,v){var J=f("html"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&"string"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf("%")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+"px"};f.extend(b,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3000,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(I?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0))){return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;"object"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data("fancybox-href")||c.attr("href"),title:c.data("fancybox-title")||c.attr("title"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,c.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||"";m=(j=d.content||k.content)?"html":d.type||k.type;!m&&k.isDom&&(m=c.data("fancybox-type"),m||(m=(m=c.prop("class").match(/fancybox\.(\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m="image":b.isSWF(g)?m="swf":"#"===g.charAt(0)?m="inline":q(c)&&(m="html",j=c)),"ajax"===m&&(l=g.split(/\s+/,2),g=l.shift(),l=l.shift()));j||("inline"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):k.isDom&&(j=c):"html"===m?j=g:!m&&(!g&&k.isDom)&&(m="inline",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)}},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),b.coming=null,b.current||b._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=setTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1)){b.player.isActive=!0,p.bind({"onCancel.player beforeClose.player":c,"onUpdate.player":e,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")}}else{c()}},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,"next"))},prev:function(a){var d=b.current;d&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,"prev"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?"next":"prev"],b.router=e||"jumpto",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&"scroll"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=a&&a.type,e=!d||"orientationchange"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass("fancybox-tmp"),(e||"load"===d||"resize"===d&&c.autoResize)&&b._setDimension(),"scroll"===d&&c.canShrink||b.reposition(a),b.trigger("onUpdate"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView="boolean"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),b.update())},hideLoading:function(){p.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");p.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode)){a.preventDefault(),b.cancel()}});b.defaults.fixed||(d=b.getViewport(),a.css({position:"absolute",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),y:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");p.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var a=b.current,d;a&&(n.bind("orientationchange.fb"+(s?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),b.update),(d=a.keys)&&p.bind("keydown.fb",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;if(27===c&&b.coming){return !1}!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is("[contenteditable]")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v){return b[d](k[c]),e.preventDefault(),!1}if(-1<f.inArray(c,k)){return b[d](),e.preventDefault(),!1}})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind("mousewheel.fb",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");){j=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent()}if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k){b.prev(0<g?"down":"left")}else{if(0>g||0>k){b.next(0>g?"up":"right")}}d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e){return !1}c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a])){b.helpers[d][a](f.extend(!0,{},b.helpers[d].defaults,e),c)}});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e){return !1}d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;"number"===f.type(e)&&(d.margin=[e,e,e,e]);"number"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);"auto"===d.width&&(d.autoWidth=!0);"auto"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger("beforeLoad")){b.coming=null}else{c=d.type;e=d.href;if(!c){return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1}b.isActive=!0;if("image"===c||"swf"===c){d.autoHeight=d.autoWidth=!1,d.scrolling="visible"}"image"===c&&(d.aspectRatio=!0);"iframe"===c&&s&&(d.scrolling="scroll");d.wrap=f(d.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+c+" fancybox-tmp "+d.wrapCSS).appendTo(d.parent||"body");f.extend(d,{skin:f(".fancybox-skin",d.wrap),outer:f(".fancybox-outer",d.wrap),inner:f(".fancybox-inner",d.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,b){d.skin.css("padding"+b,w(d.padding[a]))});b.trigger("onReady");if("inline"===c||"html"===c){if(!d.content||!d.content.length){return b._error("content")}}else{if(!e){return b._error("href")}}"image"===c?b._loadImage():"ajax"===c?b._loadAjax():"iframe"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;b._error("image")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&"abort"!==e?b._error("ajax",a):b.hideLoading()},success:function(d,e){"success"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":a.iframe.scrolling).attr("src",a.href);f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one("load",function(){f(this).data("ready",1);s||f(this).bind("load.fb",b.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,e-1):0,f,g;for(g=1;g<=c;g+=1){f=a[(d.index+g)%e],"image"===f.type&&f.href&&((new Image).src=f.href)}},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive){if(!1===b.trigger("afterLoad",a,d)){a.wrap.stop(!0).trigger("onReset").remove(),b.coming=null}else{d&&(b.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case"inline":case"ajax":case"html":a.selector?e=f("<div>").html(e).find(a.selector):t(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",function(){f(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":e=a.tpl.image.replace("{href}",g);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',h="",f.each(a.swf,function(a,b){e+='<param name="'+a+'" value="'+b+'"></param>';h+=" "+a+'="'+b+'"'}),e+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger("beforeShow");a.inner.css("overflow","yes"===k?"scroll":"no"===k?"hidden":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod){b.transitions[d.prevMethod]()}}else{f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove()}b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?h.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if("iframe"===h.type){if(H=h.content,h.autoHeight&&1===H.data("ready")){try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find("body"),q&&F.css("overflow-x","hidden"),A=F.outerHeight(!0))}catch(G){}}}else{if(h.autoWidth||h.autoHeight){g.addClass("fancybox-tmp"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp")}}c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,"w")-z:m);n=l(E(n)?l(n,"w")-z:n);u=l(E(u)?l(u,"h")-t:u);p=l(E(p)?l(p,"h")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&"iframe"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView){if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio){for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);){j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height()}}else{c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)))}}q&&("auto"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();y=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height("auto")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:"absolute",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&!a&&g<=e.h&&f<=e.w?c.position="fixed":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css("overflow","visible").addClass("fancybox-opened"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){!f(d.target).is("a")&&!f(d.target).parent().is("a")&&(d.preventDefault(),b[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=a||b.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(":visible"))&&(e=d.find("img:first"),e.length||(e=d));t(e)?(c=e.offset(),e.is("img")&&(f=e.outerWidth(),g=e.outerHeight())):(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===b.wrap.css("position")||a.locked){c.top-=m.y,c.left-=m.x}return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if("width"===f||"height"===f){e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c="width"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l("width"===f?c:c-g*e)),b.inner[f](l("width"===f?c:c-g*e-h*e))}},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c="elastic"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):"fade"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:"none"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e="elastic"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,{duration:"none"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;"elastic"===d&&(g="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(e[g]=w(l(e[g])-200),c[g]="+=200px"):(e[g]=w(l(e[g])+200),c[g]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=b.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;"elastic"===d&&(e["down"===c||"up"===c?"top":"left"]=("up"===c||"left"===c?"-":"+")+"=200px");a.wrap.animate(e,{duration:"none"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f("html"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=f('<div class="fancybox-overlay"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(n.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){if(f(a.target).hasClass("fancybox-overlay")){return b.isActive?b.close():d.close(),!1}});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(f(".fancybox-margin").removeClass("fancybox-margin"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass("fancybox-lock"),n.scrollTop(a).scrollLeft(b));f(".fancybox-overlay").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a="100%",b;this.overlay.width(a).height("100%");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),p.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(".fancybox-overlay").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f("*").filter(function(){return"fixed"===f(this).css("position")&&!f(this).hasClass("fancybox-overlay")&&!f(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass("fancybox-lock"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var d=b.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&""!==f.trim(e)){d=f('<div class="fancybox-title fancybox-title-'+c+'-wrap">'+e+"</div>");switch(c){case"inside":c=b.skin;break;case"outside":c=b.wrap;break;case"over":c=b.inner;break;default:c=b.skin,d.appendTo("body"),I&&d.width(d.width()),d.wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(l(d.css("margin-bottom")))}d["top"===a.position?"prependTo":"appendTo"](c)}}};f.fn.fancybox=function(a){var d,e=f(this),c=this.selector||"",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(".fancybox-wrap")&&(k=a.groupAttr||"data-fancybox-group",l=h.attr(k),l||(k="rel",l=h.get(0)[k]),l&&(""!==l&&"nofollow"!==l)&&(h=c.length?f(c):e,h=h.filter("["+k+'="'+l+'"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind("click.fb-start").bind("click.fb-start",k):p.undelegate(c,"click.fb-start").delegate(c+":not('.fancybox-item, .fancybox-nav')","click.fb-start",k);this.filter("[data-fancybox-start=1]").trigger("click");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style="position:fixed;top:20px;"></div>').appendTo("body");var e=20===d[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")});a=f(r).width();J.addClass("fancybox-lock-test");d=f(r).width();J.removeClass("fancybox-lock-test");f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):g(window.jQuery||window.Zepto)})(function(g){var z=function(a,e,b){var k=this,n,p;a=g(a);e="function"===typeof e?e(a.val(),void 0,a,b):e;var c={getCaret:function(){try{var d,f=0,c=a.get(0),h=document.selection,e=c.selectionStart;if(h&&!~navigator.appVersion.indexOf("MSIE 10")){d=h.createRange(),d.moveStart("character",a.is("input")?-a.val().length:-a.text().length),f=d.text.length}else{if(e||"0"===e){f=e}}return f}catch(b){}},setCaret:function(d){try{if(a.is(":focus")){var f,c=a.get(0);c.setSelectionRange?c.setSelectionRange(d,d):c.createTextRange&&(f=c.createTextRange(),f.collapse(!0),f.moveEnd("character",d),f.moveStart("character",d),f.select())}}catch(h){}},events:function(){a.on("keydown.mask",function(){n=c.val()}).on("keyup.mask",c.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){a.keydown().keyup()},100)}).on("change.mask",function(){a.data("changed",!0)}).on("blur.mask",function(){n===a.val()||a.data("changed")||a.trigger("change");a.data("changed",!1)}).on("focusout.mask",function(){b.clearIfNotMatch&&!p.test(c.val())&&c.val("")})},getRegexMask:function(){for(var d=[],f,a,c,b,l=0;l<e.length;l++){(f=k.translation[e[l]])?(a=f.pattern.toString().replace(/.{1}$|^.{1}/g,""),c=f.optional,(f=f.recursive)?(d.push(e[l]),b={digit:e[l],pattern:a}):d.push(c||f?a+"?":a)):d.push("\\"+e[l])}d=d.join("");b&&(d=d.replace(RegExp("("+b.digit+"(.*"+b.digit+")?)"),"($1)?").replace(RegExp(b.digit,"g"),b.pattern));return RegExp(d)},destroyEvents:function(){a.off("keydown keyup paste drop change blur focusout DOMNodeInserted ".split(" ").join(".mask ")).removeData("changeCalled")},val:function(d){var c=a.is("input");return 0<arguments.length?c?a.val(d):a.text(d):c?a.val():a.text()},getMCharsBeforeCount:function(d,a){for(var c=0,b=0,g=e.length;b<g&&b<d;b++){k.translation[e.charAt(b)]||(d=a?d+1:d,c++)}return c},caretPos:function(d,a,b,h){return k.translation[e.charAt(Math.min(d-1,e.length-1))]?Math.min(d+b-a-h,b):c.caretPos(d+1,a,b,h)},behaviour:function(d){d=d||window.event;var a=d.keyCode||d.which;if(-1===g.inArray(a,k.byPassKeys)){var b=c.getCaret(),e=c.val(),u=e.length,l=b<u,q=c.getMasked(),m=q.length,n=c.getMCharsBeforeCount(m-1)-c.getMCharsBeforeCount(u-1);q!==e&&c.val(q);!l||65===a&&d.ctrlKey||(8!==a&&46!==a&&(b=c.caretPos(b,u,m,n)),c.setCaret(b));return c.callbacks(d)}},getMasked:function(a){var f=[],g=c.val(),h=0,n=e.length,l=0,q=g.length,m=1,p="push",s=-1,r,v;b.reverse?(p="unshift",m=-1,r=0,h=n-1,l=q-1,v=function(){return -1<h&&-1<l}):(r=n-1,v=function(){return h<n&&l<q});for(;v();){var w=e.charAt(h),x=g.charAt(l),t=k.translation[w];if(t){x.match(t.pattern)?(f[p](x),t.recursive&&(-1===s?s=h:h===r&&(h=s-m),r===s&&(h-=m)),h+=m):t.optional&&(h+=m,l-=m),l+=m}else{if(!a){f[p](w)}x===w&&(l+=m);h+=m}}a=e.charAt(r);n!==q+1||k.translation[a]||f.push(a);return f.join("")},callbacks:function(d){var f=c.val(),g=f!==n;if(!0===g&&"function"===typeof b.onChange){b.onChange(f,d,a,b)}if(!0===g&&"function"===typeof b.onKeyPress){b.onKeyPress(f,d,a,b)}if("function"===typeof b.onComplete&&f.length===e.length){b.onComplete(f,d,a,b)}}};k.remove=function(){var a;c.destroyEvents();c.val(k.getCleanVal()).removeAttr("maxlength");a=c.getCaret();c.setCaret(a-c.getMCharsBeforeCount(a))};k.getCleanVal=function(){return c.getMasked(!0)};k.init=function(){b=b||{};k.byPassKeys=[9,16,17,18,36,37,38,39,40,91];k.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};k.translation=g.extend({},k.translation,b.translation);k=g.extend(!0,{},k,b);p=c.getRegexMask();!1!==b.maxlength&&a.attr("maxlength",e.length);b.placeholder&&a.attr("placeholder",b.placeholder);a.attr("autocomplete","off");c.destroyEvents();c.events();var d=c.getCaret();c.val(c.getMasked());c.setCaret(d+c.getMCharsBeforeCount(d,!0))}()},p={},y=function(){var a=g(this),e={};a.attr("data-mask-reverse")&&(e.reverse=!0);"false"===a.attr("data-mask-maxlength")&&(e.maxlength=!1);a.attr("data-mask-clearifnotmatch")&&(e.clearIfNotMatch=!0);a.mask(a.attr("data-mask"),e)};g.fn.mask=function(a,e){var b=this.selector,k=function(b){if(!b.originalEvent||g(b.originalEvent.relatedNode)[0]!=g(this)[0]){return g(this).data("mask",new z(this,a,e))}};this.each(k);b&&!p[b]&&(p[b]=!0,setTimeout(function(){g(document).on("DOMNodeInserted.mask",b,k)},500))};g.fn.unmask=function(){try{return this.each(function(){g(this).data("mask").remove()})}catch(a){}};g.fn.cleanVal=function(){return this.data("mask").getCleanVal()};g("*[data-mask]").each(y);g(document).on("DOMNodeInserted.mask","*[data-mask]",y)});var otpMain={};(function($,o){o.ua={"Январь":"Сiчень","Февраль":"Лютий","Март":"Березень","Апрель":"Квiтень","Май":"Травень","Июнь":"Червень","Июль":"Липень","Август":"Серпень","Сентябрь":"Вересень","Октябрь":"Жовтень","Ноябрь":"Листопад","Декабрь":"Грудень","января":"сiчня","февраля":"лютого","марта":"березня","апреля":"квiтня","мая":"травня","июня":"червня","июля":"липня","августа":"серпня","сентября":"вересня","октября":"жовтня","ноября":"листопада","декабря":"грудня","янв":"сiч","фев":"лют","мар":"бер","апр":"квi","май":"тра","июн":"чер","июл":"лип","авг":"сер","сен":"вер","окт":"жов","ноя":"лис","дек":"гру","вс":"нд","Вс":"Нд","дней":"днiв","дня":"днi","ночь":"нiч","ночи":"ночі","без питания":"без харчування","завтрак":"сніданок","завтрак и ужин":"сніданок і вечеря","полный пансион":"повний пансіон","Авиаперелет":"Авіапереліт","с авиаперелетом":"з авіаперельотом","переезд на автобусе включен":"переїзд на автобусі включений","Поезд":"Потяг","переезд на ж/д включен":"переїзд на ж/д включений","переезд на ж/д и автобусе включен":"переїзд на ж/д і автобусі включений","Паром":"Пором","переезд на пароме включен":"переїзд на поромі включений","Без транспорта":"Без транспорту","без транспорта":"без транспорту","анимация":"анімація","бесплатный Wi-Fi":"безкоштовний Wi-Fi","водные виды спорта на пляже":"водні види спорту на пляжі","дайвинг":"дайвінг","детский бассейн":"дитячий басейн","дискотека в отеле":"дискотека в готелі","крытый бассейн":"критий басейн","мини-клуб / детская комната":"міні-клуб / дитяча кімната","организация экскурсий":"організація екскурсій","открытый бассейн":"відкритий басейн","прокат автомобилей":"прокат автомобілів","фитнес-центр / тренажерный зал":"фітнес-центр / тренажерний зал","1-я пляжная линия":"1-ша пляжна лінія","2-я пляжная линия":"2-а пляжна лінія","песчаный пляж":"піщаний пляж","галечный пляж":"гальковий пляж","Любой город":"Будь-яке місто","Киев":"Київ","Киева":"Києва","Харьков":"Харків","Харькова":"Харкова","Днепр":"Дніпро","Днепра":"Дніпра","Одесса":"Одеса","Одессы":"Одеси","Львов":"Львів","Винница":"Вінниця","Винницы":"Вінниці","Луцк":"Луцьк","Луцка":"Луцька","Запорожье":"Запоріжжя","Запорожья":"Запоріжжя","Ивано-Франковск":"Івано-Франківськ","Ив.-Франковска":"Ів.-Франківська","Черновцы":"Чернівці","Черновцов":"Чернівців","евро":"євро","По вашему запросу туры не найдены. Попробуйте изменить критерии поиска.":"По вашому запиту тури не знайдені. Спробуйте змінити критерії пошуку.","До конца опроса ":"До кінця опитування ","Почему так долго":"Чому так довго","Когда вы задаёте поиск или открываете тур, мы делаем аналогичный запрос к базе данных всех основных операторов Украины (которые работают по выбранной вами стране). Обычно серверы туроператоров отвечают за 5-10 секунд. Но иногда, особенно в рабочее время или в высокий сезон, системы могут быть перегружены, и время ответа может составлять до 30 и даже до 60 секунд.<br><br>В любом случае, вы экономите уйму времени, т.к. мы показываем актуальные цены всех туроператоров одновременно, и адреса турагентств в вашем городе и районе.":"Коли ви шукаєте або відкриваєте тури, ми робимо аналогічний запит до баз даних всіх основних операторів України які працюють за обраною вами країною. Зазвичай сервери туроператорів відповідають за 5-10 секунд. Але іноді, особливо в робочий час або у високий сезон, системи можуть бути перевантажені, і час відповіді може становити до 30-40 секунд. <br> <br> У будь-якому випадку, ви економите багато часу, тому що ми показуємо актуальні ціни всіх туроператорів одночасно, і адреси турагенцій в вашому місті та районі.","Время вышло. Сервер туроператор":"Час вийшов. сервер туроператор","ов":"iв"," не ответил в отведенное время. Попробуйте обновить страницу через несколько секунд.":" не відповів у відведений час. Спробуйте оновити сторінку через кілька секунд.","Нам неизвестно о турах в ":"Нам невідомо про тури в","Курорты":"Курорти","Страны":"Країни","Отели":"Готелі","неизвестно":"невідомо","Нет туров в ":"Немає турів в ","вдвоем":"удвох","втроем":"втрьох","вчетвером":"вчотирьох","без детей":"без дітей","-е детей":"-є дітей","Стоимость тура для ":"Вартість туру для ","одного взрослого":"одного дорослого","взрослый":"дорослий","взрослых":"дорослих","и":"та","ребенок":"дитина","ребенка":"дитини","детей":"дітей","Туры":"Тури","Экскурсии":"Екскурсії","Уточнить":"Уточнити"," категорию отеля, питание, вид транспорта?":" категорію готелю, харчування, вид транспорту?","Расширенный поиск":"Розширений пошук","Категория отеля и питание":"Категорія готелю та харчування","Оценка":"Оцінка","по отзывам":"за відгуками","Цена":"Ціна","за всех туристов":"за всіх туристів","Услуги":"Послуги","Найти туры":"Знайти тури","Выберите страну, курорт или отель":"Виберіть країну, курорт і готель","из":"з","Вылет из":"Виліт з","Страна, курорт, отель":"Країна, курорт, готель","Я хочу в":"Я хочу до","Нас будет":"Нас буде","Взрослых и детей":"Дорослих і дітей","Возраст детей":"Вік дітей","лет":"рокiв","от":"вiд","Длительность":"Тривалість","Ищем туры по вашим параметрам":"Шукаємо тури по вашим параметрам","Все фотографии":"Всі фотографії","отзыв":"відгук","отзыва":"відгука","отзывов":"відгуків","Посмотреть на карте":"Подивитись на карті","Полное описание отеля →":"Повний опис готелю →","питание":"харчування","Питание":"Харчування","Другие варианты в этом отеле":"Інші варіанти в цьому готелі","выбрать":"вибрати","Количество взрослых":"Кількість дорослих","Количество детей":"Кількість дітей","Расположение":"Розташування","Адрес":"Адреса","Телефоны":"Телефони","Сайт отеля":"Сайт готелю","В отеле":"В готелі","Для детей":"Для дітей","Развлечение и спорт":"Розваги та спорт","Номера":"Кiмнати","Номер":"Кiмната","номер":"кiмната","Туры в отель":"Тури в готель","Описание":"Опис","Фотографии":"Фото","Карта":"Мапа","Отзывы":"Відгуки","Вернуться к просмотру результатов":"Повернутися до перегляду результатів","Общая оценка ":"Загальна оцінка ","На основании ":"На підставі "," пользователей":"  користувачів","ТурПравды":"ТурПравди","сервис":"сервіс","инфраструктура":"інфраструктура","Оценки отеля по критериям":"Оцінки готелю за критеріями","На указанные даты нет туров в этот отель":"На зазначені дати немає турів в цей готель","Выберите другие даты в таблице внизу.":"Виберіть інші дати в таблиці внизу.","Указанный тур уже недоступен":"Вказаного тура вже нема","Выберите другой тур в таблице внизу.":"Оберіть інший тур у таблиці нижче.","Туристы":"Туристи","Итого:":"Разом:","Заказать тур":"Замовити тур","Как с вами связаться?":"Як з вами зв'язатися?","По электронной почте":"По електронній пошті","Ваше имя":"Ваше ім'я","Комментарии:":"Коментарі:","Выберите город":"Виберіть місто","Отправить заявку в офис:":"Надіслати заявку в офіс:","Укажите ваш телефон или е-мейл":"Вкажіть ваш телефон або емейл","Укажите телефон":"Не вказаний телефон","Неверно указан е-мейл":"Невірно вказаний емейл","Выберите офис для отправки заказа":"Виберіть офіс для відправки замовлення","Спасибо за ваш заказ":"Дякуємо за Ваше замовлення","В ближайшее время с вами свяжется один из наших менеджеров, чтобы подтвердить ваше бронирование и уточнить детали.":"Найближчим часом з вами зв'яжеться один з наших менеджерів, щоб підтвердити своє бронювання і уточнити деталі.","Вы можете позвонить нам в любой момент":"Ви можете зателефонувати нам в будь-який момент","Отправить":"Відправити","ночь":"ніч","ночи":"ночі","Дата отправления и длительность тура":"Дата відправлення і тривалість туру","изменить":"змінити","Тип номера и питание":"Тип кiмнати і харчування","Виза":"Вiза","Тип номера":"Тип кiмнати","описание номера":"опис кiмнати","Модуль поиска туров отключен":"Модуль пошуку турів відключений","Найти туры всегда можно на ":"Знайти тури завжди можна на ","Для восстановления работы модуля обратитесь в ":"Для відновлення роботи модуля зверніться в ","поддержку":"підтримку","Детали тура":"Деталі туру","Начало тура":"Початок туру","Заказать онлайн":"Купити тур онлайн","Выбрать турагентство":"Придбати тур в турагентстві"};o._=function(from_text){if(typeof o.lang==="undefined"||!o.lang){o.lang=(typeof osLang!=="undefined"&&["ru","rus","ua","ukr"].indexOf(osLang)!=-1)?osLang:"rus";o.lang=o.lang.replace("rus","ru").replace("ru","rus").replace("ua","ukr")}switch(o.lang){case"ukr":return typeof o.ua[from_text]!=="undefined"?o.ua[from_text]:from_text;break;default:return from_text}};o.osTarget=typeof osTarget!=="undefined"?osTarget:""})(jQuery,otpMain);(function($,o){o.storage=new function(){var self=this;this.is_support=function(){try{localStorage.setItem("test","test");localStorage.removeItem("test");return true}catch(e){return false}};this.get=function(key,type,ts,cached_days,cached_hours){type=type||[];if(self.is_support()&&key){if(ts==="session"){return JSON.parse(sessionStorage.getItem(key)||type)}else{var now=new Date();if(+localStorage.getItem(key+"-date")<now.getTime()){var days=+cached_days?cached_days:(+cached_hours?0:2);var hours=+cached_hours?cached_hours:0;if(days){self.set(key+"-date",now.getTime()+(+days*24*60*60*1000))}else{self.set(key+"-date",now.getTime()+(+hours*60*60*1000))}localStorage.removeItem(key)}return JSON.parse(localStorage.getItem(key)||type)}}};this.set=function(key,value,ts){if(self.is_support()&&key&&value){if(ts==="session"){sessionStorage.setItem(key,JSON.stringify(value))}else{localStorage.setItem(key,JSON.stringify(value))}}};this.append=function(key,data_key,value,ts){if(self.is_support()&&key&&data_key&&value){var data=self.get(key,"{}",ts);data[data_key]=value;self.set(key,data,ts)}};this.remove=function(key,data_key,ts){if(self.is_support()&&key&&data_key){var data=self.get(key,"{}",ts);delete data[data_key];self.set(key,data,ts)}}}})(jQuery,otpMain);!function($,o){var Datepicker=function(element,options){this.element=$(element);this.format=DPGlobal.parseFormat(options.format||this.element.data("date-format")||"mm/dd/yyyy");this.picker=$(DPGlobal.template).appendTo("body").on({click:$.proxy(this.click,this)});this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on"):false;if(this.isInput){this.element.on({focus:$.proxy(this.show,this),keyup:$.proxy(this.update,this)})}else{if(this.component){this.component.on("click",$.proxy(this.show,this))}else{this.element.on("click",$.proxy(this.show,this))}}this.minViewMode=options.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode==="string"){switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0;break}}this.viewMode=options.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode==="string"){switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0;break}}this.startViewMode=this.viewMode;this.weekStart=options.weekStart||this.element.data("date-weekstart")||0;this.weekEnd=this.weekStart===0?6:this.weekStart-1;this.onRender=options.onRender;this.fillDow();this.fillMonths();this.update();this.showMode()};Datepicker.prototype={constructor:Datepicker,show:function(e){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();$(window).on("resize",$.proxy(this.place,this));if(e){e.stopPropagation();e.preventDefault()}if(!this.isInput){}var that=this;$(document).on("mousedown",function(ev){if($(ev.target).closest(".datepicker").length==0){that.hide()}})},hide:function(){this.picker.hide();$(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){$(document).off("mousedown",this.hide)}},set:function(){var formated=DPGlobal.formatDate(this.date,this.format);if(!this.isInput){if(this.component){this.element.find("input").prop("value",formated)}this.element.data("date",formated)}else{this.element.prop("value",formated)}},setValue:function(newDate,format){if(!format){format={parts:["yyyy","mm","dd"],separator:["-"]}}if(typeof newDate==="string"){this.date=DPGlobal.parseDate(newDate,format)}else{this.date=new Date(newDate)}this.set();this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},place:function(){var offset=this.component?this.component.offset():this.element.offset();this.picker.css({top:offset.top+this.height,left:offset.left})},update:function(newDate){this.date=DPGlobal.parseDate(typeof newDate==="string"?newDate:(this.isInput?this.element.prop("value"):this.element.data("date")),this.format);this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0);this.fill()},fillDow:function(){var dowCnt=this.weekStart;var html="<tr>";while(dowCnt<this.weekStart+7){html+='<th class="dow">'+DPGlobal.dates.daysMin[(dowCnt++)%7]+"</th>"}html+="</tr>";this.picker.find(".datepicker-days thead").append(html)},fillMonths:function(){var html="";var i=0;while(i<12){html+='<span class="month">'+DPGlobal.dates.monthsShort[i++]+"</span>"}this.picker.find(".datepicker-months td").append(html)},fill:function(){var d=new Date(this.viewDate),year=d.getFullYear(),month=d.getMonth(),currentDate=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(DPGlobal.dates.months[month]+" "+year);var prevMonth=new Date(year,month-1,28,0,0,0,0),day=DPGlobal.getDaysInMonth(prevMonth.getFullYear(),prevMonth.getMonth());prevMonth.setDate(day);prevMonth.setDate(day-(prevMonth.getDay()-this.weekStart+7)%7);var nextMonth=new Date(prevMonth);nextMonth.setDate(nextMonth.getDate()+42);nextMonth=nextMonth.valueOf();var html=[];var clsName,prevY,prevM;while(prevMonth.valueOf()<nextMonth){if(prevMonth.getDay()===this.weekStart){html.push("<tr>")}clsName=this.onRender(prevMonth);prevY=prevMonth.getFullYear();prevM=prevMonth.getMonth();if((prevM<month&&prevY===year)||prevY<year){clsName+=" old"}else{if((prevM>month&&prevY===year)||prevY>year){clsName+=" new"}}if(prevMonth.valueOf()===currentDate){clsName+=" active"}html.push('<td class="day '+clsName+'">'+prevMonth.getDate()+"</td>");if(prevMonth.getDay()===this.weekEnd){html.push("</tr>")}prevMonth.setDate(prevMonth.getDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(html.join(""));var currentYear=this.date.getFullYear();var months=this.picker.find(".datepicker-months").find("th:eq(1)").text(year).end().find("span").removeClass("active");if(currentYear===year){months.eq(this.date.getMonth()).addClass("active")}html="";year=parseInt(year/10,10)*10;var yearCont=this.picker.find(".datepicker-years").find("th:eq(1)").text(year+"-"+(year+9)).end().find("td");year-=1;for(var i=-1;i<11;i++){html+='<span class="year'+(i===-1||i===10?" old":"")+(currentYear===year?" active":"")+'">'+year+"</span>";year+=1}yearCont.html(html)},click:function(e){e.stopPropagation();e.preventDefault();var target=$(e.target).closest("span, td, th");if(target.length===1){switch(target[0].nodeName.toLowerCase()){case"th":switch(target[0].className){case"prev":case"next":case"p-arr":case"n-arr":this.viewDate["set"+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate)+DPGlobal.modes[this.viewMode].navStep*(target[0].className==="prev"||target[0].className==="p-arr"?-1:1));this.fill();this.set();break}break;case"span":if(target.is(".month")){var month=target.parent().find("span").index(target);this.viewDate.setMonth(month)}else{var year=parseInt(target.text(),10)||0;this.viewDate.setFullYear(year)}if(this.viewMode!==0){this.date=new Date(this.viewDate);this.element.trigger({type:"changeDate",date:this.date,viewMode:DPGlobal.modes[this.viewMode].clsName})}this.showMode(-1);this.fill();this.set();break;case"td":if(target.is(".day")&&!target.is(".disabled")){var day=parseInt(target.text(),10)||1;var month=this.viewDate.getMonth();if(target.is(".old")){month-=1}else{if(target.is(".new")){month+=1}}var year=this.viewDate.getFullYear();this.date=new Date(year,month,day,0,0,0,0);this.viewDate=new Date(year,month,Math.min(28,day),0,0,0,0);this.fill();this.set();this.element.trigger({type:"changeDate",date:this.date,viewMode:DPGlobal.modes[this.viewMode].clsName})}break}}},mousedown:function(e){e.stopPropagation();e.preventDefault()},showMode:function(dir){if(dir){this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+dir))}this.picker.find(">div").hide().filter(".datepicker-"+DPGlobal.modes[this.viewMode].clsName).show()}};$.fn.datepicker=function(option,val){return this.each(function(){var $this=$(this),data=$this.data("datepicker"),options=typeof option==="object"&&option;if(!data){$this.data("datepicker",(data=new Datepicker(this,$.extend({},$.fn.datepicker.defaults,options))))}if(typeof option==="string"){data[option](val)}})};$.fn.datepicker.defaults={onRender:function(date){return""}};$.fn.datepicker.Constructor=Datepicker;var DPGlobal={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:[o._("Вс"),"Пн","Вт","Ср","Чт","Пт","Сб"],months:[o._("Январь"),o._("Февраль"),o._("Март"),o._("Апрель"),o._("Май"),o._("Июнь"),o._("Июль"),o._("Август"),o._("Сентябрь"),o._("Октябрь"),o._("Ноябрь"),o._("Декабрь")],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],monthLong:[o._("янв"),o._("фев"),o._("мар"),o._("апр"),o._("май"),o._("июн"),o._("июл"),o._("авг"),o._("сен"),o._("окт"),o._("ноя"),o._("дек")]},isLeapYear:function(year){return(((year%4===0)&&(year%100!==0))||(year%400===0))},getDaysInMonth:function(year,month){return[31,(DPGlobal.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month]},parseFormat:function(format){var separator=format.match(/[.\/\-\s].*?/),parts=format.split(/\W+/);if(!separator||!parts||parts.length===0){throw new Error("Invalid date format.")}return{separator:separator,parts:parts}},parseDate:function(date,format){var parts=date.split(format.separator),date=new Date(),val;date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);if(parts.length===format.parts.length){var year=date.getFullYear(),day=date.getDate(),month=date.getMonth();for(var i=0,cnt=format.parts.length;i<cnt;i++){val=parseInt(parts[i],10)||1;switch(format.parts[i]){case"dd":case"d":day=val;date.setDate(val);break;case"mm":case"m":month=val-1;date.setMonth(val-1);break;case"yy":year=2000+val;date.setFullYear(2000+val);break;case"yyyy":year=val;date.setFullYear(val);break;case"D":break;case"M":for(var k in DPGlobal.dates.monthLong){if(DPGlobal.dates.monthLong[k]==val){month=k-1;date.setMonth(k-1);break}}break}}date=new Date(year,month,day,0,0,0)}return date},formatDate:function(date,format){var val={d:date.getDate(),m:date.getMonth()+1,yy:date.getFullYear().toString().substring(2),yyyy:date.getFullYear()};val.dd=(val.d<10?"0":"")+val.d;val.mm=(val.m<10?"0":"")+val.m;val.D=DPGlobal.dates.daysMin[date.getDay()];val.M=DPGlobal.dates.monthLong[date.getMonth()];var date=[];for(var i=0,cnt=format.parts.length;i<cnt;i++){date.push(val[format.parts[i]])}return date.join(format.separator)},headTemplate:'<thead><tr class="header"><th class="prev"><em class="p-arr"></em></th><th colspan="5" class="switch"></th><th class="next"><em class="n-arr"></em></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};DPGlobal.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+DPGlobal.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+"</table></div></div>"}(window.jQuery,(typeof otpMain!=="undefined"?otpMain:otpMainOrder));(function($,o){o=$.extend(o,{page:"form",popupTrigger:false,linkClick:function(e){this.hash.stop();window.location.href=jQuery(e).attr("href");window.location.reload()},config:{baseUrl:"https://export.otpusk.com",prefix:(typeof osPrefix!=="undefined"&&osPrefix)?osPrefix:"os-",reviewsLink:"https://www.turpravda.com/informers/hotel/",votesLink:"https://www.turpravda.com/hotels/votes/",suggestLink:"https://export.otpusk.com/api/tours/suggests/",regionsLink:"https://export.otpusk.com/api/tours/regions/",deptCitiesLink:"https://export.otpusk.com/api/tours/deptCities",searchLink:"https://export.otpusk.com/api/tours/search/",datesLink:"https://export.otpusk.com/api/tours/dates/",tourLink:"https://export.otpusk.com/api/tours/hotel/",orderLink:"https://export.otpusk.com/api/tours/order/",citiesLink:"https://export.otpusk.com/api/tours/cities",servicesLink:"https://export.otpusk.com/api/tours/services",fromCity:[{label:o._("Киев"),value:1},{label:o._("Днепр"),value:2}],duration:[{label:"2-4 "+o._("дня"),value:2},{label:"3-5 "+o._("дней"),value:3},{label:"4-6 "+o._("дней"),value:4},{label:"5-7 "+o._("дней"),value:5},{label:"6-8 "+o._("дней"),value:6},{label:"7-9 "+o._("дней"),value:7},{label:"8-10 "+o._("дней"),value:8},{label:"9-11 "+o._("дней"),value:9},{label:"10-12 "+o._("дней"),value:10},{label:"11-13 "+o._("дней"),value:11},{label:"12-14 "+o._("дней"),value:12},{label:"13-15 "+o._("дней"),value:13},{label:"14-16 "+o._("дней"),value:14},{label:"15-17 "+o._("дней"),value:15},{label:"16-18 "+o._("дней"),value:16},{label:"17-19 "+o._("дней"),value:17},{label:"18-20 "+o._("дней"),value:18},{label:"19-21 "+o._("дней"),value:19},{label:"20-22 "+o._("дней"),value:20},{label:"21-23 "+o._("дней"),value:21},{label:"22-24 "+o._("дня"),value:22},{label:"23-25 "+o._("дней"),value:23},{label:"24-26 "+o._("дней"),value:24},{label:"25-26 "+o._("дней"),value:25},{label:"26-26 "+o._("дней"),value:26}],category:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],food:[{label:"OB",value:"ob",description:o._("без питания")},{label:"BB",value:"bb",description:o._("завтрак")},{label:"HB",value:"hb",description:o._("завтрак и ужин")},{label:"FB",value:"fb",description:o._("полный пансион")},{label:"AI",value:"ai",description:o._("все включено")},{label:"UAI",value:"uai",description:o._("ультра все включено")}],transport:[{label:o._("Авиаперелет"),value:"air"},{label:o._("Автобус"),value:"bus"},{label:o._("Поезд"),value:"train"},{label:o._("Паром"),value:"ship"},{label:o._("Без транспорта"),value:"no"}],service:{mainService:{spa:o._("spa-центр / Wellness-центр"),aquapark:o._("аквапарк"),animation:o._("анимация"),wifi:o._("бесплатный Wi-Fi"),water_sports:o._("водные виды спорта на пляже"),diving:o._("дайвинг"),pool:o._("детский бассейн"),discotheque:o._("дискотека в отеле"),indoor_pool:o._("крытый бассейн"),club:o._("мини-клуб / детская комната"),non_smoking:o._("номера для некурящих"),excursions:o._("организация экскурсий"),outdoor_pool:o._("открытый бассейн"),rent_car:o._("прокат автомобилей"),fitness:o._("фитнес-центр / тренажерный зал"),one_line_beach:o._("1-я пляжная линия"),two_line_beach:o._("2-я пляжная линия"),sandy:o._("песчаный пляж"),pebble:o._("галечный пляж")}},serviceLabels:{beachService:o._("Пляж"),childService:o._("Для детей"),mainService:o._("Услуги"),roomService:o._("Номера"),sportService:o._("Спорт")},hotelRating:[{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10}],priceRange:{ua:[500,100000]},defaultPeople:2,citiesFrom:{"0":{name:o._("Любой город")+" ("+o._("без транспорта")+")",rel:o._("Любой город"),id:0},"1":{name:o._("Киев"),rel:o._("Киева"),id:1544},"2":{name:o._("Харьков"),rel:o._("Харькова"),id:1880},"3":{name:o._("Днепр"),rel:o._("Днепра"),id:1874},"4":{name:o._("Одесса"),rel:o._("Одессы"),id:1358},"5":{name:o._("Львов"),rel:o._("Львова"),id:1397},"1012":{name:o._("Винница"),rel:o._("Винницы"),id:1934},"1117":{name:o._("Луцк"),rel:o._("Луцка"),id:2024},"1519":{name:o._("Ужгород"),rel:o._("Ужгорода"),id:1398},"1614":{name:o._("Запорожье"),rel:o._("Запорожья"),id:1875},"1714":{name:o._("Ивано-Франковск"),rel:o._("Ив.-Франковска"),id:1760},"3421":{name:o._("Черновцы"),rel:o._("Черновцов"),id:1708}}}})})(jQuery,otpMain);(function($,obj){var hash=function(){var delimaterVars="&";var delimaterVal="=";var store={};var expectedHash="";var prefix="!";var triggers=[];var stop=true;this.stop=function(){stop=false};this.start=function(){stop=true};this.is_valid=false;this.add=function(key,val,isCompile){if(key&&val!=undefined){isCompile=isCompile||false;store[key]=val;if(isCompile){return this.compile(store)}}};this.addTrigger=function(f,p,g){if(typeof f=="function"){p=p||0;triggers.push([p,f,g]);triggers.sort(function(a,b){return a[0]-b[0]})}};this.rm=function(key){if(store[key]){delete store[key];this.compile()}};this.rmAll=function(){store=[];var loc=window.location.href,index=loc.indexOf("#");if(index>0){window.location=loc.substring(0,index)}};this.get=function(key,defVal){defVal=defVal||false;if(!key){return store}if(store[key]!==undefined){return store[key]}else{return defVal}};this.compile=function(forceData,isString){var isForceTrueKeys=forceData===undefined||forceData===false;forceData=forceData||store;isString=isString||false;var h=[];var allowedQ=obj.search.getQuery();var allowed={ol:null,od:null,oid:null,hnm:null,hid:null,page:null,transp:null,hotelId:null,offerId:null,length:null,fd:null,rmT:null,rm:null,checkIn:null,operatorId:null,cntDay:null,lnFrom:null,tab:null,dptCt:null,toCities:null,people:null,type:null,id:null,to:null,from:null,curr:null,referer:null};for(var i in forceData){if(forceData.hasOwnProperty(i)&&(allowedQ.hasOwnProperty(i)||allowed.hasOwnProperty(i))){h.push(i+delimaterVal+encodeURIComponent(forceData[i]))}}prefix=obj.prefix==undefined?prefix:obj.prefix;if(isString){return prefix+h.join(delimaterVars)}else{expectedHash=h.join(delimaterVars);window.location.hash=prefix+expectedHash}};this.parse=function(h){var self=this;if(!h){h=window.location.hash}if(!h){return this}prefix=obj.prefix==undefined?prefix:obj.prefix;var e=[];try{e=decodeURI(h).substr(prefix.length+1).split(delimaterVars)}catch(e){console.log(e)}var query=obj.search.getQuery();var queryOld={from:1,to:1,lnFrom:1,cntDay:1};var query=obj.search.getQuery();var queryOld={from:1,to:1,lnFrom:1,cntDay:1};store={};for(var i in e){if(e.hasOwnProperty(i)){var zn=e[i].split(delimaterVal);store[zn[0]]=decodeURIComponent(zn[1])}}$.each(store,function(k,v){if(typeof query[k]!=="undefined"||typeof queryOld[k]!=="undefined"){self.is_valid=true;return false}});return this};this.onHashChange=function(){if(window.location.hash&&this.check()&&("#"+prefix+expectedHash!=encodeURI(decodeURI(window.location.hash)))&&stop){if(typeof otpMain.osTarget==="string"&&otpMain.osTarget){var localUri=window.location.hostname+window.location.pathname+window.location.search;var osTargetD=otpMain.osTarget.replace("http://","");if(localUri.indexOf(osTargetD)<0){return false}}this.parse();if(this.is_valid){var i;for(i in triggers){if((triggers[i][2]==obj.page||!triggers[i][2])&&stop&&triggers.hasOwnProperty(i)){triggers[i][1]()}}}}};this.check=function(){var h=encodeURI(decodeURI(window.location.hash)).substr(0,3);prefix=obj.prefix==undefined?prefix:obj.prefix;if(h.indexOf("#"+prefix)>-1){return true}return false}};obj.hash=new hash();$(window).bind("hashchange",function(e){obj.hash.onHashChange(e)});obj.hash.addTrigger(function(){if(obj.hash.parse().get("page",false)&&obj.hash.parse().get("page","form")!=obj.page){obj.hash.stop();window.location.reload()}},0,false);$(function(){var hashTriggerIntervalLimit=5;var hashTriggerInterval=setInterval(function(){if(!location.hash||hashTriggerIntervalLimit<=0){clearInterval(hashTriggerInterval)}else{if(typeof obj.form.view.$!=="undefined"){obj.hash.onHashChange();clearInterval(hashTriggerInterval)}}hashTriggerIntervalLimit--},200)});if(typeof obj._==="undefined"){obj._=function(val){return val}}})(jQuery,otpMain);
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1){return this._mouseUp({}),!1}this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left" in t&&(this.offset.click.left=t.left+this.margins.left),"right" in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top" in t&&(this.offset.click.top=t.top+this.margins.top),"bottom" in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(t){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=t.pageX,l=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("ui-draggable"),n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var s=e(this).data("ui-draggable"),n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var s=e(this).data("ui-draggable"),n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),s=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(t,i){var s,n,a,o,r,h,l,u,c,d,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){r=p.snapElements[c].left,h=r+p.snapElements[c].width,l=p.snapElements[c].top,u=l+p.snapElements[c].height,r-m>v||g>h+m||l-m>y||b>u+m||!e.contains(p.snapElements[c].item.ownerDocument,p.snapElements[c].item)?(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(s=m>=Math.abs(l-y),n=m>=Math.abs(u-b),a=m>=Math.abs(r-v),o=m>=Math.abs(h-g),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||a||o,"outer"!==f.snapMode&&(s=m>=Math.abs(l-b),n=m>=Math.abs(u-y),a=m>=Math.abs(r-g),o=m>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=s||n||a||o||d)}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,s=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(t=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}})})(jQuery);
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend" in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);(function($,o){var f=function(){this.months=[o._("января"),o._("февраля"),o._("марта"),o._("апреля"),o._("мая"),o._("июня"),o._("июля"),o._("августа"),o._("сентября"),o._("октября"),o._("ноября"),o._("декабря")];this.priceEcho=function(price,currency,cls){var currencies={uah:["грн","грн"],usd:["дол.","$"],eur:[o._("евро"),"€"]},cls=cls||"currency";var res="";var sum=Math.round(price).toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1&thinsp;");res+=sum;res+='&nbsp;<span class="'+cls+'">'+currencies[currency][1]+"</span>";return res};this.onlyPriceEcho=function(price,format){var res=Math.round(price).toString();if(format){res=res.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1&thinsp;")}return res};this.curEcho=function(currency,cls){var currencies={uah:["грн","грн"],usd:["дол.","$"],eur:[o._("евро"),"€"]},cls=cls||"currency";var res='&nbsp;<span class="'+cls+'">'+currencies[currency][1]+"</span>";return res};this.getCookie=function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined};this.dateEcho=function(date,only_dates){if(only_dates){return this.months[date.getMonth()]}return date.getDate()+" "+this.months[date.getMonth()]};this.echoDay=function(date){var days=[o._("Вс"),"Пн","Вт","Ср","Чт","Пн","Сб"];return days[date.getDay()]+" "+date.getDate()+" "+this.months[date.getMonth()]};this.suffixForNumber=function(number,titles){var cases=[2,0,1,1,1,2];return titles[(number%100>4&&number%100<20)?2:cases[(number%10<5)?number%10:5]]};this.prefix=function(name,p){p=p||"";return p+o.config.prefix+name};this.in_array=function(needle,haystack,strict){var found=false,key,strict=!!strict;for(key in haystack){if((strict&&haystack[key]===needle)||(!strict&&haystack[key]==needle)){found=true;break}}return found};this.rm_in_array=function(needle,haystack){$.each(haystack,function(k,v){if(needle===v){haystack.splice(k,1)}});return haystack};this.getFirst=function(d){var i;for(i in d){if(d.hasOwnProperty(i)){if(d[i]){return d[i]}}}};this.isEmpty=function(obj){return $.isEmptyObject(obj)};this.arrayCount=function(obj){var len=0,key;for(key in obj){if(obj.hasOwnProperty(key)){len++}}return len};this.formatDate=function(d){return d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2)};this.formatDate2=function(d){return("0"+d.getDate()).slice(-2)+"."+("0"+(d.getMonth()+1)).slice(-2)+"."+d.getFullYear()};this.printStars=function(val){var stars={"1":"1*","2":"2*","3":"3*","4":"4*","5":"5*","4+":"hv2","5+":"hv1",hv1:"hv1",hv2:"hv2"};return stars[val.toString()].toUpperCase()}};o.fn=new f})(jQuery,otpMain);if(!Object.keys){Object.keys=(function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!({toString:null}).propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if(typeof obj!=="object"&&(typeof obj!=="function"||obj===null)){throw new TypeError("Object.keys called on non-object")}var result=[],prop,i;for(prop in obj){if(hasOwnProperty.call(obj,prop)){result.push(prop)}}if(hasDontEnumBug){for(i=0;i<dontEnumsLength;i++){if(hasOwnProperty.call(obj,dontEnums[i])){result.push(dontEnums[i])}}}return result}}())}(function($,o){var self=this;var query=function(){this.f=0;this.t="";this.i=0;this.y="country";this.c="";this.v="";this.l=8;this.p=2;this.tc=[];this.n=0;this.g=1;this.d=0;this.o=[];this.st=[];this.pf=0;this.pt=0;this.rt=[];this.e=[];this.sr="";this.r="";this.w="";this.ex=1,this.toString=function(){return JSON.stringify(this)}};var f=function(){var firstTime=3000,nextTime=6000,maxQueries=10,counter_result=0,self=this;this.first=false;this.getQuery=function(){return new query()};this.query=false;this.callback=[];this.progress=[];var request=false;var timeout=false;this.bind=function(n,f){self.callback[n]=f;return this};var call=function(n,p,p2){if(self.callback[n]){if(typeof self.callback[n]=="function"){self.callback[n](p,p2);return true}}return false};this.getData=function(query,c,c1,c2){var firstResult=false,lastResult=false,fr=false;self.first=true;call("getData",query);if((typeof(query.rt)==="object"&&query.rt.join(",").indexOf("undefined")>-1)||typeof(query.rt)==="string"&&query.rt==="undefined"){query.rt=""}var getData=function(query,c,c1,c2){if(timeout){clearTimeout(timeout)}if(request){request.abort()}var minDate=new Date(query.c);var maxDate=new Date(query.v);if((maxDate.valueOf()-minDate.valueOf())>1209600000){maxDate=new Date();maxDate.setDate(minDate.getDate()+7);query.v=o.tour.formatDate(maxDate);o.hash.add("v",o.tour.formatDate(maxDate),true)}query.lang=o.lang;self.query=query;var newQuery={from:query.f,to:query.i,checkIn:query.c,checkTo:query.v,length:query.l,lengthTo:query.lt,people:query.p,food:typeof query.o==="object"?query.o.join(","):"",transport:typeof query.r==="object"?query.r.join(","):"",stars:typeof query.st==="object"?query.st.join(","):"",services:typeof query.e==="object"?query.e.join(","):"",rate:typeof query.rt==="object"?query.rt.join("-"):"",price:query.pf,priceTo:query.pt,number:query.n,page:query.g,show:query.w,returnNow:query.now,offers:query.ofs,toCities:query.tc,toHotels:query.th,toOperators:query.to,deptCity:query.d,offerId:query.oid,lang:o.lang};request=$.ajax({url:o.config.searchLink,type:"GET",dataType:"jsonp",data:$.extend(newQuery,o.apiToken),success:function(d){o.tour.head.checkError(d);call("process_data",d,query);if(lastResult){return}if(o.form.stopedRequests.indexOf(d.searchId)<0&&typeof o.form.$spinnersWrap!=="undefined"&&typeof o.form.$spinnerTmpl!=="undefined"){if(!o.form.$spinnersWrap.find("."+o.fn.prefix("spinner-logos-wrap")).length){var spinnerProgress=o.form.$spinnerTmpl.clone(true);spinnerProgress.data("searchid",d.searchId);o.form.$spinnersWrap.append(spinnerProgress).show();o.form.$spinners[d.searchId]=spinnerProgress;spinnerProgress.trigger("startTimer")}if(typeof o.form.$spinners[d.searchId]!=="undefined"&&!o.result.view.$spinner.hasClass(o.fn.prefix("disabled"))){if(o.form.$spinners[d.searchId].find("."+o.fn.prefix("logo-bl")).length){$.each(d.progress,function(k,v){if(v){setTimeout(function(){if(typeof o.form.$spinners[d.searchId]!=="undefined"){o.form.$spinners[d.searchId].find("."+o.fn.prefix("logos-"+k)).removeClass(o.fn.prefix("loading-logo"))}},Math.floor((Math.random()*1500)+400))}})}else{var $wrap;$.each(d.progress,function(k,v){$wrap=$("<div></div>").addClass(o.fn.prefix("logos-"+k)).addClass(o.fn.prefix("logo-bl"));if(!v){$wrap.addClass(o.fn.prefix("loading-logo"))}$wrap.append($("<img>").addClass(o.fn.prefix("logo-img")).attr("src","https://export.otpusk.com/images/onsite/logo/logo-"+k+".png")).append($("<div></div>").addClass(o.fn.prefix("loading-bl")).append($("<img>").attr("src","https://export.otpusk.com/images/onsite/ajax-loader.gif"))).appendTo(o.form.$spinners[d.searchId].find("."+o.fn.prefix("logos-wrap")))})}if(d.lastResult){if(o.hash.get("page")==="tour"){o.form.$spinners[d.searchId].remove();delete o.form.$spinners[d.searchId]}else{setTimeout(function(){if(typeof o.form.$spinners[d.searchId]!=="undefined"){o.form.$spinners[d.searchId].remove();delete o.form.$spinners[d.searchId]}},3000)}}}}var isStopedRequest;if(d){if(!firstResult&&typeof c1=="function"){isStopedRequest=o.form.stopedRequests.indexOf(d.searchId);if(isStopedRequest>-1){delete o.form.stopedRequests[isStopedRequest]}c1(d)}if(typeof c=="function"){c(d)}firstResult=true;if(d.lastResult||o.form.stopedRequests.indexOf(d.searchId)>-1){lastResult=true}if(typeof c2=="function"&&lastResult){c2(d)}}if(!lastResult&&query.n<maxQueries){timeout=setTimeout(function(){if(!$.isEmptyObject(d.hotels)){query.w=true}getData(query,c,c1,c2)},(query.n==0?firstTime:nextTime))}else{if(query.n>=maxQueries&&typeof c2=="function"){c2(d)}}query.n++}})};getData(query,c,c1,c2);return this};this.getSearchQueryForHash=function(query){var i,m={};for(i in query){if((typeof query[i]!="function")&&query.hasOwnProperty(i)){m[i]=query[i]}}return m};this.setHash=function(query){var i;for(i in query){if((typeof query[i]!="function")&&query.hasOwnProperty(i)){o.hash.add(i,query[i])}}o.hash.compile();return this};this.hashChange=function(){var i,m=false;if(!this.query){m=true}else{for(i in this.query){if(typeof query[i]!="function"&&o.hash.get(i)!=query[i]&&this.query.hasOwnProperty(i)){m=true}}}if(!this.query){this.submit()}};this.submit=function(){this.query=otpMain.form.parse();otpMain.search.setHash(this.query);otpMain.result.reset();this.process()};this.processData=function(){o.result.current=[];o.form.$spinnersWrap=o.result.view.$spinner;o.form.$spinnersWrap.find("."+o.fn.prefix("spinner-logos-wrap")).fadeOut(300,function(){$(this).remove()});self.getData(self.query,function(e){if(!o.form.location.currentCountry.id){o.form.location.updateCurrentGeo(e.cnt)}if(!o.fn.isEmpty(e.hotels)){o.result.resultSet(function(hotels,last_page){o.result.view.$result.trigger("refresh",{hotels:hotels,progress:e.progress,last_page:last_page})},e.hotels);call("process_set",e)}call("response",e)},function(e){o.result.render()},function(e){o.result.view.spinnerHide();if(o.fn.isEmpty(o.result.hotelsNew)){o.result.view.$more.css("visibility","hidden");if(self.query.g<2){if(typeof o.result.view.showMessage==="function"){o.result.view.showMessage(o._("По вашему запросу туры не найдены. Попробуйте изменить критерии поиска."))}else{o.result.view.$noInfo.show()}}}else{if(+e.total){o.result.view.$more.css("visibility","visible");o.result.view.$noInfo.hide()}}o.result.resultSet(function(hotels,last_page){o.result.view.$result.trigger("refresh",{hotels:hotels,progress:e.progress,last_page:last_page})},e.hotels);call("process_last",e)})};this.process=function(){var set_to_cities=false;this.query.t=this.query.t||o.hash.get("t");if(typeof o.result.view.start_search!=="undefined"){o.result.view.start_search=new Date()}if(this.query.t){call("process",this.query);if(!this.query){return}if(!this.query.i){o.form.location.geoSuggest(JSON.stringify({t:this.query.t,lang:o.lang}),function(d){var suggest=o.fn.getFirst(d.data);if(suggest.is_empty){o.result.render();o.result.view.$noGeo.text(o._("Нам неизвестно о турах в ")+self.query.t);o.result.view.$noGeo.show();o.result.view.spinnerHide();return}o.result.view.spinner();if(self.query.g<=1){self.query.t=encodeURIComponent(suggest.value);self.query.i=suggest.objectId;self.query.y=suggest.type;o.hash.add("t",self.query.t);o.hash.add("i",self.query.i);o.hash.add("y",self.query.y,true);call("suggest",suggest);if(o.cityMarker&&self.first){set_to_cities=true;setTimeout(function(){self.query.tc=o.cityMarker.getCities.getArr();o.hash.add("tc",o.cityMarker.getCities.getStr(),true);self.processData()},500)}if(self.query.y==="country"&&o.form.cityMarkers&&!$.isEmptyObject(o.form.cityMarkers.selected)){self.query.tc=o.form.cityMarkers.selected[self.query.i]}}if(!set_to_cities){self.processData()}})}else{if(!o.hash.get("dptCt")){o.result.view.spinner();self.processData()}}}}};o.search=new f();if(otpMain.page=="form"){o.hash.addTrigger(function(){otpMain.search.hashChange()},50,"form")}})(jQuery,otpMain);(function($,obj){var names={city:obj._("Курорты"),country:obj._("Страны"),hotel:obj._("Отели")};$.widget("ui.otpautocomplete",$.ui.autocomplete,{_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(ul,items);this.menu.refresh();if(obj.form.location&&obj.form.location.selectType==2){var elsm=[$('<div class="column column-1"></div>'),$('<div class="column column-2"></div>'),$('<div class="column column-3"></div>')];for(var i in elsm){if(elsm.hasOwnProperty(i)){elsm[i].appendTo(ul)}}var els=ul.find("li");var b=0;var cnt=[0,0,0];for(var i=0;i<els.length;i++){if(b>2){b=0}cnt[b]++;b++}var lst=[cnt[0],cnt[0]+cnt[1]];els.each(function(i,e){if(i<lst[0]){$(e).appendTo(elsm[0])}else{if(i<lst[1]){$(e).appendTo(elsm[1])}else{$(e).appendTo(elsm[2])}}})}ul.show();this._resizeMenu();if(obj.form.location.selectType==3){$(".ui-autocomplete").scrollTop(0)}ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){}},_renderItem:function(ul,item){if(item.cnt&&!item.type){var checked=false,selected=obj.form.cityMarkers.selected[item.cnt];if(!selected){obj.form.cityMarkers.selected[item.cnt]=[]}else{if(obj.fn.in_array(item.objectId,selected)){checked=true}}return $("<div>").addClass("city").append($("<input>").attr({type:"checkbox",value:item.objectId,checked:checked}).change(function(){if($(this).is(":checked")){if(!obj.fn.in_array($(this).val(),obj.form.cityMarkers.selected[item.cnt])){obj.form.cityMarkers.selected[item.cnt].push($(this).val())}}else{obj.fn.rm_in_array($(this).val(),obj.form.cityMarkers.selected[item.cnt])}})).append($("<span></span>").click(function(){var el=$(this).parent().find(":checkbox");if(el.is(":checked")){el.attr("checked",false)}else{el.attr("checked",true)}el.trigger("change")}).text(item.label)).appendTo(ul)}var s="";if(!item.active&&!item.is_empty){return $("<a></a>")}if(!item.is_empty){s='<span class="price-from"> '+obj._("неизвестно")+"</span>"}if(item.uah){s='<span class="price-from"> от '+obj.fn.priceEcho(item.uah,"uah")+"</span>"}if(item.type!="country"){var label=item.label.split(", ");if(item.type=="city"){item.label=label[0]+(label[1]!==undefined?'<span class="gfont">, '+label[1]+"</span>":"")}if(item.type=="hotel"){item.label=label[0]+(label[1]!==undefined?'<span class="gfont">, '+label[1]+(label[2]!==undefined?", "+label[2]:"")+"</span>":"")}}var el=$("<a>");if(!s||!item.active){el=$("<div>")}return $("<li>").addClass(item.type).append(el.addClass("os-clearfix").html(s+'<span class="label-wrap"><span class="label">'+item.label+"</span></span>")).appendTo(ul)},_renderMenu:function(ul,items){var that=this;var type=null;var i=1;ul.addClass("onsite-autocomplete-menu");otpMain.form.location.geo_list=[];$.each(items,function(index,item){if(item.type&&!item.active&&!item.is_empty){otpMain.form.location.geo_list.push({value:item.value,label:item.label});return}if(type!=item.type&&item.type){$("<li>").addClass("type-item").text(names[item.type]).appendTo(ul)}else{if(item.cnt&&!item.type&&!index){$("<li>").addClass("type-item").text(names.city).appendTo(ul)}}that._renderItemData(ul,item);if(type!=item.type){i=1}i++;type=item.type});if(otpMain.form.location.geo_list&&i<2){that._renderItemData(ul,{is_empty:true,label:obj._("Нет туров в ")+otpMain.form.location.geo_list[0].value})}if(obj.form.location.selectType==3){$(".ui-autocomplete").addClass("default-list").prepend($("<div>").addClass("list_bg").css("top",462+"px"));$(".ui-autocomplete").on("scroll",function(){var list=$(this).find(".list_bg");var listHeight=474,delay=10;var top=$(this).scrollTop();if(top+listHeight>this.scrollHeight-delay){list.hide()}else{list.show()}list.css("top",462+$(this).scrollTop()+"px")})}else{$(".ui-autocomplete").removeClass("default-list")}}})})(jQuery,otpMain);(function($,o){var f=function(){var input={};var callback={};var self=this;this.$spinners={};this.$spinnersWrap=undefined;this.stopedRequests=[];this.setInput=function(n,$o,f){input[n]=$o;callback[n]=f};this.parse=function(){var query=otpMain.search.getQuery();for(var i in input){if(input.hasOwnProperty(i)){if(callback[i]&&typeof callback[i]=="function"){callback[i](input[i],query)}else{query[i]=input[i].val()}}}return query};this.toggleFilter=function(){var hash=o.hash.get();if(o.fn.isEmpty(hash)||!o.hash.check()){return}if(typeof hash.st==="string"){hash.st=hash.st.split(",")}if(typeof hash.st!=="undefined"&&hash.st.length>0&&hash.st.join(",")!==""&&hash.st.join(",")!=="5,4,3,2,1"){self.showFilters(1)}if(typeof hash.o==="string"){hash.o=hash.o.split(",")}if(typeof hash.o!=="undefined"&&hash.o.join(",")!==""&&hash.o.join(",")!=="uai,ai,fb,hb,bb,ob"){self.showFilters(2)}if(typeof hash.rt==="string"){hash.rt=hash.rt.split(",")}if(typeof hash.rt!=="undefined"&&hash.rt.join(",")!==""&&hash.rt.join(",")!=="0,10"){self.showFilters(3)}if(typeof hash.r==="string"){hash.r=hash.r.split(",")}if(typeof hash.r!=="undefined"&&hash.r.join(",")!==""&&hash.r.join(",")!=="air,bus,train,ship"){self.showFilters(4)}if(typeof hash.pf!=="undefined"&&hash.pf&&hash.pf>0&&hash.pf!=o.config.priceRange.ua[0]){self.showFilters(5)}if(hash.e&&typeof hash.e[0]!=="undefined"&&hash.e[0]){self.showFilters(6)}};this.showFilters=function(p1){if(!$(".os-toggle-extended_el").hasClass("opened")){$(".os-form-submit_button").addClass("rel");$(".os-toggle-extended_el").addClass("opened");$(".os-extended").css("display","block");$(o.fn.prefix("form-clean_filter",".")).show()}};this.$spinnerTmpl=$("<div>").addClass(o.fn.prefix("spinner-logos-wrap")).append($("<div></div>").addClass(o.fn.prefix("logos-wrap"))).append($("<div></div>").addClass(o.fn.prefix("load-desc")).append(o._("До конца опроса ")).append($("<i>").addClass(o.fn.prefix("spinner-seconds"))).append(" секунд. ").append($("<span>").addClass(o.fn.prefix("seconds-desc")).text(o._("Почему так долго")+"?").click(function(){$(this).parent().find("div:last").toggle(0,function(){if($("#filter-dates-container").length){if($(this).css("display")==="none"){$("#filter-dates-container").css("height","auto")}else{$("#filter-dates-container").css("height","400px")}}})})).append($("<div></div>").css("display","none").addClass(o.fn.prefix("load-desc-text")).html(o._("Когда вы задаёте поиск или открываете тур, мы делаем аналогичный запрос к базе данных всех основных операторов Украины (которые работают по выбранной вами стране). Обычно серверы туроператоров отвечают за 5-10 секунд. Но иногда, особенно в рабочее время или в высокий сезон, системы могут быть перегружены, и время ответа может составлять до 30 и даже до 60 секунд.<br><br>В любом случае, вы экономите уйму времени, т.к. мы показываем актуальные цены всех туроператоров одновременно.")))).on("startTimer",function(){var that=this;var timer=$(this).find("i"),searchId=$(this).data("searchid");timer.text(60);var intervalId=setInterval(function(){if(!$(that).parent().length){window.clearInterval(intervalId);return}var curSec=parseInt(timer.text());if(curSec>0){timer.text(curSec-1)}else{window.clearInterval(intervalId);var tfInfo=o._("Время вышло. Сервер туроператор"),tfLogos=$("<span>"),tfCount=0;if(searchId&&o.form.stopedRequests.indexOf(searchId)<0){o.form.stopedRequests.push(searchId)}if($(that).find("."+o.fn.prefix("loading-logo")).length){$.each($(that).find("."+o.fn.prefix("loading-logo")),function(k,v){tfCount+=1;tfLogos.append($(v).find("img:first"))});if(tfCount>1){tfInfo+=o._("ов")}else{tfInfo+="а"}tfInfo+=tfLogos.html();tfInfo+=o._(" не ответил в отведенное время. Попробуйте обновить страницу через несколько секунд.");$(that).parent().hide();$(that).parent().parent().find(".os-loading").removeClass("os-loading");$(that).remove();tfInfo="";if(typeof o.result.view.showMessage==="function"){o.result.view.showMessage(tfInfo)}if(typeof o.result.view.spinnerHide==="function"){o.result.view.spinnerHide()}if(typeof o.tour.view.showMessage==="function"){o.tour.view.showMessage(tfInfo)}o.result.view.$more.css("visibility","visible")}}},1000)})};o.form=new f()})(jQuery,otpMain);(function($,o){var f=function(){var store={};var self=this;this.selectType=1;this.request="";this.response={};this.autocompleteType="autocomplete";this.object=false;this.callback={};this.selectedSuggest={};this.geo_list=[];this.is_closed=true;this.currentCountry={};this.currentCity={};this.currentHotel={};this.bind=function(n,f){if(this.callback[n]==undefined){this.callback[n]=[]}this.callback[n].push(f);return this};var call=function(n,a,b,c){if(self.callback[n]&&self.callback[n].length){for(var i in self.callback[n]){if(typeof self.callback[n][i]=="function"&&self.callback[n].hasOwnProperty(i)){self.callback[n][i](a,b,c)}}return true}return false};this.setStore=function(k,v){store[k]=v};this.getStore=function(k){return store[k]?store[k]:false};this.geoSuggest=function(search,f){search=JSON.parse(search);search.lang=o.lang;search.text=search.t;search["with"]="price";$.ajax({url:o.config.suggestLink,type:"GET",dataType:"jsonp",data:$.extend(search,o.apiToken),success:function(d){o.tour.head.checkError(d);d.data=[];$.each(d.response,function(i,item){item.objectId=item.id;item.label=item.name;item.value=item.name.split(",")[0];d.data.push(item)});if(o.fn.isEmpty(d.data)){d.data=[{label:o._("Нам неизвестно о турах в ")+"«"+search.text+"»",value:search.text,is_empty:true}]}if(d&&d.data){if(!$.isEmptyObject(d.data)){if(!search.text){search.text="--"}store[search.text]=d.data}}f(d)},error:function(d){f(d)}})};this.init=function(opt){opt=opt||{};opt.autoFocus=opt.autoFocus||true;opt.appendTo=opt.appendTo||false;this.object=this.view.$[this.autocompleteType]({autoFocus:opt.autoFocus,appendTo:opt.appendTo,source:function(request,response){self.request=request;var key;if($.trim(request.term).length===0){key="{empty_key}";self.selectType=2}else{key=request.term;if(key=="--"){self.selectType=3}else{self.selectType=1}}if(store[key]!==undefined){if(!call("source",store[key],response)){response(store[key])}return}var search=JSON.stringify({t:request.term});if(key=="--"){search="{}"}self.geoSuggest(search,function(d){if(d&&d.data){if(!call("source",store[key],response)){response(store[key])}}})},select:function(h,v){self.selectedSuggest=v.item;call("select",h,v)},response:function(event,ui){if(self.selectedSuggest.value!==self.object.val()&&self.selectedSuggest.label!==self.object.val()){self.selectedSuggest={}}call("response",event,ui)},open:function(){o.form.location.view.is_open=true;call("open")},close:function(h){if(!self.selectedSuggest.value){var rq=self.request.term;var rs=store[rq];if(rs&&rs[0]){var val=rs[0].value;if(rs&&rs[0]&&rq!="--"){self.request.term=rq;var s=JSON.stringify({t:val});$.each(o.form.location.geo_list,function(k,v){if(v.label===val||v.value===val){s=false;return false}});if(s){self.geoSuggest(s,function(d){if(d.data){self.selectedSuggest=d.data[0];o.form.datepicker.updateDates(d.data[0]);o.form.datepicker.updateCities(d.data[0]);call("select",h,{item:d.data[0]})}});$(this).val(val)}}}}call("close");setTimeout(function(){o.form.location.view.is_open=false},300)},minLength:2,delay:500});if(typeof osGeo!=="undefined"&&osGeo){var s=JSON.stringify({t:osGeo});self.geoSuggest(s,function(d){if(d.data){self.selectedSuggest=d.data[0];o.form.datepicker.updateDates(d.data[0]);o.form.datepicker.updateCities(d.data[0])}});this.object.val(osGeo)}};this.updateCurrentGeo=function(item){if(isNaN(+item.id)||+item.id<500){self.currentCountry={id:+item.id?item.id:item.objectId,name:item.name?item.name:item.value,namePr:item.namePr}}else{self.currentCountry={id:item.countryId,name:item.countryName,namePr:item.countryNamePr}}o.form.service.view.refresh(self.currentCountry.id)}};o.form.location=new f;o.hash.addTrigger(function(){if(o.hash.get("i",o.hash.get("id",0))!=false){o.form.location.selectedSuggest={label:o.hash.get("t",o.hash.get("to","")),value:o.hash.get("t",o.hash.get("to","")),objectId:o.hash.get("i",o.hash.get("id",0)),type:o.hash.get("y",o.hash.get("type","country"))};if(o.form.location.view&&typeof o.form.location.view.$!=="undefined"&&o.hash.get("t",o.hash.get("to",""))){o.form.location.view.$.val(o.hash.get("t",o.hash.get("to","")).replace(/\+/g," "))}}},40)})(jQuery,otpMain);(function($,o){o.form.filter={}})(jQuery,otpMain);(function($,o){o.form.fromCity=new function(){var self=this;var cities=[];this.get=function(){return cities};this.set=function(data){cities=data};this.getCities=function(geoId,f){var load=function(geoId,f2){$.ajax({url:o.config.deptCitiesLink,type:"GET",dataType:"jsonp",data:$.extend({lang:o.lang,geoId:+geoId},o.apiToken),success:function(resp){f2(resp.deptCities)}})};cities=[];if(o.fn.isEmpty(cities)||!cities.length){load(geoId,function(cities){if(!+geoId){o.storage.set(o.fn.prefix("cities-"+o.lang),cities)}self.set(cities);f(cities)})}else{self.set(cities);f(cities)}}}})(jQuery,otpMain);(function($,o){o.form.regions=new function(){var self=this;this.loadData=function(f){var load=function(f2){$.ajax({url:o.config.regionsLink,type:"GET",dataType:"jsonp",data:$.extend({lang:o.lang},o.apiToken),success:function(resp){f2(resp.regions)}})};var regions=o.storage.get(o.fn.prefix("regions-"+o.lang),"[]");if(o.fn.isEmpty(regions)||!regions.length||typeof regions==="string"){load(function(regions){o.storage.set(o.fn.prefix("regions-"+o.lang),regions);f(regions)})}else{f(regions)}}}})(jQuery,otpMain);(function($,o){o.form.duration=new function(){this.setDuration=function(l){o.form.duration.view.initSelect(l)}};o.hash.addTrigger(function(){o.form.duration.view.setValue(o.hash.get("l",7))},40)})(jQuery,otpMain);(function($,o){o.form.category={};o.hash.addTrigger(function(){o.form.category.view.setValue(o.hash.get("st",new String("")).split(","))},40)})(jQuery,otpMain);(function($,o){o.form.food={};o.hash.addTrigger(function(){o.form.food.view.setValue(o.hash.get("o",new String("")).split(","))},40)})(jQuery,otpMain);(function($,o){o.form.transport={};o.hash.addTrigger(function(){o.form.transport.view.setValue(o.hash.get("r",new String("")).split(","))},40)})(jQuery,otpMain);(function($,o){o.form.service=new function(){var self=this;this.getServices=function(countryId,f){if(!+countryId||+countryId>500){f(o.config.service);return false}var load=function(countryId,f2){$.ajax({url:o.config.servicesLink,type:"GET",dataType:"jsonp",data:$.extend({lang:o.lang,countryId:+countryId},o.apiToken),success:function(resp){f2(resp)}})};var services=o.storage.get(o.fn.prefix("services-"+o.lang),"{}");if(!services||!services[countryId]){load(countryId,function(services){o.storage.append(o.fn.prefix("services-"+o.lang),countryId,services);f(services)})}else{f(services[countryId])}}};o.hash.addTrigger(function(){o.form.service.view.setValue(o.hash.get("e",new String("")).split(","))},40)})(jQuery,otpMain);(function($,o){o.form.hotelRating={};o.hash.addTrigger(function(){o.form.hotelRating.view.setValue(o.hash.get("rt",new String("")).split(","))},40)})(jQuery,otpMain);(function($,o){o.form.datepicker=new function(){var self=this;var data={},dates=[];this.setDates=function(d){if(!o.fn.isEmpty(d)){data=d;dates=Object.keys(d);dates.sort(function(d1,d2){if(self.parseISO8601(d1).getTime()>self.parseISO8601(d2).getTime()){return 1}return -1})}else{this.defaultDates()}};this.getDates=function(){return dates};this.getDuration=function(date){if(data){return data[o.tour.formatDate(date)]}};this.defaultDates=function(){var now=new Date();var dateFrom=new Date(now.getTime());var dateTo=new Date(now.getTime()+31536000000);dates=[dateFrom.getFullYear()+"-"+("0"+(dateFrom.getMonth()+1)).slice(-2)+"-"+dateFrom.getDate(),dateTo.getFullYear()+"-"+("0"+(dateTo.getMonth()+1)).slice(-2)+"-"+dateTo.getDate()]};this.parseISO8601=function(dateStringInRange){var isoExp=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/,date=new Date(NaN),month,parts=isoExp.exec(dateStringInRange);if(parts){month=+parts[2];date.setFullYear(parts[1],month-1,parts[3]);if(month!=date.getMonth()+1){date.setTime(NaN)}}return date}};o.form.datepicker.defaultDates();o.hash.addTrigger(function(){o.form.datepicker.view.setValue([o.hash.get("c",""),o.hash.get("v","")])},40);o.form.datepicker.mounth=[o._("января"),o._("февраля"),o._("марта"),o._("апреля"),o._("мая"),o._("июня"),o._("июля"),o._("августа"),o._("сентября"),o._("октября"),o._("ноября"),o._("декабря")];o.form.datepicker.day=[o._("Вс"),"Пн","Вт","Ср","Чт","Пт","Сб"];o.form.datepicker.day_min=[o._("вс"),"пн","вт","ср","чт","пт","сб"];o.form.datepicker.parser=function(date,format){var parts=date.split(format.separator),date=new Date(),val;date.setHours(0,0,0,0);if(parts.length===format.parts.length){var year=date.getFullYear(),day=date.getDate(),month=date.getMonth();for(var i=0,cnt=format.parts.length;i<cnt;i++){val=parseInt(parts[i],10)||1;switch(format.parts[i]){case"dd":case"d":day=val;date.setDate(val);break;case"mm":case"m":month=val-1;date.setMonth(val-1);break;case"yy":year=2000+val;date.setFullYear(2000+val);break;case"yyyy":year=val;date.setFullYear(val);break}}date=new Date(year,month,day,0,0,0)}return date};o.form.datepicker.getTextDate=function(date,format,separator){var dateArr=[],str;for(var i=0;i<format.parts.length;i++){switch(format.parts[i]){case"D":dateArr[i]=o.form.datepicker.day[date.getDay()];break;case"d":dateArr[i]=date.getDate();break;case"M":dateArr[i]=o.form.datepicker.mounth[date.getMonth()];break;case"dd":dateArr[i]=(date.getDate()<10?"0":"")+date.getDate();break;case"mm":dateArr[i]=(date.getMonth()+1<10?"0":"")+(date.getMonth()+1);break;case"yyyy":dateArr[i]=date.getFullYear();break}}str=dateArr.join(separator);return str};o.form.datepicker.updateDates=function(item,f){if(!item.objectId||!item.type){var dates=o.form.datepicker.getDates();if(typeof f==="function"){f({},dates)}return}$.ajax({url:o.config.datesLink,type:"POST",dataType:"jsonp",data:$.extend({to:item.objectId},o.apiToken),success:function(d){o.tour.head.checkError(d);var newDates={};$.each(d.dates,function(k,v){newDates[k]=v.split(",")});d=newDates;o.form.datepicker.setDates(d);var dates=o.form.datepicker.getDates();var minDate=o.form.datepicker.parseISO8601(dates[0]);minDate.setHours(0,0,0,0);var dateFrom=o.form.datepicker.view.dateFirst.date;var dateTo=o.form.datepicker.view.dateSecond.date;if(dateFrom&&o.fn.in_array(o.tour.formatDate(dateFrom),dates)){minDate=dateFrom}var maxDate=new Date(minDate.getTime());if(dateTo&&o.fn.in_array(o.tour.formatDate(dateTo),dates)||dates.length==2){maxDate=dateTo}o.form.datepicker.view.setValue([minDate,maxDate]);o.form.duration.setDuration(d[o.tour.formatDate(minDate)]);if(typeof f==="function"){f(d,dates)}}})};o.form.datepicker.updateCities=function(item){o.form.fromCity.getCities(item.objectId,function(cities){if(o.fn.isEmpty(cities)){o.form.fromCity.getCities(0,function(cities){o.form.fromCity.view.setOptions(cities)})}else{o.form.fromCity.view.setOptions(cities)}})};o.form.location.bind("select",function(h,v){o.form.location.updateCurrentGeo(v.item);o.form.datepicker.updateDates(v.item);o.form.datepicker.updateCities(v.item);if(o.form.location.currentCountry.id==116||o.form.location.currentCountry.id==55){o.form.transport.view.setValue(["no"]);o.form.transport.view.checkSelected()}else{if(o.form.transport.view.getValue().join(",")==="no"){o.form.transport.view.setValue(["air","bus","train","trainbus","ship"])}}})})(jQuery,otpMain);(function($,o){o.form.price={};o.hash.addTrigger(function(){o.form.price.view.setValue([o.hash.get("pf",""),o.hash.get("pt","")])},40)})(jQuery,otpMain);(function($,o){var f=function(){this.getText=function(st){var people,children;if(st){st=st.toString();people=parseInt(st.substr(0,1));children=this.view.parseChildren(st.substr(1))}else{people=this.view.getStore().people;children=this.view.getStore().children}var str="";switch(parseInt(people)){case 1:str+="один";break;case 2:str+=o._("вдвоем");break;case 3:str+=o._("втроем");break;default:str+=o._("вчетвером");break}var cnt;for(var i in children){if(children[i]>0&&children.hasOwnProperty(i)){cnt++}}switch(cnt){case 0:str+=", "+o._("без детей");break;case 1:str+=", 1 "+o._("ребенок");break;default:str+=", "+cnt+"-е детей";break}return str};this.getPeopleChildren=function(){var str=o._("Стоимость тура для "),people,children;var all=o.form.people.view.getValue();if(all){all=all.toString();people=parseInt(all.substr(0,1));children=o.form.people.view.parseChildren(all.substr(1))}else{people=o.form.people.view.getStore().people;children=o.form.people.view.getStore().children}switch(parseInt(people)){case 1:str+=o._("одного взрослого");break;case 2:str+="2-х "+o._("взрослых");break;case 3:str+="3-х "+o._("взрослых");break;default:str+="4-х "+o._("взрослых");break}var counter=0;for(var i in children){if(children[i]>0&&children.hasOwnProperty(i)){counter++}}switch(counter){case 0:str+=", "+o._("без детей");break;case 1:str+=" "+o._("и")+" 1 "+o._("ребенка");break;default:str+=" "+o._("и")+" "+counter+"-х "+o._("детей");break}return str}};o.form.people=new f;o.hash.addTrigger(function(){o.form.people.view.setValue(o.hash.get("p",o.hash.get("people",2)))},40)})(jQuery,otpMain);(function($,o){var f=function(){this.hotels={};this.index=[];this.callback=[];this.otpB=0;var self=this;this.hotelIds=[];this.hotelsNew={};this.minPrice={};self.bind=function(n,f){self.callback[n]=f;return this};var call=function(n,p){if(self.callback[n]){if(typeof self.callback[n]=="function"){self.callback[n](p);return true}}return false};self.set=function(d){var i,j,m=false;self.current=[];if(d.hotels){for(i in d.hotels){if(d.hotels.hasOwnProperty(i)){for(j in d.hotels[i]){if(d.hotels[i].hasOwnProperty(j)){self.current.push(i);setHotel(d.hotels[i][j]);m=true}}}}self.index=[];indexHotels();for(i in self.index){if(self.index.hasOwnProperty(i)){if(i==2){self.otpB=self.index[i].i}self.hotels[self.index[i].i].view.$.appendTo(self.view.$)}}call("set",d.hotels)}return m};self.render=function(){self.view.render()};self.reset=function(){self.hotels={};self.hotelsNew={};self.hotelIds=[];self.index=[];self.view.$result.empty();o.result.view.$more.css("visibility","hidden");o.result.view.$noInfo.hide()};var setHotel=function(hotel){if(!self.hotels[hotel.i]){hotel.p=parseFloat(hotel.p);self.hotels[hotel.i]=new self.hotel(hotel,self)}else{self.hotels[hotel.i].reset(hotel)}};var indexHotels=function(){var i;self.index=[];for(i in self.hotels){if(self.hotels.hasOwnProperty(i)){self.index.push({i:self.hotels[i].object.i,r:self.hotels[i].object.r,p:self.hotels[i].object.p})}}if(o.search.query.sr=="rate"){self.index.sort(function(a,b){return b.r-a.r})}else{self.index.sort(function(a,b){return a.p-b.p})}};self.resultSet=function(f,hotels,hotelId){var i,j;for(i in hotels){if(hotels.hasOwnProperty(i)){for(j in hotels[i]){if(hotels[i].hasOwnProperty(j)){hotels[i][j].offerIds=[];hotels[i][j].offers=$.map(hotels[i][j].offers,function(offer){hotels[i][j].offerIds.push(offer.i);return offer});if(self.hotelIds.indexOf(j)==-1){hotels[i][j].offers.sort(function(a,b){return a.pl-b.pl});self.hotelIds.push(j);self.hotelsNew[j]=hotels[i][j]}else{$.each(hotels[i][j].offers,function(k,v){if(self.hotelsNew[j].offerIds.indexOf(v.i)==-1){self.hotelsNew[j].offerIds.push(v.i);self.hotelsNew[j].offers.push(v)}});self.hotelsNew[j].offers.sort(function(a,b){return a.pl-b.pl})}}}}}if(+hotelId>0){f(self.hotelsNew[hotelId].offers);return}var hotelList=$.map(self.hotelsNew,function(hotel){return hotel});hotelList.sort(function(a,b){return a.offers[0].pl-b.offers[0].pl});if(typeof hotelList[0]!=="undefined"&&typeof hotelList[0].offers[0]!=="undefined"){self.minPrice={mp:hotelList[0].offers[0].p,mc:hotelList[0].offers[0].u}}f(hotelList,o.fn.isEmpty(o.fn.getFirst(hotels||{})))}};o.result=new f()})(jQuery,otpMain);(function($,obj){var mapEmpty=function(){this.isInit=function(){return false};this.getMap=function(){};this.getMarkers=function(){};this.fit=function(){};this.getImage=function(){};this.addMarker=function(){};this.cleanMarkers=function(){};this.initMap=function(){};this.getInfo=function(){};this.init=function(){};this.resize=function(){};this.addConfig=function(){};this.addF=function(){}};var map=function(){var self=this;var o={};var mapElemId="gMap";this.mapIsOpen=false;this.g={};var center={lat:50.45,lng:30.5};var zoom=3;var markers={};var isFirstLoad=false;var _isInit=false;var info={};var config={};this.icons={};this.show=function(name){if(!self.getMap(name)){self.initMap(name)}if(showF[name]){showF[name][0](showF[name][1])}else{$("#"+name).show()}return this};this.hide=function(name){if(hideF[name]){hideF[name][0](hideF[name][1])}else{$("#"+name).hide()}};this.isInit=function(){return _isInit};this.getMap=function(name){name=name||mapElemId;return o[name]};this.getMarkers=function(name){name=name||mapElemId;return markers[name]};this.fit=function(name){name=name||mapElemId;if(!this.getMap(name)){this.initMap(name)}var bounds=new this.g.LatLngBounds();var m=this.getMarkers(name);for(var i in m){var ll=new this.g.LatLng(m[i].position.lat(),m[i].position.lng());bounds.extend(ll)}this.getMap(name).fitBounds(bounds)};this.getImage=function(name){name=name||"orig";return this.icons[name]};this.addMarker=function(name,data){name=name||mapElemId;if(!this.getMap(name)){this.initMap(name)}var m=this.getMarkers(name);if(data&&data.key!==undefined&&m[data.key]!==undefined||!data.lat||!data.lng||(data.lat==0&&data.lng==0)){return false}var image=this.getImage();var marker=new this.g.Marker({position:new this.g.LatLng(data.lat,data.lng)});m[data.key]=marker;if(name){marker.setMap(this.getMap(name))}return marker};this.cleanMarkers=function(name){if(!this.getMap(name)){this.initMap(name)}var m=this.getMarkers(name);for(var i in m){m[i].setMap(null)}markers[name]={};self.getMap(name).setCenter(new this.g.LatLng(center.lat,center.lng));self.getMap(name).setZoom(zoom)};this.initMap=function(name,options){if(this.getMap(name)){return this.getMap(name)}if(config[name]){options=config[name]}markers[name]={};var latlng=new this.g.LatLng(center.lat,center.lng);options=options||{zoom:zoom,draggable:true,scrollwheel:false,scaleControl:true,streetViewControl:false,navigationControl:true,disableDoubleClickZoom:false,center:latlng,mapTypeId:google.maps.MapTypeId.HYBRID,maxZoom:18,};o[name]=new this.g.Map(document.getElementById(name),options);info[name]=new this.g.InfoWindow({content:"",pixelOffset:new google.maps.Size(0,2)});for(var i in initF[name]){this.bind(name,"load",initF[name][i][0],initF[name][i][1])}initF[name]=[];return o[name]};this.getInfo=function(name){return info[name]};this.icons={};this.init=function(){this.g=google.maps;this.icons.orig={url:"/static/img/public/map/marker_new.png",size:new this.g.Size(14,14),origin:new this.g.Point(0,0),anchor:new this.g.Point(7,7)};this.icons.x2={url:"/static/img/public/map/marker_select.png",size:new obj.map.g.Size(20,20),origin:new obj.map.g.Point(0,0),anchor:new obj.map.g.Point(10,10)};_isInit=true};this.resize=function(name){if(!this.getMap(name)){this.initMap(name)}this.g.event.trigger(this.getMap(name),"resize")};this.addConfig=function(name,options){config[name]=options};this.bind=function(name,bind,f,a){["bind_"+bind](name,f,a)};var initF={};var bind_load=function(name,f,a){if(this.getMap(name)){f(a)}else{if(!initF[name]){initF[name]=[]}initF[name].push([f,a])}};var showF={};var bind_show=function(name,f,a){showF[name].push([f,a])};var hideF={};var bind_hide=function(name,f,a){hideF[name].push([f,a])}};var mapInit=function(){this.init=function(el){if(typeof google!="undefined"&&google.maps){obj.map=new map;obj.map.init();obj.map.initMap(el);obj.map.addMarker(obj.fn.prefix("gMap"),{lat:obj.tour.hotel.latlng.a,lng:obj.tour.hotel.latlng.o,key:"1"});obj.map.fit(obj.fn.prefix("gMap"));obj.map.init(obj.fn.prefix("gMap"))}else{obj.map=new mapEmpty}}};obj.mapInit=new mapInit})(jQuery,otpMain);(function($,o){o.result.hotel=function(hotel,parent){this.reset=function(h){var i;for(i in h.offers){if(!this.object.offers[i]&&h.offers.hasOwnProperty(i)){this.object.offers[i]=h.offers[i]}}this.view.reset(h)};this.getLink=function(offer,page){var n=o.search.getSearchQueryForHash(o.search.query);n.page=page||"tour";n.hid=this.object.i;n.hnm=this.object.h;if(offer){n.oid=offer.i;n.od=offer.d;n.ol=offer.l;if(offer.t==="no"){n.r="no"}}return window.location.protocol+"//"+window.location.hostname+window.location.pathname+window.location.search+"#"+o.hash.compile(n,true)};var self=this;this.object=hotel;this.parent=parent;this.view=new o.result.hotelView(this)}})(jQuery,otpMain);(function($,o){var f=function(){var self=this;this.hotel={};this.offer={};this.offers={};this.rooms={};this.foods={};this.days=[];this.months=[];this.reviews={};this.isInit=false;this.offerChanged=false;this.priceNumber=undefined;this.callback=[];this.matrixLen={y:5,x:5};this.bind=function(n,f){self.callback[n]=f;return this};var call=function(n,p){if(self.callback[n]){if(typeof self.callback[n]=="function"){self.callback[n](p);return true}}return false};this.init=function(){o.hash.parse();this.hotel.id=o.hash.get("hid",10601);this.hotel.ln=o.hash.get("hnm","El_Samaka_Beach");this.hotel.rooms={};this.hotel.offers=[];this.offer.id=o.hash.get("oid",o.hash.get("offerId",0));this.offer.od=o.hash.get("od",o.hash.get("checkIn",0));this.offer.ol=o.hash.get("ol",o.hash.get("length",0));if(!this.hotel.id){var e=o.hash.get();e.page="form";window.location.href="#"+o.hash.compile(e,true)}this.isInit=true;if(o.view.$.parent().width()<421){self.matrixLen.x=1}if(o.view.$.parent().width()<801&&o.view.$.parent().width()>=421){self.matrixLen.x=3}return this};this.getData=function(f,el){this.init();$.ajax({type:"POST",url:o.config.tourLink,dataType:"jsonp",timeout:25000,data:$.extend({hotelId:self.hotel.id,lang:o.lang},o.apiToken),success:function(data){data.data=data.hotel;try{o.tour.head.checkError(data);if(typeof f=="function"){if(data.data){self.hotel.city=data.data.c;self.hotel.country=data.data.t;self.hotel.latlng=data.data.g;self.hotel.stars=data.data.s;self.hotel.n=data.data.n;self.hotel.nm=data.data.nm;self.hotel.fm=data.data.fm;if(data.data.o.r){$.each(data.data.o.r,function(k,v){self.hotel.rooms[v.id]=v})}}f(data.data)}}catch(err){console.log(err.message)}},error:function(x,t,m){if(t==="timeout"){el.removeClass(o.fn.prefix("loading"));el.append($("<span>").text("Сервер временно недоступен."))}else{console.log(x,t,m)}}})};this.getOffers=function(f,refresh,od,ol,oid,r,ofs,extra){var params=$.extend(o.search.getQuery(),o.hash.get());var od=od||params.od;var ol=ol||7;var extra=extra||{};od=(typeof od==="string"?od.replace(/-/g,"/"):od);var query={};var curDate=new Date();var minDate=new Date((typeof od==="object"?od[0]:od));var maxDate=new Date((typeof od==="object"?od[1]:od));var l=(typeof ol==="object"?ol[0]:(ol||params.l));var lt=(typeof ol==="object"?ol[1]:(ol||params.l));curDate.setDate(curDate.getDate()+1);if(refresh){curDate.setHours(0,0,0,0);minDate.setHours(0,0,0,0);maxDate.setHours(0,0,0,0);if(minDate.valueOf()>=curDate.valueOf()){minDate.setDate(minDate.getDate()-Math.floor(self.matrixLen.y/2));maxDate.setDate(maxDate.getDate()+Math.floor(self.matrixLen.y/2));if(minDate.valueOf()<curDate.valueOf()){minDate=new Date(curDate.getTime());maxDate=new Date(curDate.getTime());maxDate.setDate(maxDate.getDate()+(self.matrixLen.y-1))}}else{minDate=new Date();maxDate=new Date();minDate.setDate(curDate.getDate()+7);maxDate.setDate(maxDate.getDate()+14)}if(typeof ol!=="object"){l=ol||params.ol;if(l>1){l=l-Math.floor(self.matrixLen.x/2)}if(l<1){l=1}if(!l){l=o.hash.get("cntDay",o.hash.get("l"))}lt=parseInt(l)+(self.matrixLen.x-1)}}else{if(typeof od!=="object"){l=parseInt(params.ol?params.ol:params.length||params.l);lt=l;if(typeof oid==="undefined"){oid=o.hash.get("oid",o.hash.get("offerId",0))}if(isNaN(minDate.valueOf())||minDate.valueOf()<curDate.valueOf()){minDate=new Date(o.hash.get("c"));maxDate=new Date(o.hash.get("v"))}}}query.n=0;query.f=+extra.f>0?extra.f:params.f;query.d=+extra.d>0?extra.d:params.d;query.i=this.hotel.id;query.y="hotel";query.c=this.formatDate(minDate);query.v=this.formatDate(maxDate);query.l=l;query.lt=lt;query.p=params.p;query.r=r?r:(params.r?(typeof params.r==="string"?params.r.split(","):params.r):"");query.oid=oid;if(ofs){query.ofs=1;query.now=1}if(query.oid){query.now=1}query.toString=params.toString;if(typeof self.hotel.offers==="undefined"||!self.hotel.offers){self.hotel.offers=[]}o.search.getData(query,function(e){if(o.fn.isEmpty(e.hotels)){return}o.hash.parse();var i,j,k;if(e.hotels){for(i in e.hotels){if(e.hotels.hasOwnProperty(i)){for(j in e.hotels[i]){if(e.hotels[i].hasOwnProperty(j)){for(k in e.hotels[i][j].offers){if(e.hotels[i][j].offers.hasOwnProperty(k)){self.hotel.offers.push(e.hotels[i][j].offers[k])}}}}}}}},function(e){},function(e){self.days=[];for(i=query.l;i<(+query.l+self.matrixLen.x);i++){self.days.push(i)}if(typeof self.offer==="undefined"){self.offer={}}self.months=[];for(i=0;i<self.matrixLen.y;i++){var fd=self.formatDate(minDate);minDate.setDate(minDate.getDate()+1);self.months.push(fd)}call("get_offers",self.hotel.offers);if(o.fn.isEmpty(self.hotel.offers)){f(self.days,self.months);return}var offers={};for(i in self.hotel.offers){if(self.hotel.offers.hasOwnProperty(i)){var offer=self.hotel.offers[i],key=offer.d+offer.l;if(!(key in offers)){offers[key]=[]}if(o.hash.get("page")==="tour"){offer.link=self.getLink(offer)}offers[key].push(offer)}}self.hotel.offers=[];e=null;for(i in offers){if(offers.hasOwnProperty(i)){offers[i].sort(function(a,b){return a.pl-b.pl})}}if(self.offer.i){self.offer.od=self.offer.d;self.offer.ol=self.offer.l}if(self.offer&&self.offer.od&&self.offer.ol){var result=self.getRooms(offers[self.offer.od+self.offer.ol],self.offer.id);if(!self.offer.i&&result[0]){self.offer=result[0]}self.rooms=result[1];self.foods=result[2];result=null}self.offers=offers;f(self.days,self.months)})};this.getOffersNew=function(f,params){params.c=typeof params.c==="string"?new Date(params.c):params.c;params.v=typeof params.v==="string"?new Date(params.v):params.v;var nowDate=new Date();var minDate=params.c||new Date(nowDate.getDate()+7);var maxDate=params.v||new Date(nowDate.getDate()+14);query.n=0;query.f=params.f;query.i=params.i;query.y=params.y;query.c=this.formatDate(minDate);query.v=this.formatDate(maxDate);query.l=params.l;query.lt=params.lt;query.p=params.p;query.r=r?r:(params.r?(typeof params.r==="string"?params.r.split(","):params.r):"");query.oid=params.oid;if(ofs){query.ofs=1;query.now=1}if(query.oid){query.now=1}if(typeof self.hotel.offers==="undefined"||!self.hotel.offers){self.hotel.offers=[]}o.search.getData(query,function(e){if(o.fn.isEmpty(e.hotels)){return}o.hash.parse();var i,j,k;if(e.hotels){for(i in e.hotels){if(e.hotels.hasOwnProperty(i)){for(j in e.hotels[i]){if(e.hotels[i].hasOwnProperty(j)){for(k in e.hotels[i][j].offers){if(e.hotels[i][j].offers.hasOwnProperty(k)){self.hotel.offers.push(e.hotels[i][j].offers[k])}}}}}}}},function(e){},function(e){self.days=[];for(i=query.l;i<(+query.l+self.matrixLen.x);i++){self.days.push(i)}self.months=[];for(i=0;i<self.matrixLen.y;i++){var fd=self.formatDate(minDate);minDate.setDate(minDate.getDate()+1);self.months.push(fd)}call("get_offers",self.hotel.offers);if(o.fn.isEmpty(self.hotel.offers)){f(self.days,self.months);return}var offers={};for(i in self.hotel.offers){if(self.hotel.offers.hasOwnProperty(i)){var offer=self.hotel.offers[i],key=offer.d+offer.l;if(!(key in offers)){offers[key]=[]}if(o.hash.get("page")==="tour"){offer.link=self.getLink(offer)}offers[key].push(offer)}}self.hotel.offers=[];e=null;for(i in offers){if(offers.hasOwnProperty(i)){offers[i].sort(function(a,b){return a.pl-b.pl})}}if(self.offer.i){self.offer.od=self.offer.d;self.offer.ol=self.offer.l}if(self.offer&&self.offer.od&&self.offer.ol){var result=self.getRooms(offers[self.offer.od+self.offer.ol],self.offer.id);if(!self.offer.i){self.offer=result[0]}self.rooms=result[1];self.foods=result[2];result=null}self.offers=offers;f(self.days,self.months)})};this.getRooms=function(offers,id){var curOffer,rooms={},foods=[];for(i in offers){if(offers.hasOwnProperty(i)){var offer=offers[i];if(id){if(offer.i==id){curOffer=offer}}else{if(i<1){curOffer=offer}}if(!(offer.ri in rooms)){rooms[offer.ri]={label:offer.r}}if(!(offer.f in rooms[offer.ri])){rooms[offer.ri][offer.f]=offer}if(!o.fn.in_array(offer.f,foods)){foods.push(offer.f)}if(!rooms[offer.ri]||!rooms[offer.ri][offer.f]){rooms[offer.ri][offer.f]=offer}}}return[curOffer,rooms,foods]};this.formatDate=function(d){return d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2)};this.formatDate2=function(d){return("0"+d.getDate()).slice(-2)+"."+("0"+(d.getMonth()+1)).slice(-2)+"."+d.getFullYear()};this.foodInfo=function(val){var i,v;for(i in o.config.food){if(o.config.food.hasOwnProperty(i)){v=o.config.food[i];if(val==v.value){return v.description.charAt(0).toUpperCase()+v.description.slice(1)+" ("+v.label+")"}}}};this.getValue=function(obj,val){var i,v,text;for(i in obj){if(obj.hasOwnProperty(i)){v=obj[i];if(val==v.value){text='<span class="f_label">'+v.label+"</span>";if(v.description){text+='<br><span class="f_value">'+v.description+"</span>"}return text}}}};this.getFromCity=function(obj,val){var i,v;for(i in obj){if(obj.hasOwnProperty(i)){v=obj[i];if(val==v.id){return v.name}}}};this.getLink=function(offer,page){var n=o.hash.get();n.page=page||"tour";n.hid=this.hotel.id;n.hnm=this.hotel.ln;if(offer){n.oid=offer.i;n.od=offer.d;n.ol=offer.l}return window.location.protocol+"//"+window.location.hostname+window.location.pathname+window.location.search+"#"+o.hash.compile(n,true)};this.changeOffer=function(oid,ol,od){if(oid&&ol&&od&&self.offerChanged){location.reload()}};this.sendForm=function(q,f){$.ajax({type:"POST",url:o.config.orderLink+"?"+q,dataType:"jsonp",timeout:25000,data:o.apiToken,success:function(data){o.tour.head.checkError(data,true);if(typeof f=="function"){f(data)}},error:function(x,t,m){console.log(x,t,m)}})};this.setOfferHash=function(offer,compile){o.hash.add("oid",offer.i);o.hash.add("ol",offer.l);o.hash.add("od",offer.d);if(compile){o.hash.compile()}return true}};o.tour=new f;o.hash.addTrigger(function(){o.tour.changeOffer(o.hash.get("oid"),o.hash.get("ol"),o.hash.get("od"))},40,"tour")})(jQuery,otpMain);(function($,o){var f=function(){};o.tour.hotelInfo=new f()})(jQuery,otpMain);(function($,o){o.tour.photo={}})(jQuery,otpMain);(function($,o){o.tour.hotelMap={}})(jQuery,otpMain);(function($,o){o.tour.reviews=new function(){this.load=function(f,el,k){$.ajax({type:"GET",url:o.config.reviewsLink,dataType:"html",timeout:25000,data:{htl:o.tour.hotel.id,tp:9,skin:1,count:10},success:function(data){if(typeof f=="function"){f(data)}},error:function(x,t,m){console.log(x,t,m);el.removeClass(o.fn.prefix("loading"));el.append($("<span>").text(500));console.log(t)}})};this.votes=function(f,k){$.ajax({type:"GET",url:o.config.votesLink,dataType:"jsonp",timeout:25000,data:{key:k,hotelId:o.tour.hotel.id},success:function(data){if(typeof f=="function"){f(data)}}})}}})(jQuery,otpMain);(function($,o){var f=function(){var self=this;this.$=undefined;this.$service=undefined;var $tourType,$geoPoints,$geoTo,$geoFrom,$tourDates,$dates,$tourDuration,$people,$pAdult,$pChildren,$extended,$hotelPart,$servicePart,$transport,$hotelRating,$hotelFoodBlock,$hotelPrice,$submit;this.init=function(){this.$=$("<div>").addClass(o.fn.prefix("form-wrap"));var $form=$("<form></form>").appendTo(this.$);$tourType=$("<div></div>").addClass(o.fn.prefix("tour-type"));$("<span></span>").addClass(o.fn.prefix("tour-type-item")).text(o._("Туры")).appendTo($tourType);$("<span></span>").addClass(o.fn.prefix("tour-type-item")).text(o._("Экскурсии")).appendTo($tourType);$geoPoints=$("<div></div>").addClass(o.fn.prefix("geo-points")).appendTo($form);$geoTo=$("<span></span>").addClass(o.fn.prefix("point-to")).appendTo($geoPoints);$geoFrom=$("<span></span>").addClass(o.fn.prefix("point-from")).appendTo($geoPoints);$dates=$("<div>").addClass(o.fn.prefix("dates")).appendTo($form);$tourDates=$("<span>").addClass(o.fn.prefix("tour-dates")).appendTo($dates);$tourDuration=$("<span>").addClass(o.fn.prefix("tour-duration")).appendTo($dates);$people=$("<div>").addClass(o.fn.prefix("people")).appendTo($form);if(o.apiType&&o.apiType==="full"){$("<div>").addClass("os-toggle-extended d-el").append($("<span>").addClass("os-toggle-extended_el").append($("<span>").text(o._("Уточнить")).addClass("os-l-link ")).bind("click",function(){$(".os-extended").toggle();$(".os-form-submit_button").toggleClass("rel");$(this).toggleClass("opened");$(".os-form-clean_filter").toggle()})).append(o._(" категорию отеля, питание, вид транспорта?")).appendTo($form);$("<div>").addClass("os-toggle-extended m-el").append($("<span>").addClass("os-toggle-extended_el").append($("<span>").text(o._("Расширенный поиск")).addClass("os-l-link ")).bind("click",function(){$(".os-extended").toggle();$(".os-form-submit_button").toggleClass("rel");$(this).toggleClass("opened");$(".os-form-clean_filter").toggle()})).appendTo($form);$extended=$("<div>").addClass(o.fn.prefix("extended")).appendTo($form);$hotelFoodBlock=$("<span>").addClass(o.fn.prefix("extended-hfblock")).addClass("h-cf-wrap").append($("<p>").addClass(o.fn.prefix("block_label")).text(o._("Категория отеля и питание"))).appendTo($extended);$hotelRating=$("<span>").addClass(o.fn.prefix("extended-hfblock h-rating")).append($("<p>").addClass(o.fn.prefix("block_label")).html(o._("Оценка")+' <span class="description">'+o._("по отзывам")+"</span>")).appendTo($extended);$transport=$("<span>").addClass(o.fn.prefix("extended-hfblock h-transp")).append($("<p>").addClass(o.fn.prefix("block_label")).text("Транспорт")).appendTo($extended);$hotelPrice=$("<span>").addClass(o.fn.prefix("extended-hfblock h-price")).append($("<p>").addClass(o.fn.prefix("block_label")).html(o._("Цена")+', грн <span class="description">'+o._("за всех туристов")+"</span>")).appendTo($extended);self.$service=$("<span>").addClass(o.fn.prefix("extended-service")).append($("<p>").addClass(o.fn.prefix("block_label")).text(o._("Услуги"))).appendTo($extended)}$submit=$("<div>").addClass(o.fn.prefix("form-submit")).append($("<a>").hide().addClass(o.fn.prefix("form-clean_filter")).text("Очистить фильтры").attr("href","#").on("click",function(){o.form.category.view.setValue("1,2,3,4,5");o.form.food.view.setValue(["ob","bb","hb","fb","ai","uai"]);o.form.hotelRating.view.setValue([0,10]);o.form.transport.view.setValue(["air","bus","train","trainbus","ship"]);o.form.price.view.setValue([500,100000]);o.form.service.view.setValue([""]);$.map(o.form.service.view.$.find("input"),function(item){$(item).attr("checked",false)});return false})).append($("<button>").addClass(o.fn.prefix("form-submit_button")).attr("type","submit").text(o._("Найти туры")).on("click",function(){if($(".os-form-wrap .ui-autocomplete-input").val()==""){alert(o._("Выберите страну, курорт или отель"));return false}o.hash.rm("page");o.hash.add("page","form");o.hash.compile();otpMain.search.setHash(otpMain.form.parse());if(typeof ga==="function"){ga("send","event","Отпуск.НаСайт Поиск","Нажата кнопка Найти",o.form.location.currentCountry.name)}if(typeof otpMain.osTarget!=="undefined"&&otpMain.osTarget){if(typeof otpMain.osTarget!=="string"){location.reload()}var hash=otpMain.hash.get();var localUri=window.location.hostname+window.location.pathname+window.location.search;var osTargetD=otpMain.osTarget.replace("http://","");if(localUri.indexOf(osTargetD)<0){if(typeof osTargetBlank!=="undefined"){window.open(otpMain.osTarget+"#"+otpMain.hash.compile(hash,true),"_blank");return false}else{window.location.href=otpMain.osTarget+"#"+otpMain.hash.compile(hash,true)}return false}}o.result.render();o.result.view.scrollToResults();o.search.submit()})).appendTo($form)};this.resetPage=function(){if(typeof o.tour.view.$!=="undefined"){o.tour.view.$.empty()}if(typeof o.tour.hotelInfo.view.$!=="undefined"){o.tour.hotelInfo.view.$.empty()}if(typeof o.tour.hotelMap.view.$!=="undefined"){o.tour.hotelMap.view.$.empty()}if(typeof o.tour.photo.view.$!=="undefined"){o.tour.photo.view.$.empty()}if(typeof o.tour.reviews.view.$!=="undefined"){o.tour.reviews.view.$.empty()}};this.render=function(container){o.form.view.init();container=container||o.view.$;o.form.location.view.render($geoTo);o.form.fromCity.view.render($geoFrom);o.form.duration.view.render($tourDuration);o.form.category.view.render($hotelFoodBlock);o.form.food.view.render($hotelFoodBlock);o.form.transport.view.render($transport);o.form.service.view.render(self.$service);o.form.hotelRating.view.render($hotelRating);o.form.price.view.render($hotelPrice);o.form.people.view.render($people);o.form.datepicker.view.render($tourDates);o.form.regions.view.render($geoFrom);this.$.appendTo(container);setTimeout(function(){o.form.fromCity.getCities(o.hash.get("i",0),function(cities){o.form.fromCity.view.setOptions(cities)})},500);o.form.location.autocompleteType="otpautocomplete";o.form.location.init();o.form.view.$.submit(function(e){e.preventDefault()});$(function(){var is_touch_device="ontouchstart" in document.documentElement;if(!is_touch_device){$("body").find("."+o.fn.prefix("form-wrap")).addClass("desktop")}if(o.hash.get("page")==="form"){o.form.toggleFilter()}})}};o.form.view=new f();$(function(){$("body").on("click",function(){if(o.popupTrigger==false){$(this).find(".popup").hide()}else{o.popupTrigger=false}})})})(jQuery,otpMain);(function($,o){var f=function(){this.$Wrap=undefined;this.$=undefined;var self=this;this.is_open=false;this.init=function(){this.$Wrap=$("<span>").addClass(o.fn.prefix("point-to-wrap"));this.$=$("<input>").addClass(o.fn.prefix("block_field")).attr("placeholder",o._("Страна, курорт, отель")).on({click:function(){if(!$(this).val()){$(this).otpautocomplete("search","--")}else{$(this).otpautocomplete("search",$(this).val())}},keyup:function(){o.form.location.selectedSuggest.objectId=0;if(!$(this).val()){$(this).otpautocomplete("search","--")}},blur:function(){$(".ui-autocomplete").removeClass("default-list")}}).appendTo(this.$Wrap);$("<img>").addClass(o.fn.prefix("spinner")).attr("src",o.config.baseUrl+"/images/onsite/spinner.gif").appendTo(this.$Wrap);$("<span>").addClass(o.fn.prefix("autocomplete-toggle")).on("click",function(){if(!self.is_open){self.$.focus().otpautocomplete("search","--")}}).append($("<span>").addClass(o.fn.prefix("autocomplete-toggle_element"))).appendTo(this.$Wrap);this.$title=$("<span>").addClass(o.fn.prefix("block_label")).text(o._("Я хочу в"));return this};this.render=function($el){this.init();o.form.setInput("t",this.$,function($o,q){q.t=$o.val();q.y=o.form.location.selectedSuggest.type;q.i=o.form.location.selectedSuggest.objectId});this.$title.appendTo($el);this.$Wrap.appendTo($el);return this}};o.form.location.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.status=0;this.init=function(){this.$=$("<select>").on("change",function(){jQuery(".fake-point-from").html("<span>Из "+$(this).find("option:selected").data("rel")+"</span>")}).addClass(o.fn.prefix("block_select"));this.$title=$("<span>").addClass(o.fn.prefix("block_label d-el")).text(o._("из"));this.$titleMobile=$("<span>").addClass(o.fn.prefix("block_label m-el")).text(o._("Вылет из"));return this};this.setOptions=function(cities){var curCityId=+self.$.val();self.$.empty();$.each(cities,function(k,v){curCityId=curCityId||o.hash.get("d",0);$("<option></option>").attr("value",v.id).attr("selected",(curCityId==+v.id||(!curCityId&&v.selected))).attr("data-rel",v.rel).text(v.name).appendTo(self.$)});if(!self.$.find(":selected").attr("selected")){self.$.val(1544)}self.$.trigger("change");o.form.transport.view.checkSelected()};this.render=function($el){self.init();o.form.setInput("d",this.$,function($o,q){if($o.val()){q.d=$o.val()}else{q.d=o.hash.get("d",1544)}});self.$title.appendTo($el);self.$titleMobile.appendTo($el);self.$.appendTo($el);return self}};o.form.fromCity.view=new f()})(jQuery,otpMain);(function($,o){o.form.regions.view=new function(){var self=this;this.init=function($el){self.$=$("<select>").css("display","none").appendTo($el);self.refresh()};this.refresh=function(){o.form.regions.loadData(function(regions){self.$.empty();$.each(regions,function(i,item){self.$.append($("<option>").text(item.name).val(item.id).data("dept",item.deptCities).attr("selected",item.IPselected))})})};this.render=function($el){self.init($el);o.form.setInput("f",this.$,function($o,q){q.f=$o.val()})}}})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.init=function(){this.$=$("<select>").addClass(o.fn.prefix("block_select"));this.$title=$("<span>").addClass(o.fn.prefix("block_label d-el")).text("на");this.$titleMobile=$("<span>").addClass(o.fn.prefix("block_label m-el")).text(o._("Длительность"));return this};this.initSelect=function(duration){var curPeriod=self.$.val();self.$.empty();var options={},selected=false;for(var i in o.config.duration){if(o.config.duration.hasOwnProperty(i)){var val=o.config.duration[i].value;if(duration&&!o.fn.in_array(val,duration)){continue}var opt=$("<option>").attr("value",val).text(o.config.duration[i].label);if(curPeriod){if(curPeriod==val){selected=true;opt.attr("selected","selected")}}else{if(val==o.hash.get("l",7)){selected=true;opt.attr("selected","selected")}}options[val]=opt}}if(!selected){if(options[8]){options[8].attr("selected","selected")}else{if(options[6]){options[6].attr("selected","selected")}}}$.each(options,function(k,opt){opt.appendTo(self.$)})};this.setValue=function(val){if(typeof this.$!=="undefined"){this.$.val(val)}};this.render=function($el){this.init();this.initSelect();o.form.setInput("l",this.$);this.$title.appendTo($el);this.$titleMobile.appendTo($el);this.$.appendTo($el);return this}};o.form.duration.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.setValue=function(a){if(!a[0]||typeof this.$==="undefined"){return}this.$.find("input").prop("checked",false).each(function(n,e){var $me=$(e);for(var i in a){if($me.prop("value")==a[i]&&a.hasOwnProperty(i)){$me.prop("checked",true).parent().addClass("selected")}}})};var checkValue=function($el){$el.parent().toggleClass("selected")};this.getValue=function(){var r=[];this.$.find("input:checked").each(function(i,e){r.push($(e).val())});return r};this.init=function(){this.$=$("<span>");for(var i in o.config.category){if(o.config.category.hasOwnProperty(i)){var $item=$("<label>");$("<input>").attr({type:"checkbox",value:o.config.category[i].value}).appendTo($item);$("<span>").addClass(o.fn.prefix("block_label_title")).text(o.config.category[i].label+"*").appendTo($item);$item.prependTo(this.$)}}this.$.on("click","input",function(){checkValue($(this))});return this};this.render=function($el){var r;this.init();this.setValue([1,2,3,4,5]);o.form.setInput("st",this.$,function($o,q){q.st=self.getValue()});this.$.appendTo($("<span>").addClass(o.fn.prefix("extended-block h-category")).appendTo($el));return this}};o.form.category.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.setValue=function(a){if(!a[0]||typeof this.$==="undefined"){return}this.$.find("input").prop("checked",false).each(function(n,e){var $me=$(e);for(var i in a){if($me.prop("value")==a[i]&&a.hasOwnProperty(i)){$me.prop("checked",true).parent().addClass("selected")}}})};this.getValue=function(){var r=[];this.$.find("input:checked").each(function(i,e){r.push($(e).val())});return r};var checkValue=function($el){$el.parent().toggleClass("selected")};this.init=function(){this.$=$("<span>");for(var i in o.config.food){if(o.config.food.hasOwnProperty(i)){var $item=$("<label>");$("<input>").attr({type:"checkbox",value:o.config.food[i].value}).appendTo($item);$("<span>").addClass(o.fn.prefix("block_label_title")).append($("<span>").addClass("abbr").text(o.config.food[i].label)).append($("<span>").addClass("description").text(o.config.food[i].description)).appendTo($item);$item.prependTo(this.$)}}this.$.on("click","input",function(){checkValue($(this))});return this};this.render=function($el){var r;this.init().setValue(["ob","bb","hb","fb","ai","uai"]);o.form.setInput("o",this.$,function($o,q){q.o=self.getValue()});this.$.appendTo($("<span>").addClass("os-extended-block h-food").appendTo($el));return this}};o.form.food.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.setValue=function(a){if(!a[0]){return}this.$.find("input").prop("checked",false).each(function(n,e){var $me=$(e);for(var i in a){if($me.prop("value")==a[i]&&a.hasOwnProperty(i)){$me.prop("checked",true).parent().addClass("selected")}}})};this.toggleDisabled=function(a,flag){if(!a[0]){return}this.$.find("input").each(function(n,e){var $me=$(e);for(var i in a){if($me.prop("value")==a[i]&&a.hasOwnProperty(i)){$me.prop("disabled",flag);flag?$me.parent().removeClass("disabled"):$me.parent().addClass("disabled")}}})};this.checkSelected=function(){this.$.find("input:checkbox").each(function(i,e){if(!$(e).is(":checked")){$(e).parent().removeClass("selected")}})};this.getTransportText=function(transport,flag){if(!transport){transport=o.form.transport.view.getValue().toString()}switch(transport){case"air":if(flag){return o._("Авиаперелет")}return", "+o._("с авиаперелетом");break;case"bus":if(flag){return"Автобус"}return", "+o._("переезд на автобусе включен");break;case"train":if(flag){return o._("Поезд")}return", "+o._("переезд на ж/д включен");break;case"trainbus":if(flag){return o._("Поезд")+" + Автобус"}return", "+o._("переезд на ж/д и автобусе включен");break;case"ship":if(flag){return o._("Паром")}return", "+o._("переезд на пароме включен");break;case"no":if(flag){return o._("Без транспорта")}return", "+o._("без транспорта");break}};this.getValue=function(){var r=[];this.$.find("input:checked").each(function(i,e){r.push($(e).val())});return r};var checkValue=function($el){$el.parent().toggleClass("selected")};this.init=function(){this.$=$("<span>");for(var i in o.config.transport){if(o.config.transport.hasOwnProperty(i)){var input=$("<input>").attr({type:"checkbox",value:o.config.transport[i].value});input.change(function(){if($(this).is(":checked")){if($(this).val()==="no"){self.$.find(":checkbox:not([value='no'])").attr("checked",false).parent().removeClass("selected");if(o.form.fromCity.view.$.find("option[value=0]").length){o.form.fromCity.view.$.val(0)}}else{self.$.find(":checkbox[value='no']").attr("checked",false).parent().removeClass("selected");if(o.form.fromCity.view.$.val()==0){var curVal=o.form.fromCity.view.$.val();o.form.fromCity.view.$.val(1);if(o.form.fromCity.view.$.val()==curVal){o.form.fromCity.view.$.val(o.form.fromCity.view.$.find("option:first").val())}}}}});$("<label>").addClass(o.fn.prefix("service_value")).append(input).append($("<span>").addClass(o.fn.prefix("block_label_title")).text(o.config.transport[i].label)).appendTo(this.$)}}this.$.on("click","input",function(){checkValue($(this))});return this};this.render=function($el){this.init().setValue(["air","bus","train","trainbus","ship"]);o.form.setInput("r",this.$,function($o,q){q.r=self.getValue()});this.$.appendTo($("<span>").addClass(o.fn.prefix("extended-block")).appendTo($el));return this}};o.form.transport.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.setValue=function(a){this.$.find("input").each(function(n,e){var $me=$(e);for(var i in a){if($me.prop("value")==a[i]&&a.hasOwnProperty(i)){$me.prop("checked",true).parent().addClass("selected")}}})};this.getValue=function(){var r=[];this.$.find("input:checked").each(function(i,e){r.push($(e).val())});return r};var checkValue=function($el){$el.parent().toggleClass("selected")};this.init=function(){this.$=$("<span>");self.refresh();return this};this.refresh=function(countryId){o.form.service.getServices(countryId,function(services){if(typeof o.form.view.$service!=="undefined"){if(!countryId||Object.keys(services).length==2){o.form.view.$service.hide()}else{o.form.view.$service.show()}}var key,currentServices=$.extend(self.getValue(),(typeof o.hash.get("e","")==="string"?o.hash.get("e","").split(","):[]));self.$.empty();var $div;var $divWrap;$divWrap=$("<div>").addClass(o.fn.prefix("services-label-wrap")).appendTo(self.$);$.each(services,function(name,items){if(!o.config.serviceLabels[name]){return}$div=$("<div>").addClass(o.fn.prefix("services-label")).html('<div class="my-label-name">'+o.config.serviceLabels[name]+"</div>").appendTo($divWrap);$.each(items,function(key,label){$("<label>").append($("<input>").attr("type","checkbox").attr("checked",currentServices.indexOf(key)!=-1).val(key).on("change",function(){checkValue($(this))})).append($("<span>").text(label)).appendTo($div)})})})};this.render=function($el){this.init();this.setValue(["restaurant","bar"]);o.form.setInput("e",this.$,function($o,q){q.e=self.getValue()});this.$.appendTo($("<span>").addClass(o.fn.prefix("extended-block")).appendTo($el));return this}};o.form.service.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){var self=this;this.$=undefined;var $rangeFrom,$rangeTo,$rangeSlider;this.setValue=function(a){if(typeof a[0]!="number"&&!a[0]&&!a[1]){return}this.slide({eSlider:$rangeSlider,rangeFrom:$rangeFrom,rangeTo:$rangeTo},a)};this.getValue=function(){var a=[$rangeFrom.val(),$rangeTo.val()];var ret=[];if(+a[0]==o.config.hotelRating[0].value){ret[0]=0}else{ret[0]=+a[0]}ret[1]=+a[1];return ret};this.selectData=function(a){this.$.find(".os-rating-values .item").each(function(){$(this).removeClass("selected");if(+$(this).text()>=+a[0]&&+$(this).text()<=+a[1]){$(this).addClass("selected")}})};this.slide=function(o,a){o.eSlider.slider({orientation:"vertical",range:"min",value:+a[0],min:4,max:10,step:1,slide:function(event,ui){o.rangeFrom.val(ui.value);o.rangeTo.val(10);self.selectData([ui.value,10])},stop:function(event,ui){}}).draggable();o.rangeFrom.val(+a[0]);o.rangeTo.val(+a[1]);this.selectData(a)};this.init=function(){this.$=$("<span>").addClass("os-rating-slider");$rangeTo=$("<input>").attr({id:"rangeTo","class":"os-block-field",type:"hidden"}).appendTo(this.$);$rangeFrom=$("<input>").attr({id:"rangeFrom","class":"os-block-field",type:"hidden"}).appendTo(this.$);$rangeSlider=$("<span>").attr("id","range-slider").addClass("range-slider").appendTo(this.$);var $ratingValues=$("<span>").addClass("os-rating-values").appendTo(this.$);for(var i in o.config.hotelRating){if(o.config.hotelRating.hasOwnProperty(i)){$("<span>").addClass("item").text(o.config.hotelRating[i].value).prependTo($ratingValues)}}this.slide({eSlider:$rangeSlider,rangeFrom:$rangeFrom,rangeTo:$rangeTo},[o.config.hotelRating[0].value,o.config.hotelRating[o.config.hotelRating.length-1].value]);return this};this.render=function($el){this.init();o.form.setInput("rf",this.$,function($o,q){q.rt=self.getValue()});this.$.appendTo($("<span>").addClass(o.fn.prefix("extended-block")).appendTo($el));return this}};o.form.hotelRating.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){var self=this;var $priceFrom,$priceTo,$priceSlider;this.$=undefined;this.priceRange=[o.config.priceRange.ua[0],o.config.priceRange.ua[1]];this.defaultpriceRange=o.config.priceRange.ua;this.setValue=function(a){for(var i in a){if(a.hasOwnProperty(i)){if(!a[i]||!(a[i]>=this.defaultpriceRange[0]&&a[i]<=this.defaultpriceRange[1])){a[i]=this.defaultpriceRange[i]}}}a=a.sort(function(a,b){return a-b});this.slide({eSlider:$priceSlider,priceFrom:$priceFrom,priceTo:$priceTo},a);selectValueFromInput()};this.getValue=function(){var a=[];if(self.priceRange[0]==o.form.price.view.defaultpriceRange[0]){a[0]=o.form.price.view.defaultpriceRange[0]}else{a[0]=self.priceRange[0]}if(self.priceRange[1]==o.form.price.view.defaultpriceRange[1]){a[1]=o.form.price.view.defaultpriceRange[1]}else{a[1]=self.priceRange[1]}return a};var selectValueFromInput=function(){var val1,val2;var from=parseInt(self.$.find("#priceFrom").val());var to=parseInt(self.$.find("#priceTo").val());if(!from){from=self.defaultpriceRange[0]}if(!to){to=self.defaultpriceRange[1]}if(from>=to){if(to==0){val2=self.defaultpriceRange[1]}else{val1=to;val2=from}}else{val1=from;val2=to}if(val1<=self.defaultpriceRange[0]){val1=self.defaultpriceRange[0]}if(val2>=self.defaultpriceRange[1]){val2=self.defaultpriceRange[1]}self.$.find("#price-range").slider({values:[val1,val2]});self.$.find("#priceFrom").val(val1);self.$.find("#priceTo").val(val2);self.priceRange=[val1,val2]};this.slide=function(m,a){m.eSlider.slider({orientation:"vertical",range:true,values:a,min:this.defaultpriceRange[0],max:this.defaultpriceRange[1],step:1000,slide:function(event,ui){m.priceFrom.val(ui.values[0]);m.priceTo.val(ui.values[1]);self.priceRange=ui.values}});m.priceFrom.val(a[0]);m.priceTo.val(a[1])};this.init=function(){this.$=$("<span>").addClass("os-price-slider");$priceTo=$("<input>").attr({id:"priceTo","class":"os-block-field"});$priceFrom=$("<input>").attr({id:"priceFrom","class":"os-block-field"});$("<span>").addClass("price-to").html('<span class="text-hint">до</span>').append($priceTo).appendTo(this.$);$("<span>").addClass("price-from").html('<span class="text-hint">'+o._("от")+"</span>").append($priceFrom).appendTo(this.$);$priceSlider=$("<span>").attr("id","price-range").addClass("price-slider").appendTo(this.$);this.slide({eSlider:$priceSlider,priceFrom:$priceFrom,priceTo:$priceTo},self.priceRange);this.$.on("change","#priceFrom, #priceTo",selectValueFromInput);return this};this.render=function($el){this.init();o.form.setInput("pf",this.$,function($o,q){var a=self.getValue();q.pf=a[0];q.pt=a[1]});this.$.appendTo($("<span>").addClass(o.fn.prefix("extended-block")).appendTo($el));return this}};o.form.price.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var $dateFirst,$dateSecond;var self=this;this.getValue=function(){var now=new Date();now.setHours(0,0,0,0);if(now.valueOf()>self.dateFirst.date.valueOf()){self.dateFirst.setValue(now.getTime()+(14*24*60*60*1000));self.dateSecond.setValue(now.getTime()+(21*24*60*60*1000))}return[o.form.datepicker.getTextDate(self.dateFirst.date,{parts:["yyyy","mm","dd"]},"-"),o.form.datepicker.getTextDate(self.dateSecond.date,{parts:["yyyy","mm","dd"]},"-")]};this.setValue=function(a){if(self.dateFirst&&self.dateSecond){self.dateFirst.setValue(a[0]);self.dateSecond.setValue(a[1])}};this.init=function(){this.$=$("<span>");$("<span>").addClass(o.fn.prefix("block_label")).text(o._("Начало тура")).appendTo(this.$);$dateFirst=$("<input>").addClass(o.fn.prefix("block_field")).addClass(o.fn.prefix("datepicker")).attr({readonly:"readonly"});$dateSecond=$("<input>").addClass(o.fn.prefix("block_field")).addClass(o.fn.prefix("datepicker")).attr({readonly:"readonly"});self.dateFirst=$dateFirst.datepicker({format:"D d M",weekStart:1,onRender:function(date){var dates=o.form.datepicker.getDates();if(typeof dates[0]==="string"){minDate=o.form.datepicker.parseISO8601(dates[0])}else{minDate=new Date(dates[0])}if(typeof dates[dates.length-1]==="string"){maxDate=o.form.datepicker.parseISO8601(dates[dates.length-1])}else{maxDate=new Date(dates[dates.length-1])}minDate.setHours(0,0,0,0);maxDate.setHours(0,0,0,0);if(date.valueOf()<minDate.valueOf()||date.valueOf()>maxDate.valueOf()){return"disabled"}if((maxDate.valueOf()-minDate.valueOf())<31000000000){if(!o.fn.in_array(o.tour.formatDate(date),dates)){return"disabled"}}return""}}).on("changeDate",function(ev){var secondDate=new Date(ev.date.getTime()+(14*24*60*60*1000));self.dateSecond.setValue(secondDate);$dateFirst.change();self.dateFirst.hide();$dateSecond.focus();var duration=o.form.datepicker.getDuration(ev.date);o.form.duration.setDuration(duration);if(typeof window.osCallbackDateFrom==="function"){window.osCallbackDateFrom(ev.date)}}).on("click",function(){self.dateFirst.show()}).data("datepicker");self.dateSecond=$dateSecond.datepicker({format:"D d M",weekStart:1,onRender:function(date){var dates=o.form.datepicker.getDates(),minDate=new Date(dates[0]),maxDate=new Date(dates[dates.length-1]),dateTo=new Date(self.dateFirst.date.getTime()+(14*24*60*60*1000));minDate.setHours(0,0,0,0);maxDate.setHours(0,0,0,0);if(date.valueOf()<self.dateFirst.date.valueOf()||date.valueOf()>maxDate.valueOf()||date.valueOf()>dateTo.valueOf()){return"disabled"}if((maxDate.valueOf()-minDate.valueOf())<31000000000){if(!o.fn.in_array(o.tour.formatDate(date),dates)){return"disabled"}}return""}}).on("changeDate",function(ev){self.dateSecond.hide();$dateSecond.change();if(typeof window.osCallbackDateTo==="function"){window.osCallbackDateTo(ev.date)}}).on("click",function(){self.dateSecond.show()}).data("datepicker");var now=new Date();var minDate=new Date(now.getTime()+604800000);self.dateFirst.setValue(o.tour.formatDate(minDate));var maxDate=new Date(now.getTime()+(14*24*60*60*1000));self.dateSecond.setValue(o.tour.formatDate(maxDate));self.dateFirst.hide();self.dateSecond.hide();this.$.append($("<span>").addClass("dates-wrap").append($dateFirst).append('<span class="separator">&ndash;</span>').append($dateSecond));return this};this.render=function($el){this.init();o.form.setInput("c",this.$,function($o,q){q.c=self.getValue()[0];q.v=self.getValue()[1]});this.$.appendTo($el);return this}};o.form.datepicker.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var maxPeople=4;var maxPeopleWChilds=4;var maxChildren=2;var maxChildAge=18;var self=this;var s={people:2,children:[]};this.getStore=function(){return s};var getHtml=function(){return $("<div>").addClass("os-people-picker").append(getPeopleHtml()).append(getChildrenHtml())};var getPeopleHtml=function(){var h=$("<span>").addClass("people");h.append('<span class="os-block_label d-el">'+otpMain._("Нас будет")+"</span>").append(('<span class="os-block_label m-el">'+otpMain._("Взрослых и детей")+"</span>"));var els=$("<select>").addClass("elements os-block_select");for(var i=1;i<=maxPeople;i++){var o=$("<option>").addClass("one").addClass("people-"+i).html(i).attr("value",i);if(i==s.people){o.addClass("active")}els.append(o)}h.append(els);h.append(' <span class="os-block_label d-el">'+otpMain._("взрослых")+",</span>");return h};var getChildrenHtml=function(){var h=$("<span>").addClass("children");var t=$("<select>").addClass("buttons os-block_select");var b=$("<span>").addClass("inputs");var b_child=$("<span>").addClass("inputs-inner").appendTo(b);$("<span>").addClass("os-block_label m-text").text(otpMain._("Возраст детей")).hide().appendTo(b_child);var o=$("<option>").addClass("one children-0").html("0").attr("value",0);t.append(o);for(var i=1;i<=maxChildren;i++){o=$("<option>").addClass("one").addClass("children-"+i).attr("value",i).html(i);t.append(o);var m=$("<span>").addClass("ch"+i).addClass("cnt");if(i>1){m.append('<span class="and os-block_label d-el">'+otpMain._("и")+"</span> ")}var inp=$("<input>").attr("type","text").attr("maxlength","2").attr("num",i-1).attr("size","2").attr("class","os-block_field os-int_input");m.append(inp);m.hide();b_child.append(m)}b_child.append($('<span class="age os-block_label d-el">'+otpMain._("лет")+"</span>").hide());var els=$("<span>").addClass("elements");els.append(t).append(' <span class="os-block_label d-el">'+otpMain._("детей")+"</span>").append(b);h.append(els);return h};var clickPeople=function($el){s.people=$el.val()};var clickChildren=function($el){var num=parseInt($el.val());if(num>0){self.$.find(".children .age").css("display","inline-block");self.$.find(".children .m-text").addClass("m-el")}else{self.$.find(".children .age").css("display","none");self.$.find(".children .m-text").removeClass("m-el")}for(var i=1;i<=maxChildren;i++){if(i<=num){self.$.find(".children .elements .ch"+i).css("display","inline-block")}else{self.$.find(".children .elements .ch"+i).css("display","none").find("input").val("");changeChildren(self.$.find(".children .inputs input"))}}};this.printPeoples=function(st){var apartment={sngl:"1 "+o._("взрослый"),dbl:"2 "+o._("взрослых"),trpl:"3 "+o._("взрослых"),qdrpl:"4 "+o._("взрослых"),sngl1chld:"1 "+o._("взрослый")+", 1 "+o._("ребенок"),sngl2chld:"1 "+o._("взрослый")+", 2 "+o._("детей"),dbl1chld:"2 "+o._("взрослых")+", 1 "+o._("ребенок"),dbl2chld:"2 "+o._("взрослых")+", 2 "+o._("детей"),trpl1chld:"3 "+o._("взрослых")+", 1 "+o._("ребенок")};if(typeof apartment[st]!="undefined"){return apartment[st]}var people,children;if(st){st=st.toString();people=parseInt(st.substr(0,1));children=o.form.people.view.parseChildren(st.substr(1))}people=parseInt(people);if(people>maxPeople){people=maxPeople}var str=people+" "+o._("взрослых");var cnt=0;for(var i in children){if(children[i]>0&&children.hasOwnProperty(i)){cnt++}}if(cnt>maxChildren){cnt=maxChildren}switch(cnt){case 0:break;case 1:str+=", 1 "+o._("ребенок");break;default:str+=", "+cnt+o._("-е детей");break}return str};var setPeople=function(num){if(0<num&&num<=maxPeople&&self.$){s.people=num;self.$.find(".people .elements").val(num)}};var changeChildren=function($el){var selValue;var age=$el.val();var buttons=$el.parentsUntil(".children").find(".buttons");$.each(buttons,function(k,v){selValue=(v instanceof jQuery?v.val():$(v).val())});if(age>maxChildAge){age=maxChildAge;$el.val(age)}s.children[$el.attr("num")]=age;s.children.splice(selValue,s.children.length-selValue+1)};var setChildren=function(v){if(self.$){var c=[];if(typeof v=="string"){c=self.parseChildren(v)}else{if(typeof v=="object"&&v.length>0){if(v.length<=maxChildren){c=v}}}s.children=c;var $el=self.$.find(".children .buttons");$el.val(c.length);if(c.length>0){$el.bind("change",function(){})}for(var i=0;i<c.length;i++){var $el=self.$.find(".children .inputs .ch"+(i+1)+" input");$el.val(c[i]);$el.bind("change",function(){})}}};this.init=function(){this.$=getHtml();this.$.find(".people .elements").change(function(){clickPeople($(this))});this.$.find(".children .elements .buttons").change(function(){clickChildren($(this))});this.$.find(".children .elements .cnt input").change(function(){changeChildren($(this))});return this};this.parseChildren=function(st){var c=[];for(var i=0;i<(st.length/2);i++){if(i>=maxChildren){break}var ct=parseInt(st.substr(i*2,2));if(ct){c.push(Math.abs(ct))}}return c};this.getValue=function(){var c="",n=0;for(var i in s.children){if(s.children.hasOwnProperty(i)){n=Math.abs(parseInt(s.children[i]));if(n.toString().length==1){c+="0"}c+=n.toString()}}return s.people+c};this.setValue=function(st){var str=st.toString();if(str.length<=(1+(maxChildren*2))){var p=parseInt(str.substr(0,1));if(0<p&&p<=maxPeople){var c=this.parseChildren(str.substr(1));setPeople(p);setChildren(str.substr(1))}}};this.render=function($el){this.init();self.setValue(o.config.defaultPeople);o.form.setInput("p",this.$,function($o,q){q.p=self.getValue()});this.$.appendTo($el);return this}};o.form.people.view=new f();$(document).ready(function(){$(".os-int_input").focus(function(){$(this).mask("00")})})})(jQuery,otpMain);(function($,o){o.result.view=new function(){var self=this;var secondInterval;this.scrollToResults=function(){$("html, body").animate({scrollTop:$("."+o.fn.prefix("result-wrap")).offset().top-10},600)};this.$=$("<div></div>").addClass(o.fn.prefix("result-wrap"));this.$spinner=$("<div>").addClass("finding-tours").html(o._("Ищем туры по вашим параметрам")+"...<br>");this.$more=$("<div>").addClass(o.fn.prefix("more-results")).text("Показать больше результатов");this.$noInfo=$("<div>").addClass(o.fn.prefix("empty-results")).text("По вашему запросу туры не найдены. Попробуйте изменить критерии поиска.");this.$noGeo=$("<div>").addClass(o.fn.prefix("empty-results"));this.spinner=function(){o.result.view.$noGeo.text("");if(!$(".os-more-results").hasClass("search-loading")){self.$.append($("<div>").addClass(o.fn.prefix("loading")))}};this.start_search=0;this.result_info={};this.showMessage=function(msg){self.$noInfo.html(msg).show()};this.spinnerHide=function(){$.each(o.result.view.$.find("."+o.fn.prefix("loading")),function(k,v){v instanceof jQuery?v.fadeOut(300,function(){$(this).remove()}):$(v).fadeOut(300,function(){$(this).remove()})});setTimeout(function(){$.each(o.result.view.$.find(".finding-tours"),function(k,v){v instanceof jQuery?v.fadeOut(300,function(){$(this).remove()}):$(v).fadeOut(300,function(){$(this).remove()})})},2000)};this.render=function(e){e=e||o.view.$;if(typeof osContainer!="undefined"){if(typeof osContainer==="string"){osContainer=document.getElementById(osContainer)}if($(osContainer).is("div")){e=osContainer}}this.$.appendTo(e);this.$more.appendTo(e);this.$noInfo.appendTo(this.$);this.$noGeo.appendTo(this.$);this.$spinner.prependTo(this.$)};this.$more.click(function(){o.result.view.$more.css("visibility","hidden");o.result.view.showMessage("");o.tour.view.showMessage("");o.search.query.n=0;o.search.query.g++;o.search.process();return false});this.$result=$("<div>").on("refresh",function(e,data){e.stopPropagation();var that=this;var $item,$hotel,count,is_move;$.each(data.hotels,function(i,hotel){$item=new o.result.hotel(hotel,self);$hotel=self.$result.find("div[data-id="+hotel.i+"]");if($hotel.length){is_move=+$item.view.$.data("minprice")!=+hotel.offers[0].pl?true:false;count=$hotel.data("count");if(is_move||count!=+hotel.offers.length){$item.view.$.trigger("blink");$hotel.replaceWith($item.view.$)}}else{is_move=true;$item.view.$.hide().fadeIn(777).appendTo($(that)).trigger("blink")}$("html,body").trigger("scroll");var minPrice=+$item.view.$.data("minprice");if(is_move&&+$item.view.$.prev().data("minprice")&&minPrice<+$item.view.$.prev().data("minprice")){$item.view.$.hide();$.each(self.$result.find("div.os-result"),function(i,item){if($(item).data("minprice")>=minPrice){$item.view.$.insertBefore($(item));$item.view.$.fadeIn(777);return false}});return false}})}).appendTo(this.$);o.search.bind("process_set",function(d){var hotels=d.hotels,now,last,cur_last;if($.isEmptyObject(o.result.view.result_info)){o.result.view.result_info=d.progress}$.each(hotels,function(n,data){$.each(data,function(i,h){$.each(h.offers,function(i,item){if(typeof o.result.view.result_info[item.oi]!=="object"){o.result.view.result_info[item.oi]={hotels:{},first_response:0,last_response:0,recency:0}}if(typeof o.result.view.result_info[item.oi]["hotels"][h.i]==="undefined"){o.result.view.result_info[item.oi]["hotels"][h.i]=0}o.result.view.result_info[item.oi]["hotels"][h.i]+=1;if(item.last){last=new Date(item.last);cur_last=last;if(o.result.view.result_info[item.oi]["recency"]){cur_last=last}if(cur_last.getTime()<=last.getTime()){o.result.view.result_info[item.oi]["recency"]=last}}now=new Date();if(!o.result.view.result_info[item.oi]["first_response"]){o.result.view.result_info[item.oi]["first_response"]=Math.abs((now.getTime()-o.result.view.start_search.getTime())/1000)}o.result.view.result_info[item.oi]["last_response"]=Math.abs((now.getTime()-o.result.view.start_search.getTime())/1000)})})})});o.search.bind("process_last",function(data){var operators={3019:"AdriaHit",759:"Alf",717:"Anextour",1416:"Coral",3276:"DreamTravel",3021:"GTO",2835:"JoinUP",3066:"Kandagar",1897:"Lyubosvit",856:"Mouzenidis",3:"Oasis",237:"Orbita",269:"Pegas",358:"Siesta",520:"TCC",2:"TEZ",3266:"Tour Leader",2700:"TPG",594:"TUI",3237:"Zeus"};var hotels_count,hotels=[],offers_count,total_offers=0;$.each(o.result.view.result_info,function(i,to){if(typeof to==="boolean"&&to){to={hotels:{},first_response:0,last_response:0,recency:0}}if(to){hotels_count=Object.keys(to.hotels).length;offers_count=Object.values(to.hotels).reduce(function(a,b){return a+b},0);total_offers+=offers_count;hotels=hotels.concat(Object.keys(to.hotels));console.info((typeof operators[i]!=="undefined"?operators[i]:i)+": "+offers_count+" offers, "+hotels_count+" hotels, "+to.recency+" recency, "+to.first_response+"s first result, "+to.last_response+"s last result")}else{console.info((typeof operators[i]!=="undefined"?operators[i]:i)+": Not response")}});hotels_count=hotels.filter(function(v,i,self){return self.indexOf(v)==i});console.info("Totals: "+total_offers+" offers, "+hotels_count.length+" hotels");o.result.view.result_info={}})}})(jQuery,otpMain);(function($,o){o.result.hotelView=function(parent){this.parent=parent;var self=this;o.osLargeImg=typeof osLargeImg!=="undefined"?true:false;this.reset=function(h){};var tourDuration=[o.search.query.l,(o.search.query.l*1)+1,(o.search.query.l*1)+2];var offers={};var transport_index={};var min={};var min_new={};var indexOffers=function(){var i,j,v;for(i in self.parent.object.offers){if(self.parent.object.offers.hasOwnProperty(i)){v=self.parent.object.offers[i];v.pl=parseFloat(v.pl);if(!offers[v.t]){min_new[v.t]={};offers[v.t]={};offers[v.t][v.f]={};offers[v.t][v.f].min=v;offers[v.t][v.f].view=new o.result.offerLine({food:v.f},self)}if(!offers[v.t][v.f]){offers[v.t][v.f]={};offers[v.t][v.f].min=v;offers[v.t][v.f].view=new o.result.offerLine({food:v.f},self)}if(offers[v.t][v.f].min.pl>v.pl){offers[v.t][v.f].min=v}if(!min_new[v.t].pl||min_new[v.t].pl>v.pl){min_new[v.t]=v}if(!min.pl||min.pl>v.pl){min=v}if(!offers[v.t][v.f][v.l]){offers[v.t][v.f][v.l]=v}else{if(offers[v.t][v.f][v.l].pl>v.pl){offers[v.t][v.f][v.l]=v}}}}for(i in offers){if(offers.hasOwnProperty(i)){for(j in offers[i]){if(offers[i].hasOwnProperty(j)){if(!transport_index[i]){transport_index[i]=[]}transport_index[i].push({i:offers[i][j].min.f,p:offers[i][j].min.pl})}}}}};indexOffers();this.$=$("<div></div>").addClass(o.fn.prefix("result"));var $resHead=$("<div>").addClass(o.fn.prefix("result-head")+" os-clearfix");if(this.parent.object.f.length>1){$("<span>").addClass(o.fn.prefix("result_pict")).append($("<a>").attr({"class":o.fn.prefix("result_pict_url"),href:this.parent.getLink(min,"photo")}).append($("<img>").attr({"data-original":(o.osLargeImg)?"https://newimg.otpusk.com/2/400x300/"+this.parent.object.f:"https://newimg.otpusk.com/2/160x120/"+this.parent.object.f,alt:"","class":o.fn.prefix("result_pict_elem")+" lazy"}).lazyload())).append($("<a>").attr({href:this.parent.getLink(min,"photo"),"class":o.fn.prefix("result_allpict_url")}).text(o._("Все фотографии"))).appendTo($resHead)}else{$("<span>").addClass(o.fn.prefix("result_pict")).append($("<a>").attr({"class":o.fn.prefix("result_pict_url"),href:this.parent.getLink(min,"photo")}).append($("<img>").attr({src:o.config.baseUrl+"/images/onsite/default_120.gif",alt:"","class":o.fn.prefix("result_pict_elem")}))).appendTo($resHead)}var $headInfo=$("<span>").addClass(o.fn.prefix("result-head-info"));var $transport=$("<span>").addClass(o.fn.prefix("result_pricetitle"));if(self.parent.object.r!=0){var el=$("<span>").addClass(o.fn.prefix("result_hrating"));if(self.parent.object.v>=5){el.append(o._("Оценка")+' <span class="os-result_hrating_value">'+self.parent.object.r.toString()+"</span> "+o._("из")+" 10").append($("<span>").addClass("os-result_hrating_indicator").append($("<span>").addClass(o.fn.prefix("rating")).addClass("r-"+parseInt(self.parent.object.r.toString()))))}else{el.append('<b class="hotel-rate">?</b><br>')}el.append($("<a>").attr({href:this.parent.getLink(min,"reviews"),"class":"os-result_hrating_link"}).text(self.parent.object.v+" "+o.fn.suffixForNumber(self.parent.object.v,[o._("отзыв"),o._("отзыва"),[o._("отзывов")]]))).appendTo($headInfo)}$("<span>").addClass(o.fn.prefix("result-title")).append($("<a>").attr({"class":o.fn.prefix("result-title_link"),href:this.parent.getLink(min,"tour")}).text(this.parent.object.n+" "+o.fn.printStars(this.parent.object.s))).appendTo($headInfo);$("<span>").addClass(o.fn.prefix("result-geo")).append($("<span>").addClass(o.fn.prefix("result-geo_locale")).append($("<span>").addClass(o.fn.prefix("result-geo_locale_ico"))).append(this.parent.object.t.n+", "+this.parent.object.c.n+" ").append((this.parent.object.g&&this.parent.object.g.a&&this.parent.object.g.o&&this.parent.object.g.a!=="0.00000")?' <a class="'+o.fn.prefix("result-onmap")+'" href="'+this.parent.getLink(min,"map")+'">'+o._("Посмотреть на карте")+"</a>":"")).appendTo($headInfo);$("<span>").addClass(o.fn.prefix("result-description")).append(this.parent.object.a+" ").append($("<a></a>").text(o._("Полное описание отеля →")).attr({href:this.parent.getLink(min,"hotelInfo"),"class":o.fn.prefix("result-description_link")})).append($transport).appendTo($headInfo);$headInfo.appendTo($resHead);$resHead.appendTo(this.$);var t,srt=[];for(t in transport_index){if(!transport_index.hasOwnProperty(t)){continue}srt.push([t,transport_index[t][0].p])}srt.sort(function(a,b){return a[1]-b[1]});var transport,si,k=0;for(si in srt){if(!srt.hasOwnProperty(si)){continue}transport=srt[si][0];if(k){this.$.append("<br>").append($("<span>").addClass("more-hotels").addClass(o.fn.prefix("result_pricetitle")).append($("<span>").addClass(o.fn.prefix("result_tr-ico")).addClass(transport)).append(o.form.people.getPeopleChildren()+o.form.transport.view.getTransportText(transport)))}else{$transport.append($("<span>").addClass(o.fn.prefix("result_tr-ico")).addClass(transport)).append(o.form.people.getPeopleChildren()+o.form.transport.view.getTransportText(transport))}$offers=$("<div>").addClass(o.fn.prefix("hotel-offers"));var $offerHead=$("<div>").addClass("table-row headline").appendTo($offers);$("<div>").addClass("table-head food").text(o._("питание")).appendTo($offerHead);var i,j,v,hideStr=[];for(j in tourDuration){if(tourDuration.hasOwnProperty(j)){$("<div>").addClass("hide-screen table-head").text(tourDuration[j]+" "+o.fn.suffixForNumber(tourDuration[j],["день","дня",o._("дней")])).appendTo($offerHead);hideStr[j]=tourDuration[j]+" "+o.fn.suffixForNumber(tourDuration[j],["день","дня",o._("дней")])}}hideStr=hideStr.join(" / ");$("<div>").addClass("hide-mb table-head").text(hideStr).appendTo($offerHead);var foodsIndex=transport_index[transport];for(i in foodsIndex){if(foodsIndex.hasOwnProperty(i)){foodsIndex.sort(function(a,b){return a.p-b.p});v=offers[transport][foodsIndex[i].i];for(j in tourDuration){if(tourDuration.hasOwnProperty(j)){if(!v[tourDuration[j]]){v[tourDuration[j]]={}}v[tourDuration[j]].view=new o.result.offerCell(v[tourDuration[j]],v.view,this.parent);if(v[tourDuration[j]].i==min_new[transport].i){v[tourDuration[j]].view.$.addClass("selected")}v[tourDuration[j]].view.$.appendTo(v.view.$)}}$offers.append(v.view.$)}}this.$.append($offers).attr("data-id",this.parent.object.i).attr("data-minprice",this.parent.object.offers[0].pl).attr("data-count",this.parent.object.offers.length).on("blink",function(){var that=this;$(this).css("background","rgb(255, 255, 153)");setTimeout(function(){$(that).animate({"background-color":"rgba(255, 255, 153, 0)"},3000)},500)});$("<div>").addClass("more-hotels").append($("<a>").html(o._("Другие варианты в этом отеле")+" &rarr;").attr({href:this.parent.getLink(min),"class":"os-result-tour"})).appendTo(this.$);k+=1}}})(jQuery,otpMain);(function($,o){o.result.offerLine=function(object,parent){this.object=object;this.parent=parent;var self=this;var getFoodDescription=function(){var f=undefined;for(var i in o.config.food){if(o.config.food[i].value==self.object.food&&o.config.food.hasOwnProperty(i)){f=o.config.food[i].description;break}}return f};this.$=$("<div>").addClass(o.fn.prefix("hotel-offer table-row")).append($("<div>").addClass("food table-cell").html('<span class="food-symbol">'+this.object.food+"</span><br>"+getFoodDescription()))}})(jQuery,otpMain);(function($,o){o.result.offerCell=function(object,parent,hotel){this.object=object;this.parent=parent;this.hotel=hotel;var self=this;this.$=$("<div>").addClass("price table-cell");if(object.p){var offerDate=o.form.datepicker.parser(self.object.d,{parts:["yyyy","mm","dd"],separator:"-"});this.$.append($("<a>").addClass(o.fn.prefix("offer-price")).attr({href:this.hotel.getLink(self.object)}).append($("<span>").addClass(o.fn.prefix("offer-price_date")).html(o.form.datepicker.getTextDate(offerDate,{parts:["D","d","M"]}," "))).append($("<span>").addClass(o.fn.prefix("offer-price_value")).html(o.fn.priceEcho(object.pl,"uah"))).append($("<span>").addClass(o.fn.prefix("offer-price_value_fcurrency")).html(o.fn.priceEcho(object.p,object.u))).append($("<span>").attr({"class":o.fn.prefix("offer-price_link")}).text(o._("выбрать")))).mouseenter(function(){self.$.parent().parent().find(".price.selected").removeClass("selected");self.$.addClass("selected")})}else{this.$.append($("<span>").addClass(o.fn.prefix("offer-noprice")).html("&mdash;"))}this.reset=function(o){}}})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;this.$backLink=undefined;var self=this;o.hash.parse();this.pages=["form","tour","hotelInfo","photo","map","reviews"];this.texts={tour:"Тур",hotelInfo:o._("Описание"),photo:o._("Фотографии"),map:o._("Карта"),reviews:o._("Отзывы")};this.links={};this.getPageLink=function(page){if(o.fn.in_array(page,this.pages)){var hash=o.hash.get();hash.page=page;return window.location.protocol+"//"+window.location.hostname+window.location.pathname+window.location.search+"#"+o.hash.compile(hash,true)}return""};this.updateLinks=function(){var i;for(i in this.pages){if(this.texts[this.pages[i]]&&this.pages.hasOwnProperty(i)){if(this.links.hasOwnProperty(this.pages[i])){this.links[this.pages[i]].find("a").attr("href",this.getPageLink(this.pages[i]))}}}};this.init=function(tab,h){var urlBack=o.hash.get("referer",self.getPageLink("form"));this.$=$("<div>").addClass(o.fn.prefix("tour-head-wrap"));this.$backLink=$("<a>").addClass(o.fn.prefix("back_link")).html("&larr; "+o._("Вернуться к просмотру результатов")).attr("href",urlBack).appendTo(self.$).click(function(){window.location=urlBack});var $ul=$("<ul>").addClass(o.fn.prefix("tour-menu"));var i;for(i in this.pages){if(this.pages.hasOwnProperty(i)){var p=this.pages[i];switch(p){case"photo":if(o.fn.isEmpty(h.f)){continue}break;case"map":if(!h.g||!h.g.a||!h.g.o||h.g.a==="0.00000"){continue}break;case"reviews":if(!h.r){continue}break}if(this.texts[p]){this.links[p]=$("<li>").addClass(p+" item").append($("<a>").data("page",p).attr({href:this.getPageLink(p),"class":"item_link"}).click(function(){var page=$(this).data("page");o.hash.add("page",page,true);runApplication(page);return false}).text(this.texts[p]));this.links[p].appendTo($ul)}}}$ul.appendTo(this.$);this.$.find("."+tab).addClass("active");return this.$}};o.tour.menu=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;o.osLargeImg=typeof osLargeImg!=="undefined"?true:false;this.init=function(h,isPhoto,isReviews){if(isPhoto==undefined){isPhoto=true}if(isReviews==undefined){isReviews=true}this.$=$("<div>").addClass(o.fn.prefix("tour-head"));if(h.f.length&&isPhoto){$("<span>").addClass(o.fn.prefix("tour_pict")).append($("<img>").attr({src:(o.osLargeImg)?"https://newimg.otpusk.com/2/400x300/"+h.f[0]:"https://newimg.otpusk.com/2/160x120/"+h.f[0],width:(o.osLargeImg)?"auto":"120",height:(o.osLargeImg)?"auto":"90","data-test":"123"})).appendTo(this.$)}var $headInfo=$("<span>").addClass(o.fn.prefix("tour-head-info"));if(!h.f.length||!isPhoto){$headInfo.addClass("no-photo")}if(h.r&&isReviews){var el=$("<span>").addClass(o.fn.prefix("tour_hrating"));if(h.v>=5){el.append(o._("Оценка")+' <span class="os-tour_hrating_value">'+h.r+"</span> "+o._("из")+" 10").append($("<span>").addClass(o.fn.prefix("tour_hrating_indicator")).append($("<span>").addClass(o.fn.prefix("rating")).addClass("r-"+parseInt(h.r))))}else{el.append('<b class="hotel-rate">?</b><br>')}el.append($("<a>").attr({href:o.tour.menu.getPageLink("reviews"),"class":o.fn.prefix("tour_hrating_link")}).text(h.v+" "+o.fn.suffixForNumber(h.v,[o._("отзыв"),o._("отзыва"),o._("отзывов")]))).appendTo($headInfo)}$("<h1>").addClass(o.fn.prefix("tour-title")).text(h.n).appendTo($headInfo);$("<span>").addClass(o.fn.prefix("tour-geo")).append($("<span>").addClass(o.fn.prefix("tour-geo_locale")).append($("<span>").addClass(o.fn.prefix("tour-geo_locale_ico"))).append(h.t.n+", "+h.c.n)).appendTo($headInfo);$("<span>").addClass(o.fn.prefix("tour-description")).append(h.o.dc).appendTo($headInfo);$headInfo.appendTo(this.$);$(window).on("load",function(){self.scrollPageToTop()});return this.$};this.scrollPageToTop=function(){};this.checkError=function(d,notice){if(d.error){if(d.message=="Old key"){location.reload()}else{console.log(d.message);if(d.message.indexOf("No valid hash")>-1){$.ajax({type:"GET",url:"https://export.otpusk.com/api/session?access_token="+osApiId,dataType:"jsonp",timeout:25000,success:function(resp){console.log("got new apiKey");otpMain.apiKey=resp.apiKey;o.form.location.setStore("--",undefined)}})}if(!notice){}}}};this.errorPage=function(code){switch(code){default:o.view.$.html($("<div>").addClass(o.fn.prefix("form-wrap desktop")).html('<p class="nonactive_big">'+o._("Модуль поиска туров отключен")+'.</p> <p class="nonactive_big">'+o._("Найти туры всегда можно на ")+'<a href="https://www.otpusk.com/">www.otpusk.com</a>.</p> <p class="nonactive_sm"> '+o._("Для восстановления работы модуля обратитесь в ")+'<a href="http://help.otpusk.com/">'+o._("поддержку")+"</a>.</p>"));break}throw {name:"Error",message:"Something went badly wrong"}}};o.tour.head=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;this.init=function(){this.$=$("<div>").addClass(o.fn.prefix("tour-price"));this.$.price=$("<span>").addClass(o.fn.prefix("tour-price_value"));this.$.info=$("<span>").addClass("st-i");this.$.button=$("<a>").addClass(o.fn.prefix("tour_buy")).text(o._("Детали тура")).attr("href",o.tour.menu.getPageLink("tour"));this.$.code=$("<span>").addClass(o.fn.prefix("tour_code"));this.$.append(this.$.info);this.$.append(this.$.price);this.$.append(this.$.button);this.$.append(this.$.code);return this.$}};o.tour.price=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var $head=undefined;var self=this;this.hotel=undefined;this.init=function(h){self.h=h;this.$=$("<div></div>").addClass(o.fn.prefix("tour-wrap"));o.tour.menu.init("tour",h).appendTo(this.$);var $wrap=$("<div>").addClass(o.fn.prefix("tour")).appendTo(this.$);var $tourDescription=$("<div>").addClass(o.fn.prefix("tour-description"));$head=o.tour.head.init(h);$head.appendTo($tourDescription);this.$.leftPart=$("<div>").addClass(o.fn.prefix("tour-geninfo"));this.renderAlert=function(){if(o.fn.isEmpty(o.tour.offers)){$("<p>").addClass(o.fn.prefix("tour-no-actual")).html(o._("На указанные даты нет туров в этот отель")+".<br>"+o._("Выберите другие даты в таблице внизу.")).prependTo(this.$.leftPart)}else{if(!o.tour.offer){$("<p>").addClass(o.fn.prefix("tour-no-actual")).html(o._("Указанный тур уже недоступен")+".<br>"+o._("Выберите другой тур в таблице внизу.")).prependTo(this.$.leftPart)}}};this.$.people=$("<span>").addClass(o.fn.prefix("tour-info_people"));this.$.price=$("<span>").addClass(o.fn.prefix("tour-price_value"));this.$.code=$("<span>").addClass(o.fn.prefix("tour_code"));$("<div>").addClass(o.fn.prefix("tour-info-block")).append($("<span>").addClass(o.fn.prefix("tour-info-block_title")).text(o._("Туристы"))).append($("<div>").addClass(o.fn.prefix("tour-info-block_inner")).append($("<span>").addClass(o.fn.prefix("tour-info_ico people"))).append(this.$.people)).appendTo(this.$.leftPart);var $rightPart=$("<div>").addClass(o.fn.prefix("tour-price"));this.renderPrice=function(){if(o.tour.offer){$("<span>").addClass("st-i").text(o._("Итого:")).appendTo($rightPart);$rightPart.append(this.$.price);$("<span>").addClass(o.fn.prefix("tour_buy")).text(o._("Заказать тур")).on("click",function(){$(".os-tour_buy").hide();$(".os-tour-form-buy").show();$(".os-tour-price").animate({"padding-top":"30px"},400);if(typeof ga==="function"&&self.h){ga("send","event","Отпуск.НаСайт Поиск","Открыта форма заказа",self.h.t.n+"+"+self.h.c.n+"+"+self.h.n+"+"+o.tour.offer.pl+" грн.")}}).appendTo($rightPart);if(o.apiToken&&o.apiToken.hasOwnProperty("access_token")&&o.apiToken.access_token==="29a1d-a3e3b-6e2fd-39b39-cefcb"){$rightPart.find(".os-tour_buy").text(o._("Заказать онлайн"));$("<span>").addClass(o.fn.prefix("tour_buy")).text(o._("Выбрать турагентство")).click(function(){if(typeof otpMainOrder!=="undefined"){otpMainOrder.showForm(this,"2716a-a6aa2-8ce60-439c2-641a5",{open:function($order){document.dispatchEvent(new CustomEvent("os.widget.order.open:tourstickets",{detail:{form:$order.get(0),offer:o.tour.offer,hotel:o.tour.hotel}}))}})}}).appendTo($rightPart)}$rightPart.append(self.$.code);var $tourBuy=$("<div>").addClass(o.fn.prefix("tour-form-buy")).addClass("os-clearfix").appendTo($rightPart);$("<h5>").addClass("title").text(o._("Как с вами связаться?")).appendTo($tourBuy);var $tourForm=$("<form></form>");$("<label>").append($("<input>").attr({type:"hidden",name:"offerId",value:o.tour.offer.i})).append($("<span>").text("По телефону").addClass(o.fn.prefix("tour-form-buy_label"))).append($phoneField=$("<input>").attr({type:"text",name:"phone","class":"os-form-phone os-block_field"})).appendTo($tourForm);$("<label>").append($("<span>").text(o._("По электронной почте")).addClass(o.fn.prefix("tour-form-buy_label"))).append($emailField=$("<input>").attr({type:"email",name:"email","class":"os-form-mail os-block_field"})).appendTo($tourForm);$("<label>").append($("<span>").text(o._("Ваше имя")).addClass(o.fn.prefix("tour-form-buy_label"))).append($("<input>").attr({type:"text",name:"name","class":"os-form-name os-block_field",maxlength:50})).appendTo($tourForm);$("<label>").append($("<span>").text(o._("Комментарии:")).addClass(o.fn.prefix("tour-form-buy_label"))).append($("<textarea>").attr({name:"comment","class":"os-form-comment os-block_field",maxlength:500})).append($("<input>").attr({type:"hidden",name:"people"}).val(o.hash.get("p",""))).appendTo($tourForm);var $offices=$("<p></p>");var cities=[],$cities=$("<select>").append($("<option>").text(o._("Выберите город")).val(""));$.each(h.ag.o,function(i,item){if(cities.indexOf(item.city)==-1){cities.push(item.city);$cities.append($("<option>").text(item.city).val(item.city.replace(" ","_")))}});if(h.ag.o.length>5&&cities.length>1){$cities.on("change",function(){$offices.find("label").hide();$offices.find(".offices-"+$(this).val()).show()}).appendTo($offices);setTimeout(function(){$cities.trigger("change")},100)}$.each(h.ag.o,function(i,office){var inp=$("<input>").attr({type:"radio",name:"offices",value:office.id});if(h.ag.o.length<2){inp.attr("checked",true).addClass(o.fn.prefix("hidden-checkbox"))}$offices.append($("<label></label>").addClass("offices-"+office.city.replace(" ","_")).append(inp).append('<span class ="'+o.fn.prefix("office-adr")+'">'+office.city+", "+office.address.replace(/\n/g,"<br>")+"</span>"))});$("<label></label>").addClass(o.fn.prefix("offices-list")).append($("<span></span>").text(o._("Отправить заявку в офис:")).addClass(o.fn.prefix("tour-form-buy_label"))).append($offices).appendTo($tourForm);$("<div>").addClass("form-submit").append($("<button>").attr({type:"submit","class":"form-submit_button"}).on("click",function(){$orderError.text("");if(!$emailField.val()&&!$phoneField.val()){$orderError.text(o._("Укажите ваш телефон или е-мейл"));return false}if($phoneField.val().length<7){$orderError.text(o._("Укажите телефон"));return false}if($emailField.val()&&$emailField.val().length<6){$orderError.text(o._("Неверно указан е-мейл"));return false}if($offices.find("input:checked").length<1){$orderError.text(o._("Выберите офис для отправки заказа"));return false}o.tour.sendForm($tourForm.serialize(),function(d){if(d.save==true){var txt="<h4>"+o._("Спасибо за ваш заказ")+"!</h4><p>"+o._("В ближайшее время с вами свяжется один из наших менеджеров, чтобы подтвердить ваше бронирование и уточнить детали.")+"</p><p>"+o._("Вы можете позвонить нам в любой момент")+":</p>";$offices.find("input:checked").map(function(){txt+="<p>"+$(this).parent().text().replace(/\n/g,"<br>")+"</p>"});$tourBuy.html(txt).append($("<span>").addClass("form-close").html("&times;").on("click",function(){$rightPart.find("."+o.fn.prefix("tour_buy")).css("display","inline-block");$(".os-tour-form-buy").hide()}));if(typeof ga==="function"&&self.h){ga("send","event","Отпуск.НаСайт Поиск","Отправлена форма заказа",self.h.t.n+"+"+self.h.c.n+"+"+self.h.n+"+"+o.tour.offer.pl+" грн.")}}else{$orderError.text(d.message)}});return false}).text(o._("Отправить"))).appendTo($tourForm);$orderError=$("<span></span>").attr({style:"color:red"}).appendTo($tourForm);$tourForm.appendTo($tourBuy);$("<span>").addClass("form-close").html("&times;").on("click",function(){$rightPart.find("."+o.fn.prefix("tour_buy")).css("display","inline-block");$(".os-tour-form-buy").hide()}).appendTo($tourBuy)}if(typeof ga==="function"){ga("send","event","Отпуск.НаСайт Поиск","Открыта страница тура",self.h.t.n+"+"+self.h.c.n+"+"+self.h.n+"+"+o.tour.offer.pl+" грн.")}};$("<div>").addClass("os-clearfix").append($rightPart).append(this.$.leftPart).appendTo($tourDescription);$tourDescription.appendTo($wrap)};this.showMessage=function(msg){if(typeof self.$!=="undefined"&&typeof self.$.dateTable!=="undefined"){self.$.dateTable.parent().find("."+o.fn.prefix("spinner-container")).html(msg).show()}};this.initOffer=function(d,m,c){self.$.dateTable=$("<table>").addClass(o.fn.prefix("tour-info_date_price"));self.$.dateTable.text("");if(o.tour.offer&&o.tour.offer.d){var fdate=o.tour.offer.d.replace(/-/g,"/");var dateFrom=new Date(fdate);var dateTo=new Date(fdate);dateTo.setDate(dateTo.getDate()+o.tour.offer.l);var days=o.tour.offer.l;var nights=days-1;dateTo.setDate(dateTo.getDate()-1)}var from=[],to=[];if(o.tour.offer){if(false&&typeof o.tour.to!=="undefined"&&typeof o.tour.to.from!=="undefined"){from=[o.tour.offer.to.from[0].portFr,o.tour.offer.to.from[0].portTo]}else{from=[o.tour.getFromCity(c,o.hash.get("d",(o.tour.offer.c||1544))),o.tour.hotel.country.n]}if(false&&typeof o.tour.offer.to!=="undefined"&&typeof o.tour.offer.to.to!=="undefined"){to=[o.tour.offer.to.to[0].portFr,o.tour.offer.to.to[0].portTo]}else{to=[o.tour.hotel.country.n,o.tour.getFromCity(c,o.hash.get("d",(o.tour.offer.c||1544)))]}}var $datesWrap=$("<span>").addClass(o.fn.prefix("tour-info-dates-wrap")).append($("<span>").addClass(o.fn.prefix("tour-info-dates-value")).append($("<span>").addClass(o.fn.prefix("block")).append($("<span>").addClass(o.fn.prefix("tour-info-dates_ico_from")).addClass(o.tour.offer?o.tour.offer.t:"air")).append($("<span>").addClass(o.fn.prefix("tour-info-dates-from")).append($("<span>").addClass(o.fn.prefix("tour-info-dates-from_value")).html((o.tour.offer)?(o.form.datepicker.getTextDate(dateFrom,{parts:["d","M"]}," ")+", "+o.form.datepicker.day[dateFrom.getDay()]):"&mdash;")).append($("<span>").addClass(o.fn.prefix("tour-info-dates-from_info")).html((from[0]?(from[0]+" &mdash; "):"")+from[1])))).append($("<span>").addClass(o.fn.prefix("tour-info-dates_ico_to")).addClass(o.tour.offer?o.tour.offer.t:"air")).append($("<span>").addClass(o.fn.prefix("tour-info-dates-to")).append($("<span>").addClass(o.fn.prefix("tour-info-dates-to_value")).html((o.tour.offer)?(o.form.datepicker.getTextDate(dateTo,{parts:["d","M"]}," ")+", "+o.form.datepicker.day[dateTo.getDay()]):"&mdash;")).append($("<span>").addClass(o.fn.prefix("tour-info-dates-to_info")).html(to[0]+(to[1]?(" &mdash; "+to[1]):""))))).append($("<span>").addClass(o.fn.prefix("tour-info-dates_brace"))).append($("<span>").addClass(o.fn.prefix("tour-info-dates_total")).html((o.tour.offer)?(nights+" "+o.fn.suffixForNumber(nights,[o._("ночь"),o._("ночи"),"ночей"])+" / "+days+" "+o.fn.suffixForNumber(days,["день",o._("дня"),o._("дней")])+". "+o.form.transport.view.getTransportText(o.tour.offer.t,true)):"&mdash;"));$("<div>").addClass(o.fn.prefix("tour-info-block clickable")).on("click",function(e){if($(".os-tour-info-block_inner.block_yellow.os-loading").length){$(".os-tour-info-block_inner.block_yellow.os-loading").fadeOut(50).fadeIn(50);return false}if([o.fn.prefix("tour-info_date_arrow_t"),o.fn.prefix("tour-info_date_arrow_b"),o.fn.prefix("tour-info_date_arrow_l"),o.fn.prefix("tour-info_date_arrow_r")].indexOf(e.target.className)>-1){var $spinner=$("<div>").addClass(o.fn.prefix("spinner-container"));self.$.dateTable.parent().find("."+o.fn.prefix("spinner-container")).remove();self.$.dateTable.parent().append($spinner);o.form.$spinnersWrap=$spinner;o.form.$spinnersWrap.find("."+o.fn.prefix("spinner-logos-wrap")).remove()}if(e.target.className!=(o.fn.prefix("tour-info-dates_close"))&&self.$.dateTable.css("display")!="table"){$(this).removeClass("clickable").find("."+o.fn.prefix("tour-info-block_inner")).addClass("block_yellow");$("."+o.fn.prefix("tour-info-dates_change")).hide();$("."+o.fn.prefix("tour-info-dates-wrap")).hide();$("."+o.fn.prefix("tour-info_date_price")).css("display","table");$("."+o.fn.prefix("tour-info-dates_close")).show();var $spinner=$("<div>").addClass(o.fn.prefix("spinner-container"));self.$.dateTable.parent().find("."+o.fn.prefix("spinner-container")).remove();self.$.dateTable.parent().append($spinner);o.form.$spinnersWrap=$spinner;o.form.$spinnersWrap.find("."+o.fn.prefix("spinner-logos-wrap")).remove();self.$.dateTable.addClass(o.fn.prefix("loading"));o.tour.getOffers(function(d,m){self.$.dateTable.removeClass(o.fn.prefix("loading"));self.setDates(d,m);self.setOffers(o.tour.offer,o.tour.rooms,o.tour.foods)},true,null,null,null,(o.tour.offer?[o.tour.offer.t]:null))}}).append($("<span>").addClass(o.fn.prefix("tour-info-block_title")).text(o._("Дата отправления и длительность тура"))).append($("<div>").addClass(o.fn.prefix("tour-info-block_inner")).append($("<span>").addClass(o.fn.prefix("tour-info_ico dates"))).append($("<span>").addClass(o.fn.prefix("tour-info-dates_change")).text(o._("изменить"))).append($("<span>").addClass(o.fn.prefix("tour-info-dates_close")).html("&times; ").on("click",function(){$(this).hide().parent().removeClass("block_yellow").parent().addClass("clickable");$("."+o.fn.prefix("tour-info-dates-wrap")).show();$("."+o.fn.prefix("tour-info_date_price")).hide();$("."+o.fn.prefix("tour-info-dates_change")).show()})).append($datesWrap).append(self.$.dateTable)).appendTo(this.$.leftPart);self.$.room=$("<span>").addClass(o.fn.prefix("tour-info-food_value"));self.$.food=$("<span>").addClass(o.fn.prefix("tour-info-food_value"));if(o.tour.offer){var $foodTable=$("<table>").addClass(o.fn.prefix("tour-info_food"));$("<thead>").attr({id:o.fn.prefix("tourFoods")}).appendTo($foodTable);$("<tbody>").attr({id:o.fn.prefix("tourOffers")}).appendTo($foodTable);$("<div>").addClass(o.fn.prefix("tour-info-block clickable")).on("click",function(e){if($(".os-tour-info_date_price.os-loading").length){$(".os-tour-info_date_price.os-loading").fadeOut(50).fadeIn(50);return false}if(e.target.className!=(o.fn.prefix("tour-info-food_close"))&&$("."+o.fn.prefix("os-tour-info_food")).css("display")!="table"){if(!$(this).find(".block_yellow").length){var that=$(this);$(this).find("."+o.fn.prefix("tour-info-block_inner")).addClass("block_yellow os-loading");$(this).removeClass("clickable");$("."+o.fn.prefix("tour-info-food_change")).hide();$("."+o.fn.prefix("tour-info-food-wrap")).hide();o.tour.getOffers(function(){that.find("."+o.fn.prefix("tour-info-block_inner")).removeClass("os-loading");$("."+o.fn.prefix("tour-info_food")).css("display","table");$("."+o.fn.prefix("tour-info-food_close")).show();self.setOffers(o.tour.offer,o.tour.rooms,o.tour.foods)},false,null,(o.tour.offer?o.tour.offer.l:null),null)}}}).append($("<span>").addClass(o.fn.prefix("tour-info-block_title")).text(o._("Тип номера и питание"))).append($("<div>").addClass(o.fn.prefix("tour-info-block_inner")).append($("<span>").addClass(o.fn.prefix("tour-info_ico food"))).append($("<span>").addClass(o.fn.prefix("tour-info-food_change")).text(o._("изменить"))).append($("<span>").addClass(o.fn.prefix("tour-info-food_close")).html("&times;").on("click",function(){$(this).hide().parent().removeClass("block_yellow").parent().addClass("clickable");$(".os-tour-info-food-wrap").show();$(".os-tour-info_food").hide();$("."+o.fn.prefix("tour-info-food_change")).show()})).append($("<div>").addClass(o.fn.prefix("tour-info-food-wrap")).append($("<span>").addClass(o.fn.prefix("tour-info-food_item")).text(o._("Номер")+": ").append(self.$.room)).append($("<span>").addClass(o.fn.prefix("tour-info-food_item")).text(o._("Питание")+": ").append(self.$.food))).append($foodTable)).appendTo(this.$.leftPart);self.$.transfer=$("<li></li>").addClass("item").html('<span class="marker"></span> Трансфер');self.$.insurance=$("<li></li>").addClass("item").html('<span class="marker"></span> Страховка');self.$.visa=$("<li></li>").addClass("item").html('<span class="marker"></span> '+o._("Виза"));$("<div>").addClass(o.fn.prefix("tour-info-block")).append($("<span>").addClass(o.fn.prefix("tour-info-block_title")).text(o._("Услуги"))).append($("<div>").addClass(o.fn.prefix("tour-info-block_inner")).append($("<span>").addClass(o.fn.prefix("tour-info_ico add"))).append($("<ul></ul>").addClass(o.fn.prefix("tour-info_add")).append(self.$.transfer).append(self.$.insurance).append(self.$.visa))).appendTo(this.$.leftPart)}if(!o.hash.get("d")&&o.tour.offer&&o.tour.offer.c){o.form.fromCity.view.$.val(o.tour.offer.c).trigger("change")}};this.setDates=function(d,m){self.$.dateTable.html("");o.hash.parse();var tr=$("<tr>").append($("<td>").attr({width:"20%","class":o.fn.prefix("date_pr_control")}).append($("<div>").addClass(o.fn.prefix("os-clearfix")).append($("<div>").addClass(o.fn.prefix("date_pr_control-wrap")).append($("<span>").addClass(o.fn.prefix("tour-info_date_arrow left")).on("click",function(){if(d[0]==1){return false}var l=Math.round(o.tour.matrixLen.x/2);var minLength=d[0]-l;if(minLength<l){minLength=l}self.$.dateTable.addClass(o.fn.prefix("loading"));o.tour.getOffers(function(d,m){self.$.dateTable.removeClass(o.fn.prefix("loading"));self.setDates(d,m)},true,m[Math.floor(o.tour.matrixLen.y/2)],minLength,null,(o.tour.offer?[o.tour.offer.t]:null))}).append($("<span>").addClass(o.fn.prefix("tour-info_date_arrow_l"))))).append($("<span>").addClass(o.fn.prefix("tour-info_date_arrow")).on("click",function(){var curDate=new Date();var minDate=new Date(m[0].replace(/-/g,"/"));var nextDate=new Date(m[Math.floor(o.tour.matrixLen.y/2)].replace(/-/g,"/"));curDate.setDate(curDate.getDate()+1);curDate.setHours(0,0,0,0);minDate.setHours(0,0,0,0);nextDate.setHours(0,0,0,0);if(minDate.valueOf()<=curDate.valueOf()){return false}curDate.setDate(curDate.getDate()+Math.floor(o.tour.matrixLen.y/2));nextDate.setDate(nextDate.getDate()-o.tour.matrixLen.y);if(nextDate.valueOf()<curDate.valueOf()){nextDate=new Date(curDate.getTime())}self.$.dateTable.addClass(o.fn.prefix("loading"));o.tour.getOffers(function(d,m){self.$.dateTable.removeClass(o.fn.prefix("loading"));self.setDates(d,m)},true,o.tour.formatDate(nextDate),d[Math.floor(o.tour.matrixLen.x/2)],null,(o.tour.offer?[o.tour.offer.t]:null))}).append($("<span>").addClass(o.fn.prefix("tour-info_date_arrow_t"))))));for(i in d){if(d.hasOwnProperty(i)){tr.append($("<td>").addClass(o.fn.prefix("date_pr_head")).append($("<div>").addClass(o.fn.prefix("date_pr_head-inner")).text("на "+d[i]+" дн.")))}}tr.append($("<td>").addClass(o.fn.prefix("date_pr_control")).append($("<div>").addClass(o.fn.prefix("date_pr_control-wrap")).append($("<span>").addClass(o.fn.prefix("tour-info_date_arrow right")).on("click",function(){var cl=Math.floor(o.tour.matrixLen.x/2);self.$.dateTable.addClass(o.fn.prefix("loading"));o.tour.getOffers(function(d,m){self.$.dateTable.removeClass(o.fn.prefix("loading"));self.setDates(d,m)},true,m[Math.floor(o.tour.matrixLen.y/2)],d[cl]+o.tour.matrixLen.x,null,(o.tour.offer?[o.tour.offer.t]:null))}).append($("<span>").addClass(o.fn.prefix("tour-info_date_arrow_r"))))));$("<thead>").append(tr).appendTo(self.$.dateTable);var tb=$("<tbody>");var i,j;var linkClass="date_link";for(i in m){if(m.hasOwnProperty(i)){var date=new Date(m[i].replace(/-/g,"/"));var tr=$("<tr>").append($("<td>").addClass("date_value").text(o.fn.echoDay(date)));for(j in d){if(d.hasOwnProperty(j)){var key=m[i]+d[j];if(key in o.tour.offers){var offer=o.tour.offers[key][0];if(o.tour.offer&&(o.tour.offer.d+o.tour.offer.l)===key){linkClass="date_link selected"}tr.append($("<td>").append($("<a>").attr({href:offer.link,"class":linkClass}).html('<span class="uah">'+o.fn.priceEcho(offer.pl,"uah")+'</span> <span class="usd">'+o.fn.priceEcho(offer.p,offer.u)+"</span>").on("click",function(){$("."+o.fn.prefix("tour-info_date_price")).find(".selected").removeClass("selected");$(this).addClass("selected");o.tour.offerChanged=true})));linkClass="date_link"}else{tr.append($("<td>").html("&mdash;"))}}}tr.append($("<td>").addClass(o.fn.prefix("date_pr_control")));tb.append(tr)}}$("<tr>").append($("<td>").attr({"class":o.fn.prefix("date_pr_control")}).append($("<span>").addClass(o.fn.prefix("tour-info_date_arrow bottom")).on("click",function(){self.$.dateTable.addClass(o.fn.prefix("loading"));var nextDate=new Date(m[Math.floor(o.tour.matrixLen.y/2)].replace(/-/g,"/"));nextDate.setHours(0,0,0,0);nextDate.setDate(nextDate.getDate()+o.tour.matrixLen.y);o.tour.getOffers(function(d,m){self.$.dateTable.removeClass(o.fn.prefix("loading"));self.setDates(d,m)},true,o.tour.formatDate(nextDate),d[Math.floor(o.tour.matrixLen.x/2)],null,(o.tour.offer?[o.tour.offer.t]:null))}).append($("<span>").addClass(o.fn.prefix("tour-info_date_arrow_b"))))).append($("<td>").attr({colspan:o.tour.matrixLen.x+1,"class":o.fn.prefix("date_pr_control")})).appendTo(tb);tb.appendTo(self.$.dateTable)};this.setOffers=function(offer,rooms,foods){var offerNative=offer;var linkClass="date_link";if(offer&&!o.tour.offer){location.reload()}var i,j,offersFd=$("#"+o.fn.prefix("tourFoods")),offersEl=$("#"+o.fn.prefix("tourOffers"));offersEl.html("");offersFd.html("");var tr=$("<tr>").append($("<td>").addClass(o.fn.prefix("food_pr_head")).append($("<span>").addClass("f_value").text(o._("Тип номера"))));for(j in foods){if(foods.hasOwnProperty(j)){tr.append($("<td>").addClass(o.fn.prefix("food_pr_head")).html(o.tour.getValue(o.config.food,foods[j])))}}tr.appendTo(offersFd);$.each(rooms,function(i,room){var description=self.setRoom(o.tour.hotel.rooms[i]);var span=$("<span>");if(description){span.addClass(o.fn.prefix("food-room_link")).text(o._("описание номера")).on("click",function(){if($(this).parent().find("."+o.fn.prefix("food-room-block")).css("display")=="block"){o.popupTrigger=false}else{$("body").find(".popup").hide();o.popupTrigger=true;$(this).parent().find("."+o.fn.prefix("food-room-block")).show()}})}var td=$("<td>").attr("width","20%").append($("<span>").addClass(o.fn.prefix("food-room_value")).html(room.label)).append($("<div>").addClass(o.fn.prefix("food-room")).append(span).append(description));var tr=$("<tr>").append(td);for(j in foods){if(foods.hasOwnProperty(j)){if(foods[j] in room){var offer=room[foods[j]];if(typeof offerNative!="undefined"&&offer.i==offerNative.i){linkClass="date_link selected"}tr.append($("<td>").append($("<a>").attr({href:offer.link,"class":linkClass}).html('<span class="uah">'+o.fn.priceEcho(offer.pl,"uah")+'</span> <span class="usd">'+o.fn.priceEcho(offer.p,offer.u)+"</span>").on("click",function(){$("."+o.fn.prefix("tour-info_food")).find(".selected").removeClass("selected");$(this).addClass("selected");o.tour.offerChanged=true})));linkClass="date_link"}else{tr.append($("<td>").html("&mdash;"))}}}offersEl.append(tr)});if(!o.hash.get("t","").length){o.form.location.view.$.val(o.tour.hotel.n);o.form.location.selectedSuggest.type="hotel";o.form.location.selectedSuggest.objectId=o.tour.hotel.id}};this.setRoom=function(room){if(!room){return false}var ul=$("<ul>").addClass(o.fn.prefix("food-room-block-list"));$.each(room.services,function(k,v){ul.append($("<li>").addClass(v.cls).text(v.text))});return $("<div>").addClass(o.fn.prefix("food-room-block popup")).append($("<p>").text(room.name).addClass(o.fn.prefix("food-room-block_type"))).append(room.description).append(ul)};this.setAdditionally=function(offer){if(!offer){return false}self.$.room.html(offer.r);self.$.food.html(o.tour.foodInfo(offer.f));self.$.people.text(o.form.people.view.printPeoples(offer.y||o.hash.get("p")));self.$.price.html(o.fn.priceEcho(offer.pl,"uah"));self.$.code.text("Код: "+offer.i);self.$.transfer.removeClass("selected");self.$.insurance.removeClass("selected");self.$.visa.removeClass("selected");if($.inArray("transfer",offer.o)>-1){self.$.transfer.addClass("selected")}if($.inArray("insurance",offer.o)>-1){self.$.insurance.addClass("selected")}if($.inArray("visa",offer.o)>-1){self.$.visa.addClass("selected")}};this.getTourContainer=function(){var $tourContainer=o.view.$;var targetTourContainerId;var isTargetTourContainerElementExists=false;if(typeof osTourContainer!="undefined"){if(typeof osTourContainer==="string"){targetTourContainerId=osTourContainer;osTourContainer=document.getElementById(osTourContainer)}if($(osTourContainer).is("div")){isTargetTourContainerElementExists=true;$tourContainer=$(osTourContainer)}}else{if(typeof osContainer!="undefined"){if(typeof osContainer==="string"){targetTourContainerId=osContainer;osContainer=document.getElementById(osContainer)}if($(osContainer).is("div")){isTargetTourContainerElementExists=true;$tourContainer=$(osContainer)}}}if(!isTargetTourContainerElementExists&&targetTourContainerId){$tourContainer=$("<div>",{"class":o.fn.prefix("tour-container")});$(document).ready(function(){osTourContainer=document.getElementById(targetTourContainerId);var $targetTourContrainer=$(osTourContainer);if($targetTourContrainer.is("div")){$tourContainer.appendTo($targetTourContrainer)}else{$tourContainer.appendTo(o.view.$)}})}return $tourContainer};this.render=function($el){if($el){$el.append(o.view.$)}if(!$el||$el.hasClass(o.fn.prefix("os"))){$el=this.getTourContainer()}$el.addClass(o.fn.prefix("loading"));o.tour.getData(function(h){if(!o.hash.get("t")){if(o.hash.get("i")>5000){o.hash.add("t",h.n)}else{if(o.hash.get("i")>500){o.hash.add("t",h.c.n)}else{if(o.hash.get("i")>0){o.hash.add("t",h.t.n)}}}}self.init(h);o.tour.getOffers(function(days,months){if(!o.tour.offer||!o.tour.offer.d){o.tour.offer=false}$el.removeClass(o.fn.prefix("loading"));o.form.fromCity.getCities(0,function(cities){self.initOffer(days,months,cities);self.setAdditionally(o.tour.offer);self.renderPrice();self.renderAlert();if(o.tour.offer){self.setOffers(o.tour.offer,o.tour.rooms,o.tour.foods)}else{o.tour.getOffers(function(d,m){$("."+o.fn.prefix("tour-info-dates-wrap")).hide();$("."+o.fn.prefix("tour-info_date_price")).show().parent().addClass("block_yellow");$("."+o.fn.prefix("tour-info-dates_change")).hide();self.setDates(d,m);self.setAdditionally(o.tour.offer);self.setOffers(o.tour.offer,o.tour.rooms,o.tour.foods)},true,o.hash.get("c"),o.hash.get("l"))}})});$el.find(".os-tour-wrap").remove();self.$.appendTo($el)},$el);$(function(){var countDataNumber=function(){if(o.view.$.parent().width()<421){if(o.tour.matrixLen.x!=1){o.tour.matrixLen.x=1}}else{if(o.view.$.parent().width()<801&&o.view.$.parent().width()>=421){if(o.tour.matrixLen.x!=3){o.tour.matrixLen.x=3}}else{if(o.tour.matrixLen.x!=5){o.tour.matrixLen.x=5}}}o.tour.getOffers(function(d,m){self.setDates(d,m);self.setOffers(o.tour.offer,o.tour.rooms,o.tour.foods)},true,o.hash.get("od",o.hash.get("c")),o.hash.get("ol",o.hash.get("l")))};$(window).on("resize",countDataNumber);$(window).on("load",function(){if(typeof $phoneField!=="undefined"){$phoneField.focus(function(){$(this).mask("(000) 000-000000")})}if($("."+o.fn.prefix("tour-head-wrap")).length){var formPadding=-150,formOffset=$("."+o.fn.prefix("tour-head-wrap")).offset().top+$("."+o.fn.prefix("tour-head-wrap")).innerHeight()+formPadding;$("html, body").animate({scrollTop:formOffset},600)}})})}};o.tour.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var $head=undefined;var self=this;this.init=function(h){this.$=$("<div>").addClass(o.fn.prefix("tour-wrap"));this.$.append(o.tour.menu.init("hotelInfo",h));var $wrap=$("<div>").addClass(o.fn.prefix("hotel-info")).appendTo(this.$);$head=o.tour.head.init(h);$head.appendTo($wrap);var $leftPart=$("<div>").addClass(o.fn.prefix("tour-geninfo os-clearfix"));var $rightPart=o.tour.price.init();var $infoBlockLeft=$("<div>").addClass("os-fl");if(h.o&&h.o.di){$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("Расположение"))).append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.o.di)).appendTo($infoBlockLeft)}if(h.o.b||(h.e&&!o.fn.isEmpty(h.e.b))){var el=$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text("Пляж"));if(h.o.b){el.append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.o.b))}el.appendTo($infoBlockLeft);if(h.e&&!o.fn.isEmpty(h.e.b)){var el=($("<ul>")).addClass(o.fn.prefix("hotel-info-item_list"));$.each(h.e.b,function(k,item){el.append($("<li>").addClass("list_item").text(item.name+";"))});el.appendTo($infoBlockLeft)}}if(h.ad){if(h.ad.a){$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("Адрес"))).append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.ad.a)).appendTo($infoBlockLeft)}if(h.ad.ph){$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("Телефоны"))).append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.ad.ph)).appendTo($infoBlockLeft)}if(h.ad.ml){$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text("E-mail")).append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.ad.ml)).appendTo($infoBlockLeft)}if(h.ad.u){$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("Сайт отеля"))).append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html('<a target="_blank" href="'+h.ad.u+'">'+h.n+"</a>")).appendTo($infoBlockLeft)}}$infoBlockLeft.appendTo($leftPart);var $infoBlockRight=$("<div>").addClass("os-fr");if(h.o.fh||h.h){var el=$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("В отеле")));if(h.o.fh){el.append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.o.fh)).appendTo($infoBlockRight)}if(h.h&&typeof h.h!=="string"){var el=($("<ul>")).addClass(o.fn.prefix("hotel-info-item_list"));$.each(h.h,function(k,item){el.append($("<li>").addClass("list_item").text(item.name+";"))})}el.appendTo($infoBlockRight)}if(h.o.c||(h.e&&h.e.c)){var el=$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("Для детей")));if(h.o.c){el.append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.o.c)).appendTo($infoBlockRight)}if(h.e.c){var el=($("<ul>")).addClass(o.fn.prefix("hotel-info-item_list"));$.each(h.e.c,function(k,item){el.append($("<li>").addClass("list_item").text(item.name+";"))})}el.appendTo($infoBlockRight)}if(h.o.s||(h.e&&h.e.s)){var el=$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("Развлечение и спорт")));if(h.o.s){el.append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.o.s)).appendTo($infoBlockRight)}if(h.e&&h.e.s){var el=($("<ul>")).addClass(o.fn.prefix("hotel-info-item_list"));$.each(h.e.s,function(k,item){el.append($("<li>").addClass("list_item").text(item.name+";"))})}el.appendTo($infoBlockRight)}if(h.o.ds){$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("Номера"))).append($("<p>").addClass(o.fn.prefix("hotel-info-item_value")).html(h.o.ds)).appendTo($infoBlockRight)}if(h.e&&h.e.r){$("<div>").addClass(o.fn.prefix("hotel-info-item")).append($("<h6>").addClass(o.fn.prefix("hotel-info-item_title")).text(o._("Номера"))).appendTo($infoBlockRight);var el=($("<ul>")).addClass(o.fn.prefix("hotel-info-item_list"));$.each(h.e.r,function(k,item){el.append($("<li>").addClass("list_item").text(item.name+";"))});el.appendTo($infoBlockRight)}$infoBlockRight.appendTo($leftPart);$("<div>").addClass("os-clearfix").append($rightPart).append($leftPart).appendTo($wrap)};this.setInfo=function(){if(!o.tour.offer){o.tour.price.$.button.text(o._("Туры в отель"));return}o.tour.price.$.price.html(o.fn.priceEcho(o.tour.offer.pl,"uah"));o.tour.price.$.code.text("Код: "+o.tour.offer.i);var text="Тур  на "+o.tour.offer.l+" "+o.fn.suffixForNumber(o.tour.offer.l,["день","дня",o._("дней")]);if(o.hash.get("p",0)){text+="<br>Для "+o.form.people.view.printPeoples(o.hash.get("p"))}text+="<br>"+o.tour.getValue(o.config.transport,o.tour.offer.t);o.tour.price.$.info.html(text)};this.render=function($el){if(!$el||$el==o.view.$){$el=o.tour.view.getTourContainer()}o.tour.getData(function(h){self.init(h);o.tour.getOffers(function(days,months){if(!o.tour.offer||!o.tour.offer.d){o.tour.offer=false}self.setInfo()});$el.find(".os-tour-wrap").remove();self.$.appendTo($el)})}};o.tour.hotelInfo.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.init=function(h){this.$=$("<div>").addClass(o.fn.prefix("tour-wrap"));this.$.append(o.tour.menu.init("photo",h));var $wrap=$("<div>").addClass(o.fn.prefix("hotel-photo")).appendTo(this.$);o.tour.head.init(h,0,1).appendTo($wrap);var $leftPart=$("<div>").addClass("os-photo-wrap");var $rightPart=o.tour.price.init();var img_type;for(var i=0;i<h.f.length;i++){if(h.watermark&&h.watermark.length==4){img_type="3_"+h.watermark}else{img_type="3"}$("<img>").attr({"data-original":"https://newimg.otpusk.com/"+img_type+"/730x0/"+h.f[i],"class":o.fn.prefix("photo")+" lazy"}).lazyload().appendTo($leftPart)}$("<div>").addClass("os-clearfix").append($rightPart).append($leftPart).appendTo($wrap)};this.setInfo=function(){if(!o.tour.offer){o.tour.price.$.button.text(o._("Туры в отель"));return}o.tour.price.$.price.html(o.fn.priceEcho(o.tour.offer.pl,"uah"));o.tour.price.$.code.text("Код: "+o.tour.offer.i);var text="Тур  на "+o.tour.offer.l+" "+o.fn.suffixForNumber(o.tour.offer.l,["день","дня",o._("дней")]);if(o.hash.get("p",0)){text+="<br>Для "+o.form.people.view.printPeoples(o.hash.get("p"))}text+="<br>"+o.tour.getValue(o.config.transport,o.tour.offer.t);o.tour.price.$.info.html(text)};this.render=function($el){if(!$el||$el==o.view.$){$el=o.tour.view.getTourContainer()}o.tour.getData(function(e){self.init(e);o.tour.getOffers(function(days,months){if(!o.tour.offer||!o.tour.offer.d){o.tour.offer=false}self.setInfo()});$el.find(".os-tour-wrap").remove();self.$.appendTo($el);$("html,body").trigger("scroll")})}};o.tour.photo.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.init=function(h){this.$=$("<div>").addClass(o.fn.prefix("tour-wrap"));this.$.append(o.tour.menu.init("map",h));var $wrap=$("<div>").addClass(o.fn.prefix("hotel-map")).appendTo(this.$);o.tour.head.init(h).appendTo($wrap);var $leftPart=$("<div>").addClass(o.fn.prefix("tour-geninfo os-clearfix")).append($("<div>").attr({id:o.fn.prefix("gMap")}));var $rightPart=o.tour.price.init();$("<div>").addClass("os-clearfix").append($rightPart).append($leftPart).appendTo($wrap)};this.setInfo=function(){if(!o.tour.offer){o.tour.price.$.button.text(o._("Туры в отель"));return}o.tour.price.$.price.html(o.fn.priceEcho(o.tour.offer.pl,"uah"));o.tour.price.$.code.text("Код: "+o.tour.offer.i);var text="Тур  на "+o.tour.offer.l+" "+o.fn.suffixForNumber(o.tour.offer.l,["день","дня",o._("дней")]);if(o.hash.get("p",0)){text+="<br>Для "+o.form.people.view.printPeoples(o.hash.get("p"))}text+="<br>"+o.tour.getValue(o.config.transport,o.tour.offer.t);o.tour.price.$.info.html(text)};this.render=function($el){if(!$el||$el==o.view.$){$el=o.tour.view.getTourContainer()}o.tour.getData(function(e){self.init(e);o.tour.getOffers(function(days,months){if(!o.tour.offer||!o.tour.offer.d){o.tour.offer=false}self.setInfo()});$el.find(".os-tour-wrap").remove();self.$.appendTo($el)})}};o.tour.hotelMap.view=new f()})(jQuery,otpMain);(function($,o){var f=function(){this.$=undefined;var self=this;this.init=function(h,r){this.$=$("<div>").addClass(o.fn.prefix("tour-wrap"));this.$.append(o.tour.menu.init("reviews",h));this.$.leftPart=$("<div>").addClass(o.fn.prefix("tour-geninfo"));var $wrap=$("<div>").addClass(o.fn.prefix("hotel-reviews os-clearfix")).appendTo(this.$);var $rightPart=$("<div>").addClass(o.fn.prefix("review-gen"));this.$.rating=$("<div>").addClass(o.fn.prefix("rating-wrap")).appendTo($rightPart);$wrap.append($rightPart).append(o.tour.head.init(h,1,0)).append(o.tour.price.init()).append(this.$.leftPart)};this.setInfo=function(h,vt){var $rating=$("<div>").addClass(o.fn.prefix("review-gen-rating"));if(vt.count){$rating.append($("<span>").addClass(o.fn.prefix("rating_gen")).html(o._("Общая оценка ")+'<span class="st-b">'+h.r+"</span> "+o._("из")+" 10")).append($("<span>").addClass(o.fn.prefix("tour_hrating_indicator")).append($("<span>").addClass(o.fn.prefix("rating")).addClass("r-"+parseInt(h.r)))).append(o._("На основании ")+vt.count+" "+o.fn.suffixForNumber(vt.count,[o._("отзыва"),o._("отзывов"),o._("отзывов")])+o._(" пользователей")+' &laquo;<a href="http://www.turpravda.com/'+h.t.cd+"/"+h.c.c+"/"+h.h+"-h"+h.i+'.html" class="os-rating_link">'+o._("ТурПравды")+"</a>&raquo;")}if(vt.count){var ul=$("<ul>").addClass(o.fn.prefix("rating-detail-list"));if(vt.sum1){ul.append($("<li>").addClass(o.fn.prefix("rating-detail-list_item")).append(o._("номер")).append($("<span>").addClass("item_value").append(vt.sum1).append($("<span>").addClass("item_value_degree dg"+parseInt(vt.sum1)))))}if(vt.sum2){ul.append($("<li>").addClass(o.fn.prefix("rating-detail-list_item")).append(o._("сервис")).append($("<span>").addClass("item_value").append(vt.sum2).append($("<span>").addClass("item_value_degree dg"+parseInt(vt.sum2)))))}if(vt.sum3){ul.append($("<li>").addClass(o.fn.prefix("rating-detail-list_item")).append("чистота").append($("<span>").addClass("item_value").append(vt.sum3).append($("<span>").addClass("item_value_degree dg"+parseInt(vt.sum3)))))}if(vt.sum4){ul.append($("<li>").addClass(o.fn.prefix("rating-detail-list_item")).append(o._("питание")).append($("<span>").addClass("item_value").append(vt.sum4).append($("<span>").addClass("item_value_degree dg"+parseInt(vt.sum4)))))}if(vt.sum5){ul.append($("<li>").addClass(o.fn.prefix("rating-detail-list_item")).append(o._("инфраструктура")).append($("<span>").addClass("item_value").append(vt.sum5).append($("<span>").addClass("item_value_degree dg"+parseInt(vt.sum5)))))}$rating.append($("<div>").addClass(o.fn.prefix("rating-detail")).append($("<span>").addClass(o.fn.prefix("rating-detail_toggle")).on("click",function(){$(this).toggleClass("change");$(".os-rating-detail-list").toggleClass("open")}).append($("<span>").addClass(o.fn.prefix("rating-detail_toggle_value")).text(o._("Оценки отеля по критериям"))).append($("<span>").addClass(o.fn.prefix("rating-detail_toggle_arr")))).append(ul));if(o.tour.offer){o.tour.price.$.price.html(o.fn.priceEcho(o.tour.offer.pl,"uah"));var text="Тур  на "+o.tour.offer.l+" "+o.fn.suffixForNumber(o.tour.offer.l,["день","дня",o._("дней")]);if(o.hash.get("p",0)){text+="<br>Для "+o.form.people.view.printPeoples(o.hash.get("p"))}text+="<br>"+o.tour.getValue(o.config.transport,o.tour.offer.t);o.tour.price.$.info.html(text);o.tour.price.$.code.text("Код: "+o.tour.offer.i)}else{o.tour.price.$.button.text(o._("Туры в отель"))}}$rating.appendTo(this.$.rating)};this.render=function($el){if(!$el||$el==o.view.$){$el=o.tour.view.getTourContainer()}o.tour.getData(function(e){o.tour.getOffers(function(days,months){if(!o.tour.offer||!o.tour.offer.d){o.tour.offer=false}o.tour.reviews.load(function(reviews){o.tour.reviews.votes(function(vt){self.init(e);self.setInfo(e,vt);self.$.leftPart.append(reviews);$el.find(".os-tour-wrap").remove();self.$.appendTo($el)},e.vi)},$el,e.vi)})})}};o.tour.reviews.view=new f()})(jQuery,otpMain);var query1=otpMain.search.getQuery();query1.f=1;query1.t="Египет";query1.i=43;query1.c="2014-07-02";query1.l=7;query1.tc=[];query1.d=1544;otpMain.page=otpMain.hash.parse().get("page","form");if(jQuery.isNumeric(otpMain.page)){otpMain.page="form"}jQuery("head").append('<meta name="viewport" content="width=device-width, initial-scale=1">');document.write('<div class="'+otpMain.fn.prefix("os")+'"></div>');otpMain.view={};otpMain.view.$=jQuery(otpMain.fn.prefix("os","."));if(!apiKey){console.info(apiError);otpMain.tour.head.errorPage(500)}if(typeof api_session_token!=="undefined"){otpMain.apiToken={api_session_token:api_session_token}}else{otpMain.apiToken={access_token:osApiId}}otpMain.apiKey=apiKey;otpMain.apiType=(typeof api_modules.tours!=="undefined"?api_modules.tours:false);var osMapLoaded=false;if(!otpMain.apiType){console.info("the module is not enabled!");otpMain.tour.head.errorPage(500)}var runApplication=function(page){otpMain.page=page||otpMain.page;if(otpMain.page){if(!page){otpMain.form.view.render()}if(otpMain.page=="tour"){otpMain.tour.view.render()}if(otpMain.page=="hotelInfo"){otpMain.tour.hotelInfo.view.render()}if(otpMain.page=="photo"){otpMain.tour.photo.view.render()}if(otpMain.page=="reviews"){otpMain.tour.reviews.view.render()}if(otpMain.page=="map"){otpMain.tour.hotelMap.view.render();window.osMapsCallback=function(){osMapLoaded=true;setTimeout(function(){otpMain.mapInit.init(otpMain.fn.prefix("gMap"))},300)};window.osLoadScript=function(){if(osMapLoaded){return window.osMapsCallback()}if(typeof google==="undefined"||!google.maps){var script=document.createElement("script");script.type="text/javascript";script.src="https://maps.google.com/maps/api/js?"+(gmapkey?"key="+gmapkey+"&":"")+"sensor=false&language=ru&callback=osMapsCallback";document.body.appendChild(script)}else{return window.osMapsCallback()}};window.osLoadScript()}}};var is_chrome=navigator.userAgent.indexOf("Chrome")>-1;var is_safari=navigator.userAgent.indexOf("Safari")>-1;var is_facebook=navigator.userAgent.indexOf("FBAV/")>-1;var ios=/iphone|ipod|ipad/.test(window.navigator.userAgent.toLowerCase());if((is_chrome)&&(is_safari)){is_safari=false}otpMain.apiToken={access_token:osApiId};if(is_safari||is_facebook){otpMain.apiToken={access_token:osApiId};otpMain.form.location.geoSuggest("{}",function(d){if(d.error){var countError=parseInt(otpMain.fn.getCookie("countError"))||0;if(countError<3){document.cookie="countError="+(countError+1);window.location.href="https://export.otpusk.com/js/sessions/?url="+window.location.href}else{if(countError==3){window.location.reload()}else{console.log("error: can't set cookie");document.cookie="countError=2";runApplication()}}}else{document.cookie="countError=0";runApplication()}})}else{runApplication()}var resizeForm=function(){if(jQuery("."+otpMain.fn.prefix("os")).parent().width()<770){jQuery("."+otpMain.fn.prefix("os")).removeClass("medium-form").addClass("medium-big");if(jQuery("."+otpMain.fn.prefix("os")).parent().width()<664){jQuery("."+otpMain.fn.prefix("os")).removeClass("medium-big").removeClass("small-form").addClass("medium-form");if(jQuery("."+otpMain.fn.prefix("os")).parent().width()<520){jQuery("."+otpMain.fn.prefix("os")).removeClass("medium-form").addClass("small-form")}}}else{jQuery("."+otpMain.fn.prefix("os")).removeClass("medium-big")}};jQuery(function(){jQuery(document).ready(function(){resizeForm()});window.onresize=function(){resizeForm()}})})(apiKey,osGeo,osTarget,osContainer,api_modules);if(typeof osjQuerryUse!="undefined"){var jQuery=osjQuerryUse;$=$osUse};